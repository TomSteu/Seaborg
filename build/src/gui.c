/* gui.c generated by valac 0.36.6, the Vala compiler
 * generated from gui.vala, do not modify */


#include <glib.h>
#include <glib-object.h>
#include <stdlib.h>
#include <string.h>
#include <gtk/gtk.h>
#include <gio/gio.h>
#include <stdio.h>
#include <glib/gstdio.h>
#include <libxml/tree.h>
#include <libxml/parser.h>
#include <float.h>
#include <math.h>


#define SEABORG_TYPE_EVALUATION_DATA (seaborg_evaluation_data_get_type ())
typedef struct _SeaborgEvaluationData SeaborgEvaluationData;
#define _g_free0(var) (var = (g_free (var), NULL))

#define SEABORG_TYPE_SEABORG_APPLICATION (seaborg_seaborg_application_get_type ())
#define SEABORG_SEABORG_APPLICATION(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SEABORG_TYPE_SEABORG_APPLICATION, SeaborgSeaborgApplication))
#define SEABORG_SEABORG_APPLICATION_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SEABORG_TYPE_SEABORG_APPLICATION, SeaborgSeaborgApplicationClass))
#define SEABORG_IS_SEABORG_APPLICATION(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SEABORG_TYPE_SEABORG_APPLICATION))
#define SEABORG_IS_SEABORG_APPLICATION_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SEABORG_TYPE_SEABORG_APPLICATION))
#define SEABORG_SEABORG_APPLICATION_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SEABORG_TYPE_SEABORG_APPLICATION, SeaborgSeaborgApplicationClass))

typedef struct _SeaborgSeaborgApplication SeaborgSeaborgApplication;
typedef struct _SeaborgSeaborgApplicationClass SeaborgSeaborgApplicationClass;
typedef struct _SeaborgSeaborgApplicationPrivate SeaborgSeaborgApplicationPrivate;
typedef struct _Block1Data Block1Data;

#define SEABORG_TYPE_EVALUATION_CELL (seaborg_evaluation_cell_get_type ())
#define SEABORG_EVALUATION_CELL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SEABORG_TYPE_EVALUATION_CELL, SeaborgEvaluationCell))
#define SEABORG_EVALUATION_CELL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SEABORG_TYPE_EVALUATION_CELL, SeaborgEvaluationCellClass))
#define SEABORG_IS_EVALUATION_CELL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SEABORG_TYPE_EVALUATION_CELL))
#define SEABORG_IS_EVALUATION_CELL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SEABORG_TYPE_EVALUATION_CELL))
#define SEABORG_EVALUATION_CELL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SEABORG_TYPE_EVALUATION_CELL, SeaborgEvaluationCellClass))

typedef struct _SeaborgEvaluationCell SeaborgEvaluationCell;
typedef struct _SeaborgEvaluationCellClass SeaborgEvaluationCellClass;

#define SEABORG_TYPE_ICELL (seaborg_icell_get_type ())
#define SEABORG_ICELL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SEABORG_TYPE_ICELL, SeaborgICell))
#define SEABORG_IS_ICELL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SEABORG_TYPE_ICELL))
#define SEABORG_ICELL_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), SEABORG_TYPE_ICELL, SeaborgICellIface))

typedef struct _SeaborgICell SeaborgICell;
typedef struct _SeaborgICellIface SeaborgICellIface;

#define SEABORG_TYPE_ICELL_CONTAINER (seaborg_icell_container_get_type ())
#define SEABORG_ICELL_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SEABORG_TYPE_ICELL_CONTAINER, SeaborgICellContainer))
#define SEABORG_IS_ICELL_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SEABORG_TYPE_ICELL_CONTAINER))
#define SEABORG_ICELL_CONTAINER_GET_INTERFACE(obj) (G_TYPE_INSTANCE_GET_INTERFACE ((obj), SEABORG_TYPE_ICELL_CONTAINER, SeaborgICellContainerIface))

typedef struct _SeaborgICellContainer SeaborgICellContainer;
typedef struct _SeaborgICellContainerIface SeaborgICellContainerIface;

#define SEABORG_TYPE_ADD_BUTTON (seaborg_add_button_get_type ())
#define SEABORG_ADD_BUTTON(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SEABORG_TYPE_ADD_BUTTON, SeaborgAddButton))
#define SEABORG_ADD_BUTTON_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SEABORG_TYPE_ADD_BUTTON, SeaborgAddButtonClass))
#define SEABORG_IS_ADD_BUTTON(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SEABORG_TYPE_ADD_BUTTON))
#define SEABORG_IS_ADD_BUTTON_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SEABORG_TYPE_ADD_BUTTON))
#define SEABORG_ADD_BUTTON_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SEABORG_TYPE_ADD_BUTTON, SeaborgAddButtonClass))

typedef struct _SeaborgAddButton SeaborgAddButton;
typedef struct _SeaborgAddButtonClass SeaborgAddButtonClass;
typedef struct _Block2Data Block2Data;
typedef struct _Block3Data Block3Data;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define __g_queue_free__seaborg_evaluation_data_free0_0(var) ((var == NULL) ? NULL : (var = (_g_queue_free__seaborg_evaluation_data_free0_ (var), NULL)))
#define _g_thread_unref0(var) ((var == NULL) ? NULL : (var = (g_thread_unref (var), NULL)))

#define SEABORG_TYPE_NOTEBOOK (seaborg_notebook_get_type ())
#define SEABORG_NOTEBOOK(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SEABORG_TYPE_NOTEBOOK, SeaborgNotebook))
#define SEABORG_NOTEBOOK_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SEABORG_TYPE_NOTEBOOK, SeaborgNotebookClass))
#define SEABORG_IS_NOTEBOOK(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SEABORG_TYPE_NOTEBOOK))
#define SEABORG_IS_NOTEBOOK_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SEABORG_TYPE_NOTEBOOK))
#define SEABORG_NOTEBOOK_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SEABORG_TYPE_NOTEBOOK, SeaborgNotebookClass))

typedef struct _SeaborgNotebook SeaborgNotebook;
typedef struct _SeaborgNotebookClass SeaborgNotebookClass;
#define _seaborg_evaluation_data_free0(var) ((var == NULL) ? NULL : (var = (seaborg_evaluation_data_free (var), NULL)))
#define __g_slist_free__g_free0_0(var) ((var == NULL) ? NULL : (var = (_g_slist_free__g_free0_ (var), NULL)))
#define _fclose0(var) ((var == NULL) ? NULL : (var = (fclose (var), NULL)))
typedef struct _Block4Data Block4Data;

#define SEABORG_TYPE_TEXT_CELL (seaborg_text_cell_get_type ())
#define SEABORG_TEXT_CELL(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SEABORG_TYPE_TEXT_CELL, SeaborgTextCell))
#define SEABORG_TEXT_CELL_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SEABORG_TYPE_TEXT_CELL, SeaborgTextCellClass))
#define SEABORG_IS_TEXT_CELL(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SEABORG_TYPE_TEXT_CELL))
#define SEABORG_IS_TEXT_CELL_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SEABORG_TYPE_TEXT_CELL))
#define SEABORG_TEXT_CELL_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SEABORG_TYPE_TEXT_CELL, SeaborgTextCellClass))

typedef struct _SeaborgTextCell SeaborgTextCell;
typedef struct _SeaborgTextCellClass SeaborgTextCellClass;
#define _g_regex_unref0(var) ((var == NULL) ? NULL : (var = (g_regex_unref (var), NULL)))
#define _g_error_free0(var) ((var == NULL) ? NULL : (var = (g_error_free (var), NULL)))

#define SEABORG_TYPE_CELL_CONTAINER (seaborg_cell_container_get_type ())
#define SEABORG_CELL_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SEABORG_TYPE_CELL_CONTAINER, SeaborgCellContainer))
#define SEABORG_CELL_CONTAINER_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SEABORG_TYPE_CELL_CONTAINER, SeaborgCellContainerClass))
#define SEABORG_IS_CELL_CONTAINER(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SEABORG_TYPE_CELL_CONTAINER))
#define SEABORG_IS_CELL_CONTAINER_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SEABORG_TYPE_CELL_CONTAINER))
#define SEABORG_CELL_CONTAINER_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SEABORG_TYPE_CELL_CONTAINER, SeaborgCellContainerClass))

typedef struct _SeaborgCellContainer SeaborgCellContainer;
typedef struct _SeaborgCellContainerClass SeaborgCellContainerClass;
typedef struct _Block5Data Block5Data;
#define _g_string_free0(var) ((var == NULL) ? NULL : (var = (g_string_free (var, TRUE), NULL)))

struct _SeaborgEvaluationData {
	void* cell;
	gchar* input;
};

struct _SeaborgSeaborgApplication {
	GtkApplication parent_instance;
	SeaborgSeaborgApplicationPrivate * priv;
};

struct _SeaborgSeaborgApplicationClass {
	GtkApplicationClass parent_class;
};

struct _SeaborgSeaborgApplicationPrivate {
	SeaborgEvaluationData current_cell;
	GtkApplicationWindow* main_window;
	GtkHeaderBar* main_headerbar;
	GtkStackSwitcher* tab_switcher;
	GtkStack* notebook_stack;
	GMenu* main_menu;
	GtkScrolledWindow* notebook_scroll;
	GtkShortcutsWindow* shortcuts;
	void* kernel_connection;
	GQueue* eval_queue;
	GRecMutex __lock_eval_queue;
	GThread* listener_thread;
	gboolean listener_thread_is_running;
};

typedef void (*SeaborgSeaborgApplicationcallback_str) (gchar* string_to_write, void* callback_data, gulong stamp, gint break_after);
struct _Block1Data {
	int _ref_count_;
	gchar* string_to_write;
	void* cell_ptr;
	gulong _stamp;
	gint _break;
};

struct _SeaborgICellContainerIface {
	GTypeInterface parent_iface;
	GArray* (*get_Children) (SeaborgICellContainer* self);
	void (*set_Children) (SeaborgICellContainer* self, GArray* value);
	GArray* (*get_AddButtons) (SeaborgICellContainer* self);
	void (*set_AddButtons) (SeaborgICellContainer* self, GArray* value);
};

struct _SeaborgICellIface {
	GTypeInterface parent_iface;
	void (*toggle_all) (SeaborgICell* self);
	void (*untoggle_all) (SeaborgICell* self);
	void (*expand_all) (SeaborgICell* self);
	void (*collapse_all) (SeaborgICell* self);
	gboolean (*marker_selected) (SeaborgICell* self);
	guint (*get_level) (SeaborgICell* self);
	void (*remove_recursively) (SeaborgICell* self);
	void (*add_before) (SeaborgICell* self, gint pos, SeaborgICell** list, int list_length1);
	void (*remove_from) (SeaborgICell* self, gint pos, gint number, gboolean trash);
	void (*focus_cell) (SeaborgICell* self);
	void (*set_text) (SeaborgICell* self, const gchar* _text);
	gchar* (*get_text) (SeaborgICell* self);
	SeaborgICellContainer* (*get_Parent) (SeaborgICell* self);
	void (*set_Parent) (SeaborgICell* self, SeaborgICellContainer* value);
	gboolean (*get_lock) (SeaborgICell* self);
	void (*set_lock) (SeaborgICell* self, gboolean value);
};

struct _Block2Data {
	int _ref_count_;
	gchar* _string_to_write;
	void* data_ptr;
	gulong _stamp;
	gint _break;
};

struct _Block3Data {
	int _ref_count_;
	gchar* _string_to_write;
	void* data_ptr;
	gulong _stamp;
	gint _break;
};

struct _Block4Data {
	int _ref_count_;
	SeaborgSeaborgApplication* self;
	gchar* fn;
};

struct _Block5Data {
	int _ref_count_;
	SeaborgSeaborgApplication* self;
	gchar* fn;
};


static gpointer seaborg_seaborg_application_parent_class = NULL;
extern gulong seaborg_seaborg_application_global_stamp;
GRecMutex __lock_seaborg_seaborg_application_global_stamp = {0};
gulong seaborg_seaborg_application_global_stamp = (gulong) 0;
static SeaborgSeaborgApplicationcallback_str seaborg_seaborg_application_write_to_evaluation_cell;
static SeaborgSeaborgApplicationcallback_str seaborg_seaborg_application_write_to_evaluation_cell = NULL;
static SeaborgSeaborgApplicationcallback_str seaborg_seaborg_application_receive_notebook_xml;
static SeaborgSeaborgApplicationcallback_str seaborg_seaborg_application_receive_notebook_xml = NULL;
static SeaborgSeaborgApplicationcallback_str seaborg_seaborg_application_export_notebook_callback;
static SeaborgSeaborgApplicationcallback_str seaborg_seaborg_application_export_notebook_callback = NULL;

GType seaborg_evaluation_data_get_type (void) G_GNUC_CONST;
SeaborgEvaluationData* seaborg_evaluation_data_dup (const SeaborgEvaluationData* self);
void seaborg_evaluation_data_free (SeaborgEvaluationData* self);
void seaborg_evaluation_data_copy (const SeaborgEvaluationData* self, SeaborgEvaluationData* dest);
void seaborg_evaluation_data_destroy (SeaborgEvaluationData* self);
GType seaborg_seaborg_application_get_type (void) G_GNUC_CONST;
#define SEABORG_SEABORG_APPLICATION_GET_PRIVATE(o) (G_TYPE_INSTANCE_GET_PRIVATE ((o), SEABORG_TYPE_SEABORG_APPLICATION, SeaborgSeaborgApplicationPrivate))
enum  {
	SEABORG_SEABORG_APPLICATION_DUMMY_PROPERTY
};
static void _seaborg_seaborg_application_write_to_evaluation_cell_lambda4_ (gchar* _string_to_write, void* cell_ptr, gulong _stamp, gint _break);
static Block1Data* block1_data_ref (Block1Data* _data1_);
static void block1_data_unref (void * _userdata_);
static gboolean __lambda5_ (Block1Data* _data1_);
GType seaborg_evaluation_cell_get_type (void) G_GNUC_CONST;
void seaborg_evaluation_cell_add_text (SeaborgEvaluationCell* self, const gchar* _text);
GType seaborg_add_button_get_type (void) G_GNUC_CONST;
GType seaborg_icell_container_get_type (void) G_GNUC_CONST;
GType seaborg_icell_get_type (void) G_GNUC_CONST;
void seaborg_icell_expand_all (SeaborgICell* self);
void seaborg_icell_set_lock (SeaborgICell* self, gboolean value);
static gboolean ___lambda5__gsource_func (gpointer self);
static void __seaborg_seaborg_application_write_to_evaluation_cell_lambda4__seaborgseaborgapplicationcallback_str (gchar* string_to_write, void* callback_data, gulong stamp, gint break_after);
static void _seaborg_seaborg_application_receive_notebook_xml_lambda14_ (gchar* _string_to_write, void* data_ptr, gulong _stamp, gint _break);
static Block2Data* block2_data_ref (Block2Data* _data2_);
static void block2_data_unref (void * _userdata_);
static gboolean __lambda15_ (Block2Data* _data2_);
void seaborg_seaborg_application_kernel_msg (SeaborgSeaborgApplication* self, const gchar* msg);
void seaborg_seaborg_application_import_notebook (SeaborgSeaborgApplication* self, const gchar* xml, const gchar* fn);
static gboolean ___lambda15__gsource_func (gpointer self);
static void __seaborg_seaborg_application_receive_notebook_xml_lambda14__seaborgseaborgapplicationcallback_str (gchar* string_to_write, void* callback_data, gulong stamp, gint break_after);
static void _seaborg_seaborg_application_export_notebook_callback_lambda17_ (gchar* _string_to_write, void* data_ptr, gulong _stamp, gint _break);
static Block3Data* block3_data_ref (Block3Data* _data3_);
static void block3_data_unref (void * _userdata_);
static gboolean __lambda18_ (Block3Data* _data3_);
static gboolean ___lambda18__gsource_func (gpointer self);
static void __seaborg_seaborg_application_export_notebook_callback_lambda17__seaborgseaborgapplicationcallback_str (gchar* string_to_write, void* callback_data, gulong stamp, gint break_after);
static void _seaborg_evaluation_data_free0_ (gpointer var);
static void _g_queue_free__seaborg_evaluation_data_free0_ (GQueue* self);
static void seaborg_seaborg_application_real_activate (GApplication* base);
void seaborg_id_generator_reset (void);
void seaborg_seaborg_application_new_notebook (SeaborgSeaborgApplication* self);
static void seaborg_seaborg_application_real_startup (GApplication* base);
static void __lambda19_ (SeaborgSeaborgApplication* self);
static void ___lambda19__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self);
static void __lambda20_ (SeaborgSeaborgApplication* self);
static void seaborg_seaborg_application_load_dialog (SeaborgSeaborgApplication* self);
static void ___lambda20__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self);
static void __lambda21_ (SeaborgSeaborgApplication* self);
static void seaborg_seaborg_application_save_dialog (SeaborgSeaborgApplication* self);
void seaborg_seaborg_application_save_notebook (SeaborgSeaborgApplication* self, const gchar* fn);
static void ___lambda21__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self);
static void __lambda22_ (SeaborgSeaborgApplication* self);
static void ___lambda22__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self);
static void __lambda23_ (SeaborgSeaborgApplication* self);
static void seaborg_seaborg_application_import_dialog (SeaborgSeaborgApplication* self);
static void ___lambda23__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self);
static void __lambda25_ (SeaborgSeaborgApplication* self);
static void seaborg_seaborg_application_export_dialog (SeaborgSeaborgApplication* self);
static void ___lambda25__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self);
static void __lambda27_ (SeaborgSeaborgApplication* self);
static void ___lambda27__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self);
static void __lambda28_ (SeaborgSeaborgApplication* self);
GType seaborg_notebook_get_type (void) G_GNUC_CONST;
void seaborg_icell_toggle_all (SeaborgICell* self);
void seaborg_icell_remove_recursively (SeaborgICell* self);
static void ___lambda28__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self);
static void __lambda29_ (SeaborgSeaborgApplication* self);
static void ___lambda29__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self);
static void __lambda30_ (SeaborgSeaborgApplication* self);
void seaborg_seaborg_application_schedule_evaluation (SeaborgSeaborgApplication* self, SeaborgICellContainer* container);
static void ___lambda30__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self);
static void __lambda34_ (SeaborgSeaborgApplication* self);
gint try_abort (void* con);
static void ___lambda34__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self);
static void seaborg_seaborg_application_reset_kernel (SeaborgSeaborgApplication* self);
GArray* seaborg_icell_container_get_Children (SeaborgICellContainer* self);
gboolean seaborg_icell_marker_selected (SeaborgICell* self);
gboolean seaborg_icell_get_lock (SeaborgICell* self);
gboolean seaborg_check_input_packet (const gchar* _str);
gchar* seaborg_icell_get_text (SeaborgICell* self);
void seaborg_evaluation_cell_remove_text (SeaborgEvaluationCell* self);
#define SEABORG_PARAMETER_form "InputForm"
gchar* seaborg_replace_characters (const gchar* _str);
void seaborg_seaborg_application_start_evalutation_thread (SeaborgSeaborgApplication* self);
static void* ___lambda31_ (SeaborgSeaborgApplication* self);
gint check_connection (void* con);
static gboolean ____lambda32_ (SeaborgSeaborgApplication* self);
static void seaborg_seaborg_application_abort_eval (SeaborgSeaborgApplication* self);
static gboolean _____lambda32__gsource_func (gpointer self);
void evaluate (void* con, gchar* input, SeaborgSeaborgApplicationcallback_str callback, void* callback_data);
static gboolean ____lambda33_ (SeaborgSeaborgApplication* self);
static gboolean _____lambda33__gsource_func (gpointer self);
static gpointer ____lambda31__gthread_func (gpointer self);
gint try_reset_after_abort (void* con);
void close_connection (void* connection);
void* init_connection (gchar* path);
#define SEABORG_PARAMETER_kernel_init "-linkname \"math -wstp -mathlink\""
static void _g_free0_ (gpointer var);
static void _g_slist_free__g_free0_ (GSList* self);
void seaborg_seaborg_application_load_notebook (SeaborgSeaborgApplication* self, const gchar* fn);
static void seaborg_seaborg_application_process_for_import (SeaborgSeaborgApplication* self, const gchar* fn);
void seaborg_seaborg_application_export_notebook (SeaborgSeaborgApplication* self, const gchar* fn);
SeaborgNotebook* seaborg_notebook_new (void);
SeaborgNotebook* seaborg_notebook_construct (GType object_type);
SeaborgEvaluationCell* seaborg_evaluation_cell_new (SeaborgICellContainer* par);
SeaborgEvaluationCell* seaborg_evaluation_cell_construct (GType object_type, SeaborgICellContainer* par);
void seaborg_icell_add_before (SeaborgICell* self, gint pos, SeaborgICell** list, int list_length1);
static void seaborg_seaborg_application_write_recursively (SeaborgSeaborgApplication* self, SeaborgICell* cell, FILE* file, const gchar* identation);
gchar* seaborg_make_file_name (const gchar* _str);
static void seaborg_seaborg_application_assemble_recursively (SeaborgSeaborgApplication* self, xmlNode* root, SeaborgICellContainer* container);
static Block4Data* block4_data_ref (Block4Data* _data4_);
static void block4_data_unref (void * _userdata_);
static void* __lambda26_ (Block4Data* _data4_);
static void seaborg_seaborg_application_abort_listener_thread (SeaborgSeaborgApplication* self);
static gchar* seaborg_seaborg_application_list_cells_recursively (SeaborgSeaborgApplication* self, SeaborgICellContainer* container);
static gpointer ___lambda26__gthread_func (gpointer self);
GType seaborg_text_cell_get_type (void) G_GNUC_CONST;
gchar* seaborg_evaluation_cell_get_output_text (SeaborgEvaluationCell* self);
GType seaborg_cell_container_get_type (void) G_GNUC_CONST;
guint seaborg_icell_get_level (SeaborgICell* self);
void seaborg_icell_set_text (SeaborgICell* self, const gchar* _text);
gchar* seaborg_load_replacement (const gchar* str);
SeaborgTextCell* seaborg_text_cell_new (SeaborgICellContainer* par);
SeaborgTextCell* seaborg_text_cell_construct (GType object_type, SeaborgICellContainer* par);
SeaborgCellContainer* seaborg_cell_container_new (SeaborgICellContainer* parent, guint level);
SeaborgCellContainer* seaborg_cell_container_construct (GType object_type, SeaborgICellContainer* parent, guint level);
void seaborg_cell_container_set_level (SeaborgCellContainer* self, guint level);
gchar* seaborg_save_replacement (const gchar* str);
static Block5Data* block5_data_ref (Block5Data* _data5_);
static void block5_data_unref (void * _userdata_);
static void* __lambda24_ (Block5Data* _data5_);
static gpointer ___lambda24__gthread_func (gpointer self);
SeaborgSeaborgApplication* seaborg_seaborg_application_new (void);
SeaborgSeaborgApplication* seaborg_seaborg_application_construct (GType object_type);
static void seaborg_seaborg_application_finalize (GObject * obj);
gint seaborg_main (gchar** args, int args_length1);
static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func);
static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func);


void seaborg_evaluation_data_copy (const SeaborgEvaluationData* self, SeaborgEvaluationData* dest) {
	void* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	_tmp0_ = (*self).cell;
	(*dest).cell = _tmp0_;
	_tmp1_ = (*self).input;
	_tmp2_ = g_strdup (_tmp1_);
	_g_free0 ((*dest).input);
	(*dest).input = _tmp2_;
}


void seaborg_evaluation_data_destroy (SeaborgEvaluationData* self) {
	_g_free0 ((*self).input);
}


SeaborgEvaluationData* seaborg_evaluation_data_dup (const SeaborgEvaluationData* self) {
	SeaborgEvaluationData* dup;
	dup = g_new0 (SeaborgEvaluationData, 1);
	seaborg_evaluation_data_copy (self, dup);
	return dup;
}


void seaborg_evaluation_data_free (SeaborgEvaluationData* self) {
	seaborg_evaluation_data_destroy (self);
	g_free (self);
}


GType seaborg_evaluation_data_get_type (void) {
	static volatile gsize seaborg_evaluation_data_type_id__volatile = 0;
	if (g_once_init_enter (&seaborg_evaluation_data_type_id__volatile)) {
		GType seaborg_evaluation_data_type_id;
		seaborg_evaluation_data_type_id = g_boxed_type_register_static ("SeaborgEvaluationData", (GBoxedCopyFunc) seaborg_evaluation_data_dup, (GBoxedFreeFunc) seaborg_evaluation_data_free);
		g_once_init_leave (&seaborg_evaluation_data_type_id__volatile, seaborg_evaluation_data_type_id);
	}
	return seaborg_evaluation_data_type_id__volatile;
}


static Block1Data* block1_data_ref (Block1Data* _data1_) {
	g_atomic_int_inc (&_data1_->_ref_count_);
	return _data1_;
}


static void block1_data_unref (void * _userdata_) {
	Block1Data* _data1_;
	_data1_ = (Block1Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data1_->_ref_count_)) {
		_g_free0 (_data1_->string_to_write);
		g_slice_free (Block1Data, _data1_);
	}
}


static gboolean __lambda5_ (Block1Data* _data1_) {
	gboolean result = FALSE;
	GError * _inner_error_ = NULL;
	{
		gulong _tmp0_;
		_tmp0_ = seaborg_seaborg_application_global_stamp;
		g_rec_mutex_lock (&__lock_seaborg_seaborg_application_global_stamp);
		{
			gulong _tmp1_;
			gulong _tmp2_;
			SeaborgEvaluationCell* cell_to_write = NULL;
			void* _tmp6_;
			SeaborgEvaluationCell* _tmp7_;
			gulong _tmp17_;
			_tmp1_ = seaborg_seaborg_application_global_stamp;
			_tmp2_ = _data1_->_stamp;
			if (_tmp1_ != _tmp2_) {
				gulong _tmp3_;
				_tmp3_ = seaborg_seaborg_application_global_stamp;
				if (_tmp3_ == ((gulong) 0)) {
					result = FALSE;
					{
						gulong _tmp4_;
						_tmp4_ = seaborg_seaborg_application_global_stamp;
						g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
					}
					return result;
				}
				result = TRUE;
				{
					gulong _tmp5_;
					_tmp5_ = seaborg_seaborg_application_global_stamp;
					g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
				}
				return result;
			}
			_tmp6_ = _data1_->cell_ptr;
			cell_to_write = (SeaborgEvaluationCell*) _tmp6_;
			_tmp7_ = cell_to_write;
			if (_tmp7_ != NULL) {
				const gchar* _tmp8_;
				gint _tmp14_;
				_tmp8_ = _data1_->string_to_write;
				if (g_strcmp0 (_tmp8_, "") != 0) {
					SeaborgEvaluationCell* _tmp9_;
					const gchar* _tmp10_;
					gchar* _tmp11_;
					gchar* _tmp12_;
					SeaborgEvaluationCell* _tmp13_;
					_tmp9_ = cell_to_write;
					_tmp10_ = _data1_->string_to_write;
					_tmp11_ = g_strconcat ("\n", _tmp10_, NULL);
					_tmp12_ = _tmp11_;
					seaborg_evaluation_cell_add_text (_tmp9_, _tmp12_);
					_g_free0 (_tmp12_);
					_tmp13_ = cell_to_write;
					seaborg_icell_expand_all ((SeaborgICell*) _tmp13_);
				}
				_tmp14_ = _data1_->_break;
				if (_tmp14_ != 0) {
					SeaborgEvaluationCell* _tmp15_;
					_tmp15_ = cell_to_write;
					seaborg_icell_set_lock ((SeaborgICell*) _tmp15_, FALSE);
					seaborg_seaborg_application_global_stamp = (gulong) 0;
					result = FALSE;
					{
						gulong _tmp16_;
						_tmp16_ = seaborg_seaborg_application_global_stamp;
						g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
					}
					return result;
				}
			}
			_tmp17_ = seaborg_seaborg_application_global_stamp;
			seaborg_seaborg_application_global_stamp = _tmp17_ + 1;
			result = FALSE;
			{
				gulong _tmp18_;
				_tmp18_ = seaborg_seaborg_application_global_stamp;
				g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
			}
			return result;
		}
		__finally0:
		{
			gulong _tmp19_;
			_tmp19_ = seaborg_seaborg_application_global_stamp;
			g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
		}
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			gboolean _tmp20_ = FALSE;
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return _tmp20_;
		}
	}
}


static gboolean ___lambda5__gsource_func (gpointer self) {
	gboolean result;
	result = __lambda5_ (self);
	return result;
}


static void _seaborg_seaborg_application_write_to_evaluation_cell_lambda4_ (gchar* _string_to_write, void* cell_ptr, gulong _stamp, gint _break) {
	Block1Data* _data1_;
	void* _tmp0_;
	gulong _tmp1_;
	gint _tmp2_;
	gchar* _tmp3_;
	_data1_ = g_slice_new0 (Block1Data);
	_data1_->_ref_count_ = 1;
	_tmp0_ = cell_ptr;
	_data1_->cell_ptr = _tmp0_;
	_tmp1_ = _stamp;
	_data1_->_stamp = _tmp1_;
	_tmp2_ = _break;
	_data1_->_break = _tmp2_;
	_tmp3_ = _string_to_write;
	if (_tmp3_ == NULL) {
		gchar* _tmp4_;
		_tmp4_ = g_strdup ("");
		_g_free0 (_data1_->string_to_write);
		_data1_->string_to_write = _tmp4_;
	} else {
		gchar* _tmp5_;
		gchar* _tmp6_;
		_tmp5_ = _string_to_write;
		_tmp6_ = g_strdup ((const gchar*) _tmp5_);
		_g_free0 (_data1_->string_to_write);
		_data1_->string_to_write = _tmp6_;
	}
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ___lambda5__gsource_func, block1_data_ref (_data1_), block1_data_unref);
	block1_data_unref (_data1_);
	_data1_ = NULL;
	return;
}


static void __seaborg_seaborg_application_write_to_evaluation_cell_lambda4__seaborgseaborgapplicationcallback_str (gchar* string_to_write, void* callback_data, gulong stamp, gint break_after) {
	_seaborg_seaborg_application_write_to_evaluation_cell_lambda4_ (string_to_write, callback_data, stamp, break_after);
}


static Block2Data* block2_data_ref (Block2Data* _data2_) {
	g_atomic_int_inc (&_data2_->_ref_count_);
	return _data2_;
}


static void block2_data_unref (void * _userdata_) {
	Block2Data* _data2_;
	_data2_ = (Block2Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data2_->_ref_count_)) {
		g_slice_free (Block2Data, _data2_);
	}
}


static glong string_strnlen (gchar* str, glong maxlen) {
	glong result = 0L;
	gchar* end = NULL;
	gchar* _tmp0_;
	glong _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	_tmp0_ = str;
	_tmp1_ = maxlen;
	_tmp2_ = memchr (_tmp0_, 0, (gsize) _tmp1_);
	end = _tmp2_;
	_tmp3_ = end;
	if (_tmp3_ == NULL) {
		glong _tmp4_;
		_tmp4_ = maxlen;
		result = _tmp4_;
		return result;
	} else {
		gchar* _tmp5_;
		gchar* _tmp6_;
		_tmp5_ = end;
		_tmp6_ = str;
		result = (glong) (_tmp5_ - _tmp6_);
		return result;
	}
}


static gchar* string_substring (const gchar* self, glong offset, glong len) {
	gchar* result = NULL;
	glong string_length = 0L;
	gboolean _tmp0_ = FALSE;
	glong _tmp1_;
	glong _tmp8_;
	glong _tmp14_;
	glong _tmp17_;
	glong _tmp18_;
	glong _tmp19_;
	glong _tmp20_;
	glong _tmp21_;
	gchar* _tmp22_;
	g_return_val_if_fail (self != NULL, NULL);
	_tmp1_ = offset;
	if (_tmp1_ >= ((glong) 0)) {
		glong _tmp2_;
		_tmp2_ = len;
		_tmp0_ = _tmp2_ >= ((glong) 0);
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		glong _tmp3_;
		glong _tmp4_;
		glong _tmp5_;
		_tmp3_ = offset;
		_tmp4_ = len;
		_tmp5_ = string_strnlen ((gchar*) self, _tmp3_ + _tmp4_);
		string_length = _tmp5_;
	} else {
		gint _tmp6_;
		gint _tmp7_;
		_tmp6_ = strlen (self);
		_tmp7_ = _tmp6_;
		string_length = (glong) _tmp7_;
	}
	_tmp8_ = offset;
	if (_tmp8_ < ((glong) 0)) {
		glong _tmp9_;
		glong _tmp10_;
		glong _tmp11_;
		_tmp9_ = string_length;
		_tmp10_ = offset;
		offset = _tmp9_ + _tmp10_;
		_tmp11_ = offset;
		g_return_val_if_fail (_tmp11_ >= ((glong) 0), NULL);
	} else {
		glong _tmp12_;
		glong _tmp13_;
		_tmp12_ = offset;
		_tmp13_ = string_length;
		g_return_val_if_fail (_tmp12_ <= _tmp13_, NULL);
	}
	_tmp14_ = len;
	if (_tmp14_ < ((glong) 0)) {
		glong _tmp15_;
		glong _tmp16_;
		_tmp15_ = string_length;
		_tmp16_ = offset;
		len = _tmp15_ - _tmp16_;
	}
	_tmp17_ = offset;
	_tmp18_ = len;
	_tmp19_ = string_length;
	g_return_val_if_fail ((_tmp17_ + _tmp18_) <= _tmp19_, NULL);
	_tmp20_ = offset;
	_tmp21_ = len;
	_tmp22_ = g_strndup (((gchar*) self) + _tmp20_, (gsize) _tmp21_);
	result = _tmp22_;
	return result;
}


static gboolean __lambda15_ (Block2Data* _data2_) {
	gboolean result = FALSE;
	GError * _inner_error_ = NULL;
	{
		gulong _tmp0_;
		_tmp0_ = seaborg_seaborg_application_global_stamp;
		g_rec_mutex_lock (&__lock_seaborg_seaborg_application_global_stamp);
		{
			gulong _tmp1_;
			gulong _tmp2_;
			gint _tmp6_;
			gulong _tmp34_;
			_tmp1_ = seaborg_seaborg_application_global_stamp;
			_tmp2_ = _data2_->_stamp;
			if (_tmp1_ != _tmp2_) {
				gulong _tmp3_;
				_tmp3_ = seaborg_seaborg_application_global_stamp;
				if (_tmp3_ == ((gulong) 0)) {
					result = FALSE;
					{
						gulong _tmp4_;
						_tmp4_ = seaborg_seaborg_application_global_stamp;
						g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
					}
					return result;
				}
				result = TRUE;
				{
					gulong _tmp5_;
					_tmp5_ = seaborg_seaborg_application_global_stamp;
					g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
				}
				return result;
			}
			_tmp6_ = _data2_->_break;
			if (_tmp6_ != 0) {
				gchar* string_to_write = NULL;
				gchar* _tmp7_;
				gchar* _tmp8_;
				SeaborgEvaluationData* data = NULL;
				void* _tmp9_;
				gboolean _tmp10_ = FALSE;
				const gchar* _tmp11_;
				gboolean _tmp14_ = FALSE;
				SeaborgEvaluationData* _tmp15_;
				void* _tmp16_;
				SeaborgSeaborgApplication* app = NULL;
				SeaborgEvaluationData* _tmp20_;
				void* _tmp21_;
				SeaborgSeaborgApplication* _tmp22_;
				const gchar* _tmp24_;
				gchar* _tmp25_;
				gchar* _tmp26_;
				gboolean _tmp27_;
				SeaborgSeaborgApplication* _tmp29_;
				const gchar* _tmp30_;
				SeaborgEvaluationData* _tmp31_;
				const gchar* _tmp32_;
				_tmp7_ = _data2_->_string_to_write;
				_tmp8_ = g_strdup ((const gchar*) _tmp7_);
				string_to_write = _tmp8_;
				_tmp9_ = _data2_->data_ptr;
				data = (SeaborgEvaluationData*) _tmp9_;
				_tmp11_ = string_to_write;
				if (_tmp11_ == NULL) {
					_tmp10_ = TRUE;
				} else {
					SeaborgEvaluationData* _tmp12_;
					_tmp12_ = data;
					_tmp10_ = _tmp12_ == NULL;
				}
				if (_tmp10_) {
					result = FALSE;
					_g_free0 (string_to_write);
					{
						gulong _tmp13_;
						_tmp13_ = seaborg_seaborg_application_global_stamp;
						g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
					}
					return result;
				}
				_tmp15_ = data;
				_tmp16_ = (*_tmp15_).cell;
				if (_tmp16_ == NULL) {
					_tmp14_ = TRUE;
				} else {
					SeaborgEvaluationData* _tmp17_;
					const gchar* _tmp18_;
					_tmp17_ = data;
					_tmp18_ = (*_tmp17_).input;
					_tmp14_ = _tmp18_ == NULL;
				}
				if (_tmp14_) {
					result = FALSE;
					_g_free0 (string_to_write);
					{
						gulong _tmp19_;
						_tmp19_ = seaborg_seaborg_application_global_stamp;
						g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
					}
					return result;
				}
				_tmp20_ = data;
				_tmp21_ = (*_tmp20_).cell;
				app = (SeaborgSeaborgApplication*) _tmp21_;
				_tmp22_ = app;
				if (_tmp22_ == NULL) {
					result = FALSE;
					_g_free0 (string_to_write);
					{
						gulong _tmp23_;
						_tmp23_ = seaborg_seaborg_application_global_stamp;
						g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
					}
					return result;
				}
				_tmp24_ = string_to_write;
				_tmp25_ = string_substring (_tmp24_, (glong) 0, (glong) 5);
				_tmp26_ = _tmp25_;
				_tmp27_ = g_strcmp0 (_tmp26_, "<?xml") != 0;
				_g_free0 (_tmp26_);
				if (_tmp27_) {
					SeaborgSeaborgApplication* _tmp28_;
					_tmp28_ = app;
					seaborg_seaborg_application_kernel_msg (_tmp28_, "Error importing notebook");
				}
				_tmp29_ = app;
				_tmp30_ = string_to_write;
				_tmp31_ = data;
				_tmp32_ = (*_tmp31_).input;
				seaborg_seaborg_application_import_notebook (_tmp29_, _tmp30_, _tmp32_);
				seaborg_seaborg_application_global_stamp = (gulong) 0;
				result = FALSE;
				_g_free0 (string_to_write);
				{
					gulong _tmp33_;
					_tmp33_ = seaborg_seaborg_application_global_stamp;
					g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
				}
				return result;
			}
			_tmp34_ = seaborg_seaborg_application_global_stamp;
			seaborg_seaborg_application_global_stamp = _tmp34_ + 1;
			result = FALSE;
			{
				gulong _tmp35_;
				_tmp35_ = seaborg_seaborg_application_global_stamp;
				g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
			}
			return result;
		}
		__finally1:
		{
			gulong _tmp36_;
			_tmp36_ = seaborg_seaborg_application_global_stamp;
			g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
		}
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			gboolean _tmp37_ = FALSE;
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return _tmp37_;
		}
	}
}


static gboolean ___lambda15__gsource_func (gpointer self) {
	gboolean result;
	result = __lambda15_ (self);
	return result;
}


static void _seaborg_seaborg_application_receive_notebook_xml_lambda14_ (gchar* _string_to_write, void* data_ptr, gulong _stamp, gint _break) {
	Block2Data* _data2_;
	gchar* _tmp0_;
	void* _tmp1_;
	gulong _tmp2_;
	gint _tmp3_;
	_data2_ = g_slice_new0 (Block2Data);
	_data2_->_ref_count_ = 1;
	_tmp0_ = _string_to_write;
	_data2_->_string_to_write = _tmp0_;
	_tmp1_ = data_ptr;
	_data2_->data_ptr = _tmp1_;
	_tmp2_ = _stamp;
	_data2_->_stamp = _tmp2_;
	_tmp3_ = _break;
	_data2_->_break = _tmp3_;
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ___lambda15__gsource_func, block2_data_ref (_data2_), block2_data_unref);
	block2_data_unref (_data2_);
	_data2_ = NULL;
	return;
}


static void __seaborg_seaborg_application_receive_notebook_xml_lambda14__seaborgseaborgapplicationcallback_str (gchar* string_to_write, void* callback_data, gulong stamp, gint break_after) {
	_seaborg_seaborg_application_receive_notebook_xml_lambda14_ (string_to_write, callback_data, stamp, break_after);
}


static Block3Data* block3_data_ref (Block3Data* _data3_) {
	g_atomic_int_inc (&_data3_->_ref_count_);
	return _data3_;
}


static void block3_data_unref (void * _userdata_) {
	Block3Data* _data3_;
	_data3_ = (Block3Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data3_->_ref_count_)) {
		g_slice_free (Block3Data, _data3_);
	}
}


static gboolean __lambda18_ (Block3Data* _data3_) {
	gboolean result = FALSE;
	GError * _inner_error_ = NULL;
	{
		gulong _tmp0_;
		_tmp0_ = seaborg_seaborg_application_global_stamp;
		g_rec_mutex_lock (&__lock_seaborg_seaborg_application_global_stamp);
		{
			gulong _tmp1_;
			gulong _tmp2_;
			gint _tmp6_;
			gulong _tmp29_;
			_tmp1_ = seaborg_seaborg_application_global_stamp;
			_tmp2_ = _data3_->_stamp;
			if (_tmp1_ != _tmp2_) {
				gulong _tmp3_;
				_tmp3_ = seaborg_seaborg_application_global_stamp;
				if (_tmp3_ == ((gulong) 0)) {
					result = FALSE;
					{
						gulong _tmp4_;
						_tmp4_ = seaborg_seaborg_application_global_stamp;
						g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
					}
					return result;
				}
				result = TRUE;
				{
					gulong _tmp5_;
					_tmp5_ = seaborg_seaborg_application_global_stamp;
					g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
				}
				return result;
			}
			_tmp6_ = _data3_->_break;
			if (_tmp6_ != 0) {
				gchar* string_to_write = NULL;
				gchar* _tmp7_;
				gchar* _tmp8_;
				SeaborgEvaluationData* data = NULL;
				void* _tmp9_;
				gboolean _tmp10_ = FALSE;
				const gchar* _tmp11_;
				gboolean _tmp14_ = FALSE;
				SeaborgEvaluationData* _tmp15_;
				void* _tmp16_;
				SeaborgSeaborgApplication* app = NULL;
				SeaborgEvaluationData* _tmp20_;
				void* _tmp21_;
				SeaborgSeaborgApplication* _tmp22_;
				const gchar* _tmp24_;
				SeaborgEvaluationData* _tmp25_;
				const gchar* _tmp26_;
				_tmp7_ = _data3_->_string_to_write;
				_tmp8_ = g_strdup ((const gchar*) _tmp7_);
				string_to_write = _tmp8_;
				_tmp9_ = _data3_->data_ptr;
				data = (SeaborgEvaluationData*) _tmp9_;
				_tmp11_ = string_to_write;
				if (_tmp11_ == NULL) {
					_tmp10_ = TRUE;
				} else {
					SeaborgEvaluationData* _tmp12_;
					_tmp12_ = data;
					_tmp10_ = _tmp12_ == NULL;
				}
				if (_tmp10_) {
					result = FALSE;
					_g_free0 (string_to_write);
					{
						gulong _tmp13_;
						_tmp13_ = seaborg_seaborg_application_global_stamp;
						g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
					}
					return result;
				}
				_tmp15_ = data;
				_tmp16_ = (*_tmp15_).cell;
				if (_tmp16_ == NULL) {
					_tmp14_ = TRUE;
				} else {
					SeaborgEvaluationData* _tmp17_;
					const gchar* _tmp18_;
					_tmp17_ = data;
					_tmp18_ = (*_tmp17_).input;
					_tmp14_ = _tmp18_ == NULL;
				}
				if (_tmp14_) {
					result = FALSE;
					_g_free0 (string_to_write);
					{
						gulong _tmp19_;
						_tmp19_ = seaborg_seaborg_application_global_stamp;
						g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
					}
					return result;
				}
				_tmp20_ = data;
				_tmp21_ = (*_tmp20_).cell;
				app = (SeaborgSeaborgApplication*) _tmp21_;
				_tmp22_ = app;
				if (_tmp22_ == NULL) {
					result = FALSE;
					_g_free0 (string_to_write);
					{
						gulong _tmp23_;
						_tmp23_ = seaborg_seaborg_application_global_stamp;
						g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
					}
					return result;
				}
				_tmp24_ = string_to_write;
				_tmp25_ = data;
				_tmp26_ = (*_tmp25_).input;
				if (g_strcmp0 (_tmp24_, _tmp26_) != 0) {
					SeaborgSeaborgApplication* _tmp27_;
					_tmp27_ = app;
					seaborg_seaborg_application_kernel_msg (_tmp27_, "Error exporting notebook");
				}
				seaborg_seaborg_application_global_stamp = (gulong) 0;
				result = FALSE;
				_g_free0 (string_to_write);
				{
					gulong _tmp28_;
					_tmp28_ = seaborg_seaborg_application_global_stamp;
					g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
				}
				return result;
			}
			_tmp29_ = seaborg_seaborg_application_global_stamp;
			seaborg_seaborg_application_global_stamp = _tmp29_ + 1;
			result = FALSE;
			{
				gulong _tmp30_;
				_tmp30_ = seaborg_seaborg_application_global_stamp;
				g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
			}
			return result;
		}
		__finally2:
		{
			gulong _tmp31_;
			_tmp31_ = seaborg_seaborg_application_global_stamp;
			g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
		}
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			gboolean _tmp32_ = FALSE;
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return _tmp32_;
		}
	}
}


static gboolean ___lambda18__gsource_func (gpointer self) {
	gboolean result;
	result = __lambda18_ (self);
	return result;
}


static void _seaborg_seaborg_application_export_notebook_callback_lambda17_ (gchar* _string_to_write, void* data_ptr, gulong _stamp, gint _break) {
	Block3Data* _data3_;
	gchar* _tmp0_;
	void* _tmp1_;
	gulong _tmp2_;
	gint _tmp3_;
	_data3_ = g_slice_new0 (Block3Data);
	_data3_->_ref_count_ = 1;
	_tmp0_ = _string_to_write;
	_data3_->_string_to_write = _tmp0_;
	_tmp1_ = data_ptr;
	_data3_->data_ptr = _tmp1_;
	_tmp2_ = _stamp;
	_data3_->_stamp = _tmp2_;
	_tmp3_ = _break;
	_data3_->_break = _tmp3_;
	g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, ___lambda18__gsource_func, block3_data_ref (_data3_), block3_data_unref);
	block3_data_unref (_data3_);
	_data3_ = NULL;
	return;
}


static void __seaborg_seaborg_application_export_notebook_callback_lambda17__seaborgseaborgapplicationcallback_str (gchar* string_to_write, void* callback_data, gulong stamp, gint break_after) {
	_seaborg_seaborg_application_export_notebook_callback_lambda17_ (string_to_write, callback_data, stamp, break_after);
}


static void _seaborg_evaluation_data_free0_ (gpointer var) {
	(var == NULL) ? NULL : (var = (seaborg_evaluation_data_free (var), NULL));
}


static void _g_queue_free__seaborg_evaluation_data_free0_ (GQueue* self) {
	g_queue_foreach (self, (GFunc) _seaborg_evaluation_data_free0_, NULL);
	g_queue_free (self);
}


static gpointer _g_object_ref0 (gpointer self) {
	return self ? g_object_ref (self) : NULL;
}


static void seaborg_seaborg_application_real_activate (GApplication* base) {
	SeaborgSeaborgApplication * self;
	GtkApplicationWindow* _tmp0_;
	GtkHeaderBar* _tmp1_;
	GtkStackSwitcher* _tmp2_;
	GtkStack* _tmp3_;
	GtkScrolledWindow* _tmp4_;
	gchar* shortcut_builder_string = NULL;
	gchar* _tmp5_;
	GtkBuilder* shortcut_builder = NULL;
	gint _tmp6_;
	gint _tmp7_;
	GtkBuilder* _tmp8_;
	GObject* _tmp9_;
	GtkShortcutsWindow* _tmp10_;
	GtkStackSwitcher* _tmp11_;
	GtkStack* _tmp12_;
	GtkHeaderBar* _tmp13_;
	GtkHeaderBar* _tmp14_;
	GtkStackSwitcher* _tmp15_;
	GtkScrolledWindow* _tmp16_;
	GtkStack* _tmp17_;
	GtkApplicationWindow* _tmp18_;
	GtkApplicationWindow* _tmp19_;
	GtkHeaderBar* _tmp20_;
	GtkApplicationWindow* _tmp21_;
	GtkScrolledWindow* _tmp22_;
	GtkApplicationWindow* _tmp23_;
	GtkShortcutsWindow* _tmp24_;
	GtkApplicationWindow* _tmp25_;
	GtkApplicationWindow* _tmp26_;
	GtkApplicationWindow* _tmp27_;
	self = (SeaborgSeaborgApplication*) base;
	g_application_set_resource_base_path ((GApplication*) self, "/tst/seaborg/./res/");
	seaborg_id_generator_reset ();
	_tmp0_ = (GtkApplicationWindow*) gtk_application_window_new ((GtkApplication*) self);
	g_object_ref_sink (_tmp0_);
	_g_object_unref0 (self->priv->main_window);
	self->priv->main_window = _tmp0_;
	_tmp1_ = (GtkHeaderBar*) gtk_header_bar_new ();
	g_object_ref_sink (_tmp1_);
	_g_object_unref0 (self->priv->main_headerbar);
	self->priv->main_headerbar = _tmp1_;
	_tmp2_ = (GtkStackSwitcher*) gtk_stack_switcher_new ();
	g_object_ref_sink (_tmp2_);
	_g_object_unref0 (self->priv->tab_switcher);
	self->priv->tab_switcher = _tmp2_;
	_tmp3_ = (GtkStack*) gtk_stack_new ();
	g_object_ref_sink (_tmp3_);
	_g_object_unref0 (self->priv->notebook_stack);
	self->priv->notebook_stack = _tmp3_;
	_tmp4_ = (GtkScrolledWindow*) gtk_scrolled_window_new (NULL, NULL);
	g_object_ref_sink (_tmp4_);
	_g_object_unref0 (self->priv->notebook_scroll);
	self->priv->notebook_scroll = _tmp4_;
	_tmp5_ = g_strdup ("<?xml version=\"1.0\" encoding=\"UTF-8\"?>" "<interface>" "<object class=\"GtkShortcutsWindow\" id=\"shortcuts\">" "<property name=\"modal\">1</property>" "<child>" "<object class=\"GtkShortcutsSection\">" "<property name=\"visible\">1</property>" "<property name=\"section-name\">shortcuts</property>" "<property name=\"max-height\">12</property>" "<child>" "<object class=\"GtkShortcutsGroup\">" "<property name=\"visible\">1</property>" "<property name=\"title\" translatable=\"yes\">Window</property>" "<child>" "<object class=\"GtkShortcutsShortcut\">" "<property name=\"visible\">1</property>" "<property name=\"accelerator\">&lt;ctrl&gt;N</property>" "<property name=\"title\" translatable=\"yes\">Create new notebook</pro" \
"perty>" "</object>" "</child>" "<child>" "<object class=\"GtkShortcutsShortcut\">" "<property name=\"visible\">1</property>" "<property name=\"accelerator\">&lt;ctrl&gt;O</property>" "<property name=\"title\" translatable=\"yes\">Open a notebook</propert" \
"y>" "</object>" "</child>" "<child>" "<object class=\"GtkShortcutsShortcut\">" "<property name=\"visible\">1</property>" "<property name=\"accelerator\">&lt;ctrl&gt;S</property>" "<property name=\"title\" translatable=\"yes\">Quicksave the notebook</" \
"property>" "</object>" "</child>" "<child>" "<object class=\"GtkShortcutsShortcut\">" "<property name=\"visible\">1</property>" "<property name=\"accelerator\">&lt;ctrl&gt;&lt;alt&gt;S</property>" "<property name=\"title\" translatable=\"yes\">Save the notebook</prope" \
"rty>" "</object>" "</child>" "<child>" "<object class=\"GtkShortcutsShortcut\">" "<property name=\"visible\">1</property>" "<property name=\"accelerator\">&lt;ctrl&gt;I</property>" "<property name=\"title\" translatable=\"yes\">Import Mathematica noteb" \
"ook</property>" "</object>" "</child>" "<child>" "<object class=\"GtkShortcutsShortcut\">" "<property name=\"visible\">1</property>" "<property name=\"accelerator\">&lt;ctrl&gt;E</property>" "<property name=\"title\" translatable=\"yes\">Export Mathematica noteb" \
"ook</property>" "</object>" "</child>" "<child>" "<object class=\"GtkShortcutsShortcut\">" "<property name=\"visible\">1</property>" "<property name=\"accelerator\">&lt;Primary&gt;question &lt;Primary&gt;" \
"F1</property>" "<property name=\"title\" translatable=\"yes\">Show shortcuts</property" \
">" "</object>" "</child>" "<child>" "<object class=\"GtkShortcutsShortcut\">" "<property name=\"visible\">1</property>" "<property name=\"accelerator\">&lt;ctrl&gt;W</property>" "<property name=\"title\" translatable=\"yes\">Close Notebook</property" \
">" "</object>" "</child>" "<child>" "<object class=\"GtkShortcutsShortcut\">" "<property name=\"visible\">1</property>" "<property name=\"accelerator\">&lt;ctrl&gt;Q</property>" "<property name=\"title\" translatable=\"yes\">Quit App</property>" "</object>" "</child>" "</object>" "</child>" "<child>" "<object class=\"GtkShortcutsGroup\">" "<property name=\"visible\">1</property>" "<property name=\"title\" translatable=\"yes\">Cells</property>" "<child>" "<object class=\"GtkShortcutsShortcut\">" "<property name=\"visible\">1</property>" "<property name=\"accelerator\">&lt;ctrl&gt;D &lt;ctrl&gt;Delete</prope" \
"rty>" "<property name=\"title\" translatable=\"yes\">Delete selected cells</p" \
"roperty>" "</object>" "</child>" "<child>" "<object class=\"GtkShortcutsShortcut\">" "<property name=\"visible\">1</property>" "<property name=\"accelerator\">&lt;ctrl&gt;Return</property>" "<property name=\"title\" translatable=\"yes\">Evaluate cells</property" \
">" "</object>" "</child>" "<child>" "<object class=\"GtkShortcutsShortcut\">" "<property name=\"visible\">1</property>" "<property name=\"accelerator\">&lt;ctrl&gt;period</property>" "<property name=\"title\" translatable=\"yes\">Abort evaluation</proper" \
"ty>" "</object>" "</child>" "<child>" "<object class=\"GtkShortcutsShortcut\">" "<property name=\"visible\">1</property>" "<property name=\"accelerator\">&lt;ctrl&gt;y</property>" "<property name=\"title\" translatable=\"yes\">(Un)comment selected inp" \
"ut</property>" "</object>" "</child>" "</object>" "</child>" "</object>" "</child>" "</object>" "</interface>");
	shortcut_builder_string = _tmp5_;
	_tmp6_ = strlen (shortcut_builder_string);
	_tmp7_ = _tmp6_;
	_tmp8_ = gtk_builder_new_from_string (shortcut_builder_string, (gssize) _tmp7_);
	shortcut_builder = _tmp8_;
	_tmp9_ = gtk_builder_get_object (shortcut_builder, "shortcuts");
	_tmp10_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_TYPE (_tmp9_, GTK_TYPE_SHORTCUTS_WINDOW) ? ((GtkShortcutsWindow*) _tmp9_) : NULL);
	_g_object_unref0 (self->priv->shortcuts);
	self->priv->shortcuts = _tmp10_;
	_tmp11_ = self->priv->tab_switcher;
	_tmp12_ = self->priv->notebook_stack;
	gtk_stack_switcher_set_stack (_tmp11_, _tmp12_);
	_tmp13_ = self->priv->main_headerbar;
	gtk_header_bar_set_show_close_button (_tmp13_, TRUE);
	_tmp14_ = self->priv->main_headerbar;
	_tmp15_ = self->priv->tab_switcher;
	gtk_header_bar_set_custom_title (_tmp14_, (GtkWidget*) _tmp15_);
	_tmp16_ = self->priv->notebook_scroll;
	_tmp17_ = self->priv->notebook_stack;
	gtk_container_add ((GtkContainer*) _tmp16_, (GtkWidget*) _tmp17_);
	_tmp18_ = self->priv->main_window;
	gtk_window_set_title ((GtkWindow*) _tmp18_, "Gtk Notebook");
	_tmp19_ = self->priv->main_window;
	_tmp20_ = self->priv->main_headerbar;
	gtk_window_set_titlebar ((GtkWindow*) _tmp19_, (GtkWidget*) _tmp20_);
	_tmp21_ = self->priv->main_window;
	_tmp22_ = self->priv->notebook_scroll;
	gtk_container_add ((GtkContainer*) _tmp21_, (GtkWidget*) _tmp22_);
	_tmp23_ = self->priv->main_window;
	_tmp24_ = self->priv->shortcuts;
	gtk_application_window_set_help_overlay (_tmp23_, _tmp24_);
	_tmp25_ = self->priv->main_window;
	gtk_application_add_window ((GtkApplication*) self, (GtkWindow*) _tmp25_);
	_tmp26_ = self->priv->main_window;
	gtk_window_set_default_size ((GtkWindow*) _tmp26_, 800, 600);
	_tmp27_ = self->priv->main_window;
	gtk_widget_show_all ((GtkWidget*) _tmp27_);
	seaborg_seaborg_application_new_notebook (self);
	_g_object_unref0 (shortcut_builder);
	_g_free0 (shortcut_builder_string);
}


static void __lambda19_ (SeaborgSeaborgApplication* self) {
	seaborg_seaborg_application_new_notebook (self);
}


static void ___lambda19__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self) {
	__lambda19_ ((SeaborgSeaborgApplication*) self);
}


static void __lambda20_ (SeaborgSeaborgApplication* self) {
	seaborg_seaborg_application_load_dialog (self);
}


static void ___lambda20__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self) {
	__lambda20_ ((SeaborgSeaborgApplication*) self);
}


static void __lambda21_ (SeaborgSeaborgApplication* self) {
	GtkStack* _tmp0_;
	const gchar* _tmp1_;
	_tmp0_ = self->priv->notebook_stack;
	_tmp1_ = gtk_stack_get_visible_child_name (_tmp0_);
	if (g_strcmp0 (_tmp1_, "") == 0) {
		seaborg_seaborg_application_save_dialog (self);
	} else {
		GtkStack* _tmp2_;
		const gchar* _tmp3_;
		_tmp2_ = self->priv->notebook_stack;
		_tmp3_ = gtk_stack_get_visible_child_name (_tmp2_);
		seaborg_seaborg_application_save_notebook (self, _tmp3_);
	}
}


static void ___lambda21__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self) {
	__lambda21_ ((SeaborgSeaborgApplication*) self);
}


static void __lambda22_ (SeaborgSeaborgApplication* self) {
	seaborg_seaborg_application_save_dialog (self);
}


static void ___lambda22__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self) {
	__lambda22_ ((SeaborgSeaborgApplication*) self);
}


static void __lambda23_ (SeaborgSeaborgApplication* self) {
	seaborg_seaborg_application_import_dialog (self);
}


static void ___lambda23__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self) {
	__lambda23_ ((SeaborgSeaborgApplication*) self);
}


static void __lambda25_ (SeaborgSeaborgApplication* self) {
	seaborg_seaborg_application_export_dialog (self);
}


static void ___lambda25__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self) {
	__lambda25_ ((SeaborgSeaborgApplication*) self);
}


static void __lambda27_ (SeaborgSeaborgApplication* self) {
	g_application_quit ((GApplication*) self);
}


static void ___lambda27__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self) {
	__lambda27_ ((SeaborgSeaborgApplication*) self);
}


static void __lambda28_ (SeaborgSeaborgApplication* self) {
	SeaborgNotebook* nb = NULL;
	GtkStack* _tmp0_;
	GtkWidget* _tmp1_;
	GtkStack* _tmp2_;
	GtkStack* _tmp3_;
	GtkWidget* _tmp4_;
	_tmp0_ = self->priv->notebook_stack;
	_tmp1_ = gtk_stack_get_visible_child (_tmp0_);
	nb = (SeaborgNotebook*) _tmp1_;
	seaborg_icell_toggle_all ((SeaborgICell*) nb);
	seaborg_icell_remove_recursively ((SeaborgICell*) nb);
	_tmp2_ = self->priv->notebook_stack;
	_tmp3_ = self->priv->notebook_stack;
	_tmp4_ = gtk_stack_get_visible_child (_tmp3_);
	gtk_container_remove ((GtkContainer*) _tmp2_, _tmp4_);
	g_object_unref (nb);
}


static void ___lambda28__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self) {
	__lambda28_ ((SeaborgSeaborgApplication*) self);
}


static void __lambda29_ (SeaborgSeaborgApplication* self) {
	GtkStack* _tmp0_;
	GtkWidget* _tmp1_;
	_tmp0_ = self->priv->notebook_stack;
	_tmp1_ = gtk_stack_get_visible_child (_tmp0_);
	seaborg_icell_remove_recursively ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, SEABORG_TYPE_NOTEBOOK, SeaborgNotebook));
}


static void ___lambda29__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self) {
	__lambda29_ ((SeaborgSeaborgApplication*) self);
}


static void __lambda30_ (SeaborgSeaborgApplication* self) {
	GtkStack* _tmp0_;
	GtkWidget* _tmp1_;
	_tmp0_ = self->priv->notebook_stack;
	_tmp1_ = gtk_stack_get_visible_child (_tmp0_);
	seaborg_seaborg_application_schedule_evaluation (self, (SeaborgICellContainer*) G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, SEABORG_TYPE_NOTEBOOK, SeaborgNotebook));
}


static void ___lambda30__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self) {
	__lambda30_ ((SeaborgSeaborgApplication*) self);
}


static void __lambda34_ (SeaborgSeaborgApplication* self) {
	void* _tmp0_;
	_tmp0_ = self->priv->kernel_connection;
	try_abort (_tmp0_);
}


static void ___lambda34__g_simple_action_activate (GSimpleAction* _sender, GVariant* parameter, gpointer self) {
	__lambda34_ ((SeaborgSeaborgApplication*) self);
}


static void seaborg_seaborg_application_real_startup (GApplication* base) {
	SeaborgSeaborgApplication * self;
	GMenu* _tmp0_;
	GMenu* _tmp1_;
	GMenu* _tmp2_;
	GMenu* _tmp3_;
	GMenu* _tmp4_;
	GMenu* _tmp5_;
	GMenu* _tmp6_;
	GMenu* _tmp7_;
	GMenu* _tmp8_;
	GMenu* _tmp9_;
	GSimpleAction* new_action = NULL;
	GSimpleAction* _tmp10_;
	GSimpleAction* open_action = NULL;
	GSimpleAction* _tmp11_;
	GSimpleAction* save_action = NULL;
	GSimpleAction* _tmp12_;
	GSimpleAction* save_as_action = NULL;
	GSimpleAction* _tmp13_;
	GSimpleAction* import_action = NULL;
	GSimpleAction* _tmp14_;
	GSimpleAction* export_action = NULL;
	GSimpleAction* _tmp15_;
	GSimpleAction* remove_action = NULL;
	GSimpleAction* _tmp16_;
	GSimpleAction* quit_action = NULL;
	GSimpleAction* _tmp17_;
	GSimpleAction* eval_action = NULL;
	GSimpleAction* _tmp18_;
	GSimpleAction* stop_eval_action = NULL;
	GSimpleAction* _tmp19_;
	GSimpleAction* close_action = NULL;
	GSimpleAction* _tmp20_;
	static const gchar* new_accels[] = {"<Control>N", NULL};
	static const gchar* open_accels[] = {"<Control>O", NULL};
	static const gchar* save_accels[] = {"<Control>S", NULL};
	static const gchar* save_as_accels[] = {"<Control><Alt>S", NULL};
	static const gchar* import_accels[] = {"<Control>I", NULL};
	static const gchar* export_accels[] = {"<Control>E", NULL};
	static const gchar* rm_accels[] = {"<Control>Delete", "<Control>D", NULL};
	static const gchar* shortcut_accels[] = {"<Control>F1", "<Control>question", NULL};
	static const gchar* eval_accels[] = {"<Control>Return", NULL};
	static const gchar* stop_eval_accels[] = {"<Control>period", "<Control>S", NULL};
	static const gchar* close_accels[] = {"<Control>W", NULL};
	static const gchar* quit_accels[] = {"<Control>Q", NULL};
	GQueue* _tmp21_;
	self = (SeaborgSeaborgApplication*) base;
	G_APPLICATION_CLASS (seaborg_seaborg_application_parent_class)->startup ((GApplication*) G_TYPE_CHECK_INSTANCE_CAST (self, gtk_application_get_type (), GtkApplication));
	_tmp0_ = g_menu_new ();
	_g_object_unref0 (self->priv->main_menu);
	self->priv->main_menu = _tmp0_;
	_tmp1_ = self->priv->main_menu;
	g_menu_append (_tmp1_, "New", "app.new");
	_tmp2_ = self->priv->main_menu;
	g_menu_append (_tmp2_, "Open", "app.open");
	_tmp3_ = self->priv->main_menu;
	g_menu_append (_tmp3_, "Save", "app.save");
	_tmp4_ = self->priv->main_menu;
	g_menu_append (_tmp4_, "Save as", "app.saveas");
	_tmp5_ = self->priv->main_menu;
	g_menu_append (_tmp5_, "Import", "app.import");
	_tmp6_ = self->priv->main_menu;
	g_menu_append (_tmp6_, "Keyboard Shortcuts", "win.show-help-overlay");
	_tmp7_ = self->priv->main_menu;
	g_menu_append (_tmp7_, "Close Notebook", "app.close");
	_tmp8_ = self->priv->main_menu;
	g_menu_append (_tmp8_, "Quit", "app.quit");
	_tmp9_ = self->priv->main_menu;
	gtk_application_set_app_menu ((GtkApplication*) self, (GMenuModel*) _tmp9_);
	_tmp10_ = g_simple_action_new ("new", NULL);
	new_action = _tmp10_;
	_tmp11_ = g_simple_action_new ("open", NULL);
	open_action = _tmp11_;
	_tmp12_ = g_simple_action_new ("save", NULL);
	save_action = _tmp12_;
	_tmp13_ = g_simple_action_new ("saveas", NULL);
	save_as_action = _tmp13_;
	_tmp14_ = g_simple_action_new ("import", NULL);
	import_action = _tmp14_;
	_tmp15_ = g_simple_action_new ("export", NULL);
	export_action = _tmp15_;
	_tmp16_ = g_simple_action_new ("rm", NULL);
	remove_action = _tmp16_;
	_tmp17_ = g_simple_action_new ("quit", NULL);
	quit_action = _tmp17_;
	_tmp18_ = g_simple_action_new ("eval", NULL);
	eval_action = _tmp18_;
	_tmp19_ = g_simple_action_new ("stop", NULL);
	stop_eval_action = _tmp19_;
	_tmp20_ = g_simple_action_new ("close", NULL);
	close_action = _tmp20_;
	g_signal_connect_object (new_action, "activate", (GCallback) ___lambda19__g_simple_action_activate, self, 0);
	g_signal_connect_object (open_action, "activate", (GCallback) ___lambda20__g_simple_action_activate, self, 0);
	g_signal_connect_object (save_action, "activate", (GCallback) ___lambda21__g_simple_action_activate, self, 0);
	g_signal_connect_object (save_as_action, "activate", (GCallback) ___lambda22__g_simple_action_activate, self, 0);
	g_signal_connect_object (import_action, "activate", (GCallback) ___lambda23__g_simple_action_activate, self, 0);
	g_signal_connect_object (export_action, "activate", (GCallback) ___lambda25__g_simple_action_activate, self, 0);
	g_signal_connect_object (quit_action, "activate", (GCallback) ___lambda27__g_simple_action_activate, self, 0);
	g_signal_connect_object (close_action, "activate", (GCallback) ___lambda28__g_simple_action_activate, self, 0);
	g_signal_connect_object (remove_action, "activate", (GCallback) ___lambda29__g_simple_action_activate, self, 0);
	g_signal_connect_object (eval_action, "activate", (GCallback) ___lambda30__g_simple_action_activate, self, 0);
	g_signal_connect_object (stop_eval_action, "activate", (GCallback) ___lambda34__g_simple_action_activate, self, 0);
	g_action_map_add_action ((GActionMap*) self, (GAction*) new_action);
	g_action_map_add_action ((GActionMap*) self, (GAction*) open_action);
	g_action_map_add_action ((GActionMap*) self, (GAction*) save_action);
	g_action_map_add_action ((GActionMap*) self, (GAction*) save_as_action);
	g_action_map_add_action ((GActionMap*) self, (GAction*) import_action);
	g_action_map_add_action ((GActionMap*) self, (GAction*) export_action);
	g_action_map_add_action ((GActionMap*) self, (GAction*) remove_action);
	g_action_map_add_action ((GActionMap*) self, (GAction*) eval_action);
	g_action_map_add_action ((GActionMap*) self, (GAction*) stop_eval_action);
	g_action_map_add_action ((GActionMap*) self, (GAction*) quit_action);
	g_action_map_add_action ((GActionMap*) self, (GAction*) close_action);
	gtk_application_set_accels_for_action ((GtkApplication*) self, "app.new", new_accels);
	gtk_application_set_accels_for_action ((GtkApplication*) self, "app.open", open_accels);
	gtk_application_set_accels_for_action ((GtkApplication*) self, "app.save", save_accels);
	gtk_application_set_accels_for_action ((GtkApplication*) self, "app.saveas", save_as_accels);
	gtk_application_set_accels_for_action ((GtkApplication*) self, "app.import", import_accels);
	gtk_application_set_accels_for_action ((GtkApplication*) self, "app.export", export_accels);
	gtk_application_set_accels_for_action ((GtkApplication*) self, "app.rm", rm_accels);
	gtk_application_set_accels_for_action ((GtkApplication*) self, "app.close", close_accels);
	gtk_application_set_accels_for_action ((GtkApplication*) self, "app.quit", quit_accels);
	gtk_application_set_accels_for_action ((GtkApplication*) self, "win.show-help-overlay", shortcut_accels);
	gtk_application_set_accels_for_action ((GtkApplication*) self, "app.eval", eval_accels);
	gtk_application_set_accels_for_action ((GtkApplication*) self, "app.stop", stop_eval_accels);
	seaborg_seaborg_application_reset_kernel (self);
	_tmp21_ = g_queue_new ();
	__g_queue_free__seaborg_evaluation_data_free0_0 (self->priv->eval_queue);
	self->priv->eval_queue = _tmp21_;
	_g_object_unref0 (close_action);
	_g_object_unref0 (stop_eval_action);
	_g_object_unref0 (eval_action);
	_g_object_unref0 (quit_action);
	_g_object_unref0 (remove_action);
	_g_object_unref0 (export_action);
	_g_object_unref0 (import_action);
	_g_object_unref0 (save_as_action);
	_g_object_unref0 (save_action);
	_g_object_unref0 (open_action);
	_g_object_unref0 (new_action);
}


static gpointer _seaborg_evaluation_data_dup0 (gpointer self) {
	return self ? seaborg_evaluation_data_dup (self) : NULL;
}


void seaborg_seaborg_application_schedule_evaluation (SeaborgSeaborgApplication* self, SeaborgICellContainer* container) {
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	g_return_if_fail (container != NULL);
	{
		GQueue* _tmp0_;
		_tmp0_ = self->priv->eval_queue;
		g_rec_mutex_lock (&self->priv->__lock_eval_queue);
		{
			{
				gint i = 0;
				i = 0;
				{
					gboolean _tmp1_ = FALSE;
					_tmp1_ = TRUE;
					while (TRUE) {
						gint _tmp3_;
						SeaborgICellContainer* _tmp4_;
						GArray* _tmp5_;
						GArray* _tmp6_;
						gpointer* _tmp7_;
						gint _tmp7__length1;
						SeaborgICellContainer* _tmp8_;
						GArray* _tmp9_;
						GArray* _tmp10_;
						gpointer* _tmp11_;
						gint _tmp11__length1;
						gint _tmp12_;
						SeaborgICell* _tmp13_;
						gboolean _tmp20_ = FALSE;
						gboolean _tmp21_ = FALSE;
						SeaborgICellContainer* _tmp22_;
						GArray* _tmp23_;
						GArray* _tmp24_;
						gpointer* _tmp25_;
						gint _tmp25__length1;
						gint _tmp26_;
						SeaborgICell* _tmp27_;
						gboolean _tmp28_;
						if (!_tmp1_) {
							gint _tmp2_;
							_tmp2_ = i;
							i = _tmp2_ + 1;
						}
						_tmp1_ = FALSE;
						_tmp3_ = i;
						_tmp4_ = container;
						_tmp5_ = seaborg_icell_container_get_Children (_tmp4_);
						_tmp6_ = _tmp5_;
						_tmp7_ = _tmp6_->data;
						_tmp7__length1 = (gint) _tmp6_->len;
						if (!(_tmp3_ < _tmp7__length1)) {
							break;
						}
						_tmp8_ = container;
						_tmp9_ = seaborg_icell_container_get_Children (_tmp8_);
						_tmp10_ = _tmp9_;
						_tmp11_ = _tmp10_->data;
						_tmp11__length1 = (gint) _tmp10_->len;
						_tmp12_ = i;
						_tmp13_ = _tmp11_[_tmp12_];
						if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp13_, SEABORG_TYPE_ICELL_CONTAINER)) {
							SeaborgICellContainer* _tmp14_;
							GArray* _tmp15_;
							GArray* _tmp16_;
							gpointer* _tmp17_;
							gint _tmp17__length1;
							gint _tmp18_;
							SeaborgICell* _tmp19_;
							_tmp14_ = container;
							_tmp15_ = seaborg_icell_container_get_Children (_tmp14_);
							_tmp16_ = _tmp15_;
							_tmp17_ = _tmp16_->data;
							_tmp17__length1 = (gint) _tmp16_->len;
							_tmp18_ = i;
							_tmp19_ = _tmp17_[_tmp18_];
							seaborg_seaborg_application_schedule_evaluation (self, G_TYPE_CHECK_INSTANCE_CAST (_tmp19_, SEABORG_TYPE_ICELL_CONTAINER, SeaborgICellContainer));
						}
						_tmp22_ = container;
						_tmp23_ = seaborg_icell_container_get_Children (_tmp22_);
						_tmp24_ = _tmp23_;
						_tmp25_ = _tmp24_->data;
						_tmp25__length1 = (gint) _tmp24_->len;
						_tmp26_ = i;
						_tmp27_ = _tmp25_[_tmp26_];
						_tmp28_ = seaborg_icell_marker_selected (_tmp27_);
						if (_tmp28_) {
							SeaborgICellContainer* _tmp29_;
							GArray* _tmp30_;
							GArray* _tmp31_;
							gpointer* _tmp32_;
							gint _tmp32__length1;
							gint _tmp33_;
							SeaborgICell* _tmp34_;
							gboolean _tmp35_;
							gboolean _tmp36_;
							_tmp29_ = container;
							_tmp30_ = seaborg_icell_container_get_Children (_tmp29_);
							_tmp31_ = _tmp30_;
							_tmp32_ = _tmp31_->data;
							_tmp32__length1 = (gint) _tmp31_->len;
							_tmp33_ = i;
							_tmp34_ = _tmp32_[_tmp33_];
							_tmp35_ = seaborg_icell_get_lock (_tmp34_);
							_tmp36_ = _tmp35_;
							_tmp21_ = !_tmp36_;
						} else {
							_tmp21_ = FALSE;
						}
						if (_tmp21_) {
							SeaborgICellContainer* _tmp37_;
							GArray* _tmp38_;
							GArray* _tmp39_;
							gpointer* _tmp40_;
							gint _tmp40__length1;
							gint _tmp41_;
							SeaborgICell* _tmp42_;
							_tmp37_ = container;
							_tmp38_ = seaborg_icell_container_get_Children (_tmp37_);
							_tmp39_ = _tmp38_;
							_tmp40_ = _tmp39_->data;
							_tmp40__length1 = (gint) _tmp39_->len;
							_tmp41_ = i;
							_tmp42_ = _tmp40_[_tmp41_];
							_tmp20_ = G_TYPE_CHECK_INSTANCE_TYPE (_tmp42_, SEABORG_TYPE_EVALUATION_CELL);
						} else {
							_tmp20_ = FALSE;
						}
						if (_tmp20_) {
							SeaborgICellContainer* _tmp43_;
							GArray* _tmp44_;
							GArray* _tmp45_;
							gpointer* _tmp46_;
							gint _tmp46__length1;
							gint _tmp47_;
							SeaborgICell* _tmp48_;
							gchar* _tmp49_;
							gchar* _tmp50_;
							gboolean _tmp51_;
							gboolean _tmp52_;
							_tmp43_ = container;
							_tmp44_ = seaborg_icell_container_get_Children (_tmp43_);
							_tmp45_ = _tmp44_;
							_tmp46_ = _tmp45_->data;
							_tmp46__length1 = (gint) _tmp45_->len;
							_tmp47_ = i;
							_tmp48_ = _tmp46_[_tmp47_];
							_tmp49_ = seaborg_icell_get_text ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp48_, SEABORG_TYPE_EVALUATION_CELL, SeaborgEvaluationCell));
							_tmp50_ = _tmp49_;
							_tmp51_ = seaborg_check_input_packet (_tmp50_);
							_tmp52_ = _tmp51_;
							_g_free0 (_tmp50_);
							if (_tmp52_) {
								SeaborgICellContainer* _tmp53_;
								GArray* _tmp54_;
								GArray* _tmp55_;
								gpointer* _tmp56_;
								gint _tmp56__length1;
								gint _tmp57_;
								SeaborgICell* _tmp58_;
								SeaborgICellContainer* _tmp59_;
								GArray* _tmp60_;
								GArray* _tmp61_;
								gpointer* _tmp62_;
								gint _tmp62__length1;
								gint _tmp63_;
								SeaborgICell* _tmp64_;
								GQueue* _tmp65_;
								SeaborgICellContainer* _tmp66_;
								GArray* _tmp67_;
								GArray* _tmp68_;
								gpointer* _tmp69_;
								gint _tmp69__length1;
								gint _tmp70_;
								SeaborgICell* _tmp71_;
								SeaborgICellContainer* _tmp72_;
								GArray* _tmp73_;
								GArray* _tmp74_;
								gpointer* _tmp75_;
								gint _tmp75__length1;
								gint _tmp76_;
								SeaborgICell* _tmp77_;
								gchar* _tmp78_;
								gchar* _tmp79_;
								gchar* _tmp80_;
								gchar* _tmp81_;
								gchar* _tmp82_;
								gchar* _tmp83_;
								gchar* _tmp84_;
								SeaborgEvaluationData _tmp85_ = {0};
								SeaborgEvaluationData _tmp86_;
								SeaborgEvaluationData* _tmp87_;
								_tmp53_ = container;
								_tmp54_ = seaborg_icell_container_get_Children (_tmp53_);
								_tmp55_ = _tmp54_;
								_tmp56_ = _tmp55_->data;
								_tmp56__length1 = (gint) _tmp55_->len;
								_tmp57_ = i;
								_tmp58_ = _tmp56_[_tmp57_];
								seaborg_icell_set_lock ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp58_, SEABORG_TYPE_EVALUATION_CELL, SeaborgEvaluationCell), TRUE);
								_tmp59_ = container;
								_tmp60_ = seaborg_icell_container_get_Children (_tmp59_);
								_tmp61_ = _tmp60_;
								_tmp62_ = _tmp61_->data;
								_tmp62__length1 = (gint) _tmp61_->len;
								_tmp63_ = i;
								_tmp64_ = _tmp62_[_tmp63_];
								seaborg_evaluation_cell_remove_text (G_TYPE_CHECK_INSTANCE_CAST (_tmp64_, SEABORG_TYPE_EVALUATION_CELL, SeaborgEvaluationCell));
								_tmp65_ = self->priv->eval_queue;
								_tmp66_ = container;
								_tmp67_ = seaborg_icell_container_get_Children (_tmp66_);
								_tmp68_ = _tmp67_;
								_tmp69_ = _tmp68_->data;
								_tmp69__length1 = (gint) _tmp68_->len;
								_tmp70_ = i;
								_tmp71_ = _tmp69_[_tmp70_];
								_tmp72_ = container;
								_tmp73_ = seaborg_icell_container_get_Children (_tmp72_);
								_tmp74_ = _tmp73_;
								_tmp75_ = _tmp74_->data;
								_tmp75__length1 = (gint) _tmp74_->len;
								_tmp76_ = i;
								_tmp77_ = _tmp75_[_tmp76_];
								_tmp78_ = seaborg_icell_get_text ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp77_, SEABORG_TYPE_EVALUATION_CELL, SeaborgEvaluationCell));
								_tmp79_ = _tmp78_;
								_tmp80_ = seaborg_replace_characters (_tmp79_);
								_tmp81_ = _tmp80_;
								_tmp82_ = g_strconcat ("ToString[" SEABORG_PARAMETER_form "[", _tmp81_, NULL);
								_tmp83_ = _tmp82_;
								_tmp84_ = g_strconcat (_tmp83_, "]]", NULL);
								memset (&_tmp85_, 0, sizeof (SeaborgEvaluationData));
								_tmp85_.cell = (void*) _tmp71_;
								_g_free0 (_tmp85_.input);
								_tmp85_.input = _tmp84_;
								_tmp86_ = _tmp85_;
								_tmp87_ = _seaborg_evaluation_data_dup0 (&_tmp86_);
								g_queue_push_tail (_tmp65_, _tmp87_);
								seaborg_evaluation_data_destroy (&_tmp86_);
								_g_free0 (_tmp83_);
								_g_free0 (_tmp81_);
								_g_free0 (_tmp79_);
							}
						}
					}
				}
			}
		}
		__finally3:
		{
			GQueue* _tmp88_;
			_tmp88_ = self->priv->eval_queue;
			g_rec_mutex_unlock (&self->priv->__lock_eval_queue);
		}
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
	}
	seaborg_seaborg_application_start_evalutation_thread (self);
}


static gpointer _g_thread_ref0 (gpointer self) {
	return self ? g_thread_ref (self) : NULL;
}


static gboolean ____lambda32_ (SeaborgSeaborgApplication* self) {
	gboolean result = FALSE;
	seaborg_seaborg_application_abort_eval (self);
	result = FALSE;
	return result;
}


static gboolean _____lambda32__gsource_func (gpointer self) {
	gboolean result;
	result = ____lambda32_ ((SeaborgSeaborgApplication*) self);
	return result;
}


static gboolean ____lambda33_ (SeaborgSeaborgApplication* self) {
	gboolean result = FALSE;
	seaborg_seaborg_application_abort_eval (self);
	result = FALSE;
	return result;
}


static gboolean _____lambda33__gsource_func (gpointer self) {
	gboolean result;
	result = ____lambda33_ ((SeaborgSeaborgApplication*) self);
	return result;
}


static void* ___lambda31_ (SeaborgSeaborgApplication* self) {
	void* result = NULL;
	GError * _inner_error_ = NULL;
	self->priv->listener_thread_is_running = TRUE;
	seaborg_evaluation_data_destroy (&self->priv->current_cell);
	memset (&self->priv->current_cell, 0, sizeof (SeaborgEvaluationData));
	while (TRUE) {
		void* _tmp11_;
		gint _tmp12_;
		void* _tmp13_;
		SeaborgEvaluationData _tmp14_;
		const gchar* _tmp15_;
		SeaborgSeaborgApplicationcallback_str _tmp16_;
		SeaborgEvaluationData _tmp17_;
		void* _tmp18_;
		void* _tmp19_;
		gint _tmp20_;
		{
			GQueue* _tmp0_;
			_tmp0_ = self->priv->eval_queue;
			g_rec_mutex_lock (&self->priv->__lock_eval_queue);
			{
				GQueue* _tmp1_;
				guint _tmp2_;
				GQueue* _tmp4_;
				gpointer _tmp5_;
				SeaborgEvaluationData* _tmp6_;
				SeaborgEvaluationData _tmp7_ = {0};
				_tmp1_ = self->priv->eval_queue;
				_tmp2_ = _tmp1_->length;
				if (_tmp2_ <= ((guint) 0)) {
					{
						GQueue* _tmp3_;
						_tmp3_ = self->priv->eval_queue;
						g_rec_mutex_unlock (&self->priv->__lock_eval_queue);
					}
					break;
				}
				_tmp4_ = self->priv->eval_queue;
				_tmp5_ = g_queue_pop_head (_tmp4_);
				_tmp6_ = (SeaborgEvaluationData*) _tmp5_;
				seaborg_evaluation_data_copy (_tmp6_, &_tmp7_);
				seaborg_evaluation_data_destroy (&self->priv->current_cell);
				self->priv->current_cell = _tmp7_;
				_seaborg_evaluation_data_free0 (_tmp6_);
			}
			__finally4:
			{
				GQueue* _tmp8_;
				_tmp8_ = self->priv->eval_queue;
				g_rec_mutex_unlock (&self->priv->__lock_eval_queue);
			}
			if (G_UNLIKELY (_inner_error_ != NULL)) {
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return NULL;
			}
		}
		{
			gulong _tmp9_;
			_tmp9_ = seaborg_seaborg_application_global_stamp;
			g_rec_mutex_lock (&__lock_seaborg_seaborg_application_global_stamp);
			{
				seaborg_seaborg_application_global_stamp = (gulong) 1;
			}
			__finally5:
			{
				gulong _tmp10_;
				_tmp10_ = seaborg_seaborg_application_global_stamp;
				g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
			}
			if (G_UNLIKELY (_inner_error_ != NULL)) {
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return NULL;
			}
		}
		_tmp11_ = self->priv->kernel_connection;
		_tmp12_ = check_connection (_tmp11_);
		if (_tmp12_ != 1) {
			g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _____lambda32__gsource_func, g_object_ref (self), g_object_unref);
			result = NULL;
			return result;
		}
		_tmp13_ = self->priv->kernel_connection;
		_tmp14_ = self->priv->current_cell;
		_tmp15_ = _tmp14_.input;
		_tmp16_ = seaborg_seaborg_application_write_to_evaluation_cell;
		_tmp17_ = self->priv->current_cell;
		_tmp18_ = _tmp17_.cell;
		evaluate (_tmp13_, _tmp15_, _tmp16_, _tmp18_);
		_tmp19_ = self->priv->kernel_connection;
		_tmp20_ = check_connection (_tmp19_);
		if (_tmp20_ != 1) {
			g_idle_add_full (G_PRIORITY_DEFAULT_IDLE, _____lambda33__gsource_func, g_object_ref (self), g_object_unref);
			result = NULL;
			return result;
		}
		while (TRUE) {
			{
				gulong _tmp21_;
				_tmp21_ = seaborg_seaborg_application_global_stamp;
				g_rec_mutex_lock (&__lock_seaborg_seaborg_application_global_stamp);
				{
					gulong _tmp22_;
					_tmp22_ = seaborg_seaborg_application_global_stamp;
					if (_tmp22_ == ((gulong) 0)) {
						{
							gulong _tmp23_;
							_tmp23_ = seaborg_seaborg_application_global_stamp;
							g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
						}
						break;
					}
				}
				__finally6:
				{
					gulong _tmp24_;
					_tmp24_ = seaborg_seaborg_application_global_stamp;
					g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
				}
				if (G_UNLIKELY (_inner_error_ != NULL)) {
					g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
					g_clear_error (&_inner_error_);
					return NULL;
				}
			}
			g_usleep ((gulong) 200);
		}
	}
	self->priv->listener_thread_is_running = FALSE;
	result = NULL;
	return result;
}


static gpointer ____lambda31__gthread_func (gpointer self) {
	gpointer result;
	result = ___lambda31_ ((SeaborgSeaborgApplication*) self);
	g_object_unref (self);
	return result;
}


void seaborg_seaborg_application_start_evalutation_thread (SeaborgSeaborgApplication* self) {
	gboolean _tmp0_ = FALSE;
	GThread* _tmp1_;
	gboolean _tmp5_;
	g_return_if_fail (self != NULL);
	_tmp1_ = self->priv->listener_thread;
	if (_tmp1_ != NULL) {
		gboolean _tmp2_;
		_tmp2_ = self->priv->listener_thread_is_running;
		_tmp0_ = !_tmp2_;
	} else {
		_tmp0_ = FALSE;
	}
	if (_tmp0_) {
		GThread* _tmp3_;
		GThread* _tmp4_;
		_tmp3_ = self->priv->listener_thread;
		_tmp4_ = _g_thread_ref0 (_tmp3_);
		g_thread_join (_tmp4_);
	}
	_tmp5_ = self->priv->listener_thread_is_running;
	if (!_tmp5_) {
		GThread* _tmp6_;
		_tmp6_ = g_thread_new ("seaborg-listener", ____lambda31__gthread_func, g_object_ref (self));
		_g_thread_unref0 (self->priv->listener_thread);
		self->priv->listener_thread = _tmp6_;
	}
}


static void seaborg_seaborg_application_abort_eval (SeaborgSeaborgApplication* self) {
	SeaborgEvaluationCell* cell = NULL;
	SeaborgEvaluationData _tmp2_;
	void* _tmp3_;
	SeaborgEvaluationCell* _tmp4_;
	gint res = 0;
	void* _tmp16_;
	gint _tmp17_;
	gint _tmp18_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	{
		gulong _tmp0_;
		_tmp0_ = seaborg_seaborg_application_global_stamp;
		g_rec_mutex_lock (&__lock_seaborg_seaborg_application_global_stamp);
		{
			seaborg_seaborg_application_global_stamp = (gulong) 0;
		}
		__finally7:
		{
			gulong _tmp1_;
			_tmp1_ = seaborg_seaborg_application_global_stamp;
			g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
		}
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
	}
	_tmp2_ = self->priv->current_cell;
	_tmp3_ = _tmp2_.cell;
	cell = (SeaborgEvaluationCell*) _tmp3_;
	_tmp4_ = cell;
	if (_tmp4_ != NULL) {
		SeaborgEvaluationCell* _tmp5_;
		_tmp5_ = cell;
		seaborg_icell_set_lock ((SeaborgICell*) _tmp5_, FALSE);
	}
	{
		GQueue* _tmp6_;
		_tmp6_ = self->priv->eval_queue;
		g_rec_mutex_lock (&self->priv->__lock_eval_queue);
		{
			while (TRUE) {
				GQueue* _tmp7_;
				guint _tmp8_;
				GQueue* _tmp9_;
				gpointer _tmp10_;
				SeaborgEvaluationData* _tmp11_;
				void* _tmp12_;
				SeaborgEvaluationCell* _tmp13_;
				_tmp7_ = self->priv->eval_queue;
				_tmp8_ = _tmp7_->length;
				if (_tmp8_ <= ((guint) 0)) {
					break;
				}
				_tmp9_ = self->priv->eval_queue;
				_tmp10_ = g_queue_pop_head (_tmp9_);
				_tmp11_ = (SeaborgEvaluationData*) _tmp10_;
				_tmp12_ = (*_tmp11_).cell;
				cell = (SeaborgEvaluationCell*) _tmp12_;
				_seaborg_evaluation_data_free0 (_tmp11_);
				_tmp13_ = cell;
				if (_tmp13_ != NULL) {
					SeaborgEvaluationCell* _tmp14_;
					_tmp14_ = cell;
					seaborg_icell_set_lock ((SeaborgICell*) _tmp14_, FALSE);
				}
			}
		}
		__finally8:
		{
			GQueue* _tmp15_;
			_tmp15_ = self->priv->eval_queue;
			g_rec_mutex_unlock (&self->priv->__lock_eval_queue);
		}
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
	}
	_tmp16_ = self->priv->kernel_connection;
	_tmp17_ = check_connection (_tmp16_);
	res = _tmp17_;
	_tmp18_ = res;
	if (_tmp18_ != 1) {
		gint _tmp19_;
		_tmp19_ = res;
		if (_tmp19_ == 2) {
			void* _tmp20_;
			void* _tmp21_;
			gint _tmp22_;
			_tmp20_ = self->priv->kernel_connection;
			try_reset_after_abort (_tmp20_);
			_tmp21_ = self->priv->kernel_connection;
			_tmp22_ = check_connection (_tmp21_);
			if (_tmp22_ != 1) {
				seaborg_seaborg_application_kernel_msg (self, "Kernel connection lost");
			}
		} else {
			seaborg_seaborg_application_kernel_msg (self, "Kernel connection lost");
		}
	}
	self->priv->listener_thread_is_running = FALSE;
}


static void seaborg_seaborg_application_reset_kernel (SeaborgSeaborgApplication* self) {
	void* _tmp0_;
	void* _tmp4_;
	void* _tmp5_;
	gint _tmp6_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->kernel_connection;
	if (_tmp0_ != NULL) {
		void* _tmp1_;
		gint _tmp2_;
		_tmp1_ = self->priv->kernel_connection;
		_tmp2_ = check_connection (_tmp1_);
		if (_tmp2_ != -1) {
			void* _tmp3_;
			_tmp3_ = self->priv->kernel_connection;
			close_connection (_tmp3_);
		}
	}
	_tmp4_ = init_connection (SEABORG_PARAMETER_kernel_init);
	self->priv->kernel_connection = _tmp4_;
	_tmp5_ = self->priv->kernel_connection;
	_tmp6_ = check_connection (_tmp5_);
	if (_tmp6_ != 1) {
		seaborg_seaborg_application_kernel_msg (self, "Error resetting connection");
	}
}


void seaborg_seaborg_application_kernel_msg (SeaborgSeaborgApplication* self, const gchar* msg) {
	FILE* _tmp0_;
	const gchar* _tmp1_;
	gchar* _tmp2_;
	gchar* _tmp3_;
	gchar* _tmp4_;
	gchar* _tmp5_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (msg != NULL);
	_tmp0_ = stderr;
	_tmp1_ = msg;
	_tmp2_ = g_strconcat ("\n", _tmp1_, NULL);
	_tmp3_ = _tmp2_;
	_tmp4_ = g_strconcat (_tmp3_, "\n", NULL);
	_tmp5_ = _tmp4_;
	fprintf (_tmp0_, "%s", _tmp5_);
	_g_free0 (_tmp5_);
	_g_free0 (_tmp3_);
}


static void _g_free0_ (gpointer var) {
	var = (g_free (var), NULL);
}


static void _g_slist_free__g_free0_ (GSList* self) {
	g_slist_foreach (self, (GFunc) _g_free0_, NULL);
	g_slist_free (self);
}


static void seaborg_seaborg_application_save_dialog (SeaborgSeaborgApplication* self) {
	GtkFileChooserDialog* saver = NULL;
	GtkApplicationWindow* _tmp0_;
	GtkFileChooserDialog* _tmp1_;
	GtkFileChooserDialog* _tmp2_;
	GtkStack* _tmp3_;
	const gchar* _tmp4_;
	GtkFileChooserDialog* _tmp9_;
	gint _tmp10_;
	GtkFileChooserDialog* _tmp16_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->main_window;
	_tmp1_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new ("Save Notebook", (GtkWindow*) _tmp0_, GTK_FILE_CHOOSER_ACTION_SAVE, "_Cancel", GTK_RESPONSE_CANCEL, "_Save", GTK_RESPONSE_ACCEPT, NULL);
	g_object_ref_sink (_tmp1_);
	saver = _tmp1_;
	_tmp2_ = saver;
	gtk_file_chooser_set_select_multiple ((GtkFileChooser*) _tmp2_, FALSE);
	_tmp3_ = self->priv->notebook_stack;
	_tmp4_ = gtk_stack_get_visible_child_name (_tmp3_);
	if (g_strcmp0 (_tmp4_, "") == 0) {
		GtkFileChooserDialog* _tmp5_;
		_tmp5_ = saver;
		gtk_file_chooser_set_filename ((GtkFileChooser*) _tmp5_, "~/New notebook.xml");
	} else {
		GtkFileChooserDialog* _tmp6_;
		GtkStack* _tmp7_;
		const gchar* _tmp8_;
		_tmp6_ = saver;
		_tmp7_ = self->priv->notebook_stack;
		_tmp8_ = gtk_stack_get_visible_child_name (_tmp7_);
		gtk_file_chooser_set_filename ((GtkFileChooser*) _tmp6_, _tmp8_);
	}
	_tmp9_ = saver;
	_tmp10_ = gtk_dialog_run ((GtkDialog*) _tmp9_);
	if (_tmp10_ == ((gint) GTK_RESPONSE_ACCEPT)) {
		GSList* filenames = NULL;
		GtkFileChooserDialog* _tmp11_;
		GSList* _tmp12_;
		GSList* _tmp13_;
		_tmp11_ = saver;
		_tmp12_ = gtk_file_chooser_get_filenames ((GtkFileChooser*) _tmp11_);
		filenames = _tmp12_;
		_tmp13_ = filenames;
		{
			GSList* fn_collection = NULL;
			GSList* fn_it = NULL;
			fn_collection = _tmp13_;
			for (fn_it = fn_collection; fn_it != NULL; fn_it = fn_it->next) {
				gchar* _tmp14_;
				gchar* fn = NULL;
				_tmp14_ = g_strdup ((const gchar*) fn_it->data);
				fn = _tmp14_;
				{
					const gchar* _tmp15_;
					_tmp15_ = fn;
					seaborg_seaborg_application_save_notebook (self, _tmp15_);
					_g_free0 (fn);
				}
			}
		}
		__g_slist_free__g_free0_0 (filenames);
	}
	_tmp16_ = saver;
	g_signal_emit_by_name ((GtkDialog*) _tmp16_, "close");
	_g_object_unref0 (saver);
}


static void seaborg_seaborg_application_load_dialog (SeaborgSeaborgApplication* self) {
	GtkFileChooserDialog* loader = NULL;
	GtkApplicationWindow* _tmp0_;
	GtkFileChooserDialog* _tmp1_;
	GtkFileChooserDialog* _tmp2_;
	GtkFileChooserDialog* _tmp3_;
	GtkStack* _tmp4_;
	const gchar* _tmp5_;
	GtkFileChooserDialog* _tmp6_;
	gint _tmp7_;
	GtkFileChooserDialog* _tmp13_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->main_window;
	_tmp1_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new ("Load Notebooks", (GtkWindow*) _tmp0_, GTK_FILE_CHOOSER_ACTION_OPEN, "_Cancel", GTK_RESPONSE_CANCEL, "_Load", GTK_RESPONSE_ACCEPT, NULL);
	g_object_ref_sink (_tmp1_);
	loader = _tmp1_;
	_tmp2_ = loader;
	gtk_file_chooser_set_select_multiple ((GtkFileChooser*) _tmp2_, TRUE);
	_tmp3_ = loader;
	_tmp4_ = self->priv->notebook_stack;
	_tmp5_ = gtk_stack_get_visible_child_name (_tmp4_);
	gtk_file_chooser_set_filename ((GtkFileChooser*) _tmp3_, _tmp5_);
	_tmp6_ = loader;
	_tmp7_ = gtk_dialog_run ((GtkDialog*) _tmp6_);
	if (_tmp7_ == ((gint) GTK_RESPONSE_ACCEPT)) {
		GSList* filenames = NULL;
		GtkFileChooserDialog* _tmp8_;
		GSList* _tmp9_;
		GSList* _tmp10_;
		_tmp8_ = loader;
		_tmp9_ = gtk_file_chooser_get_filenames ((GtkFileChooser*) _tmp8_);
		filenames = _tmp9_;
		_tmp10_ = filenames;
		{
			GSList* fn_collection = NULL;
			GSList* fn_it = NULL;
			fn_collection = _tmp10_;
			for (fn_it = fn_collection; fn_it != NULL; fn_it = fn_it->next) {
				gchar* _tmp11_;
				gchar* fn = NULL;
				_tmp11_ = g_strdup ((const gchar*) fn_it->data);
				fn = _tmp11_;
				{
					const gchar* _tmp12_;
					_tmp12_ = fn;
					seaborg_seaborg_application_load_notebook (self, _tmp12_);
					_g_free0 (fn);
				}
			}
		}
		__g_slist_free__g_free0_0 (filenames);
	}
	_tmp13_ = loader;
	g_signal_emit_by_name ((GtkDialog*) _tmp13_, "close");
	_g_object_unref0 (loader);
}


static void seaborg_seaborg_application_import_dialog (SeaborgSeaborgApplication* self) {
	GtkFileChooserDialog* loader = NULL;
	GtkApplicationWindow* _tmp0_;
	GtkFileChooserDialog* _tmp1_;
	GtkFileChooserDialog* _tmp2_;
	GtkFileChooserDialog* _tmp3_;
	GtkStack* _tmp4_;
	const gchar* _tmp5_;
	GtkFileChooserDialog* _tmp6_;
	gint _tmp7_;
	GtkFileChooserDialog* _tmp13_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->main_window;
	_tmp1_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new ("Import Notebooks", (GtkWindow*) _tmp0_, GTK_FILE_CHOOSER_ACTION_OPEN, "_Cancel", GTK_RESPONSE_CANCEL, "_Load", GTK_RESPONSE_ACCEPT, NULL);
	g_object_ref_sink (_tmp1_);
	loader = _tmp1_;
	_tmp2_ = loader;
	gtk_file_chooser_set_select_multiple ((GtkFileChooser*) _tmp2_, FALSE);
	_tmp3_ = loader;
	_tmp4_ = self->priv->notebook_stack;
	_tmp5_ = gtk_stack_get_visible_child_name (_tmp4_);
	gtk_file_chooser_set_filename ((GtkFileChooser*) _tmp3_, _tmp5_);
	_tmp6_ = loader;
	_tmp7_ = gtk_dialog_run ((GtkDialog*) _tmp6_);
	if (_tmp7_ == ((gint) GTK_RESPONSE_ACCEPT)) {
		GSList* filenames = NULL;
		GtkFileChooserDialog* _tmp8_;
		GSList* _tmp9_;
		GSList* _tmp10_;
		_tmp8_ = loader;
		_tmp9_ = gtk_file_chooser_get_filenames ((GtkFileChooser*) _tmp8_);
		filenames = _tmp9_;
		_tmp10_ = filenames;
		{
			GSList* fn_collection = NULL;
			GSList* fn_it = NULL;
			fn_collection = _tmp10_;
			for (fn_it = fn_collection; fn_it != NULL; fn_it = fn_it->next) {
				gchar* _tmp11_;
				gchar* fn = NULL;
				_tmp11_ = g_strdup ((const gchar*) fn_it->data);
				fn = _tmp11_;
				{
					const gchar* _tmp12_;
					_tmp12_ = fn;
					seaborg_seaborg_application_process_for_import (self, _tmp12_);
					_g_free0 (fn);
				}
			}
		}
		__g_slist_free__g_free0_0 (filenames);
	}
	_tmp13_ = loader;
	g_signal_emit_by_name ((GtkDialog*) _tmp13_, "close");
	_g_object_unref0 (loader);
}


static void seaborg_seaborg_application_export_dialog (SeaborgSeaborgApplication* self) {
	GtkFileChooserDialog* saver = NULL;
	GtkApplicationWindow* _tmp0_;
	GtkFileChooserDialog* _tmp1_;
	GtkFileChooserDialog* _tmp2_;
	GtkStack* _tmp3_;
	const gchar* _tmp4_;
	GtkFileChooserDialog* _tmp11_;
	gint _tmp12_;
	GtkFileChooserDialog* _tmp18_;
	g_return_if_fail (self != NULL);
	_tmp0_ = self->priv->main_window;
	_tmp1_ = (GtkFileChooserDialog*) gtk_file_chooser_dialog_new ("Save Notebook", (GtkWindow*) _tmp0_, GTK_FILE_CHOOSER_ACTION_SAVE, "_Cancel", GTK_RESPONSE_CANCEL, "_Export", GTK_RESPONSE_ACCEPT, NULL);
	g_object_ref_sink (_tmp1_);
	saver = _tmp1_;
	_tmp2_ = saver;
	gtk_file_chooser_set_select_multiple ((GtkFileChooser*) _tmp2_, FALSE);
	_tmp3_ = self->priv->notebook_stack;
	_tmp4_ = gtk_stack_get_visible_child_name (_tmp3_);
	if (g_strcmp0 (_tmp4_, "") == 0) {
		GtkFileChooserDialog* _tmp5_;
		_tmp5_ = saver;
		gtk_file_chooser_set_filename ((GtkFileChooser*) _tmp5_, "~/New notebook.nb");
	} else {
		GtkFileChooserDialog* _tmp6_;
		GtkStack* _tmp7_;
		const gchar* _tmp8_;
		gchar* _tmp9_;
		gchar* _tmp10_;
		_tmp6_ = saver;
		_tmp7_ = self->priv->notebook_stack;
		_tmp8_ = gtk_stack_get_visible_child_name (_tmp7_);
		_tmp9_ = g_strconcat (_tmp8_, ".nb", NULL);
		_tmp10_ = _tmp9_;
		gtk_file_chooser_set_filename ((GtkFileChooser*) _tmp6_, _tmp10_);
		_g_free0 (_tmp10_);
	}
	_tmp11_ = saver;
	_tmp12_ = gtk_dialog_run ((GtkDialog*) _tmp11_);
	if (_tmp12_ == ((gint) GTK_RESPONSE_ACCEPT)) {
		GSList* filenames = NULL;
		GtkFileChooserDialog* _tmp13_;
		GSList* _tmp14_;
		GSList* _tmp15_;
		_tmp13_ = saver;
		_tmp14_ = gtk_file_chooser_get_filenames ((GtkFileChooser*) _tmp13_);
		filenames = _tmp14_;
		_tmp15_ = filenames;
		{
			GSList* fn_collection = NULL;
			GSList* fn_it = NULL;
			fn_collection = _tmp15_;
			for (fn_it = fn_collection; fn_it != NULL; fn_it = fn_it->next) {
				gchar* _tmp16_;
				gchar* fn = NULL;
				_tmp16_ = g_strdup ((const gchar*) fn_it->data);
				fn = _tmp16_;
				{
					const gchar* _tmp17_;
					_tmp17_ = fn;
					seaborg_seaborg_application_export_notebook (self, _tmp17_);
					_g_free0 (fn);
				}
			}
		}
		__g_slist_free__g_free0_0 (filenames);
	}
	_tmp18_ = saver;
	g_signal_emit_by_name ((GtkDialog*) _tmp18_, "close");
	_g_object_unref0 (saver);
}


void seaborg_seaborg_application_new_notebook (SeaborgSeaborgApplication* self) {
	SeaborgNotebook* notebook = NULL;
	SeaborgNotebook* _tmp0_;
	SeaborgEvaluationCell* cell = NULL;
	SeaborgEvaluationCell* _tmp1_;
	SeaborgICell* _tmp2_;
	SeaborgICell** _tmp3_;
	SeaborgICell** _tmp4_;
	gint _tmp4__length1;
	GtkStack* _tmp5_;
	GtkStack* _tmp6_;
	g_return_if_fail (self != NULL);
	_tmp0_ = seaborg_notebook_new ();
	g_object_ref_sink (_tmp0_);
	notebook = _tmp0_;
	_tmp1_ = seaborg_evaluation_cell_new (notebook);
	g_object_ref_sink (_tmp1_);
	cell = _tmp1_;
	_tmp2_ = _g_object_ref0 ((SeaborgICell*) cell);
	_tmp3_ = g_new0 (SeaborgICell*, 1 + 1);
	_tmp3_[0] = _tmp2_;
	_tmp4_ = _tmp3_;
	_tmp4__length1 = 1;
	seaborg_icell_add_before ((SeaborgICell*) notebook, 0, _tmp4_, 1);
	_tmp4_ = (_vala_array_free (_tmp4_, _tmp4__length1, (GDestroyNotify) g_object_unref), NULL);
	_tmp5_ = self->priv->notebook_stack;
	gtk_stack_add_titled (_tmp5_, (GtkWidget*) notebook, "", "New Notebook");
	_tmp6_ = self->priv->notebook_stack;
	gtk_stack_set_visible_child (_tmp6_, (GtkWidget*) notebook);
	_g_object_unref0 (notebook);
}


void seaborg_seaborg_application_save_notebook (SeaborgSeaborgApplication* self, const gchar* fn) {
	FILE* save_file = NULL;
	const gchar* _tmp0_;
	FILE* _tmp1_;
	FILE* _tmp2_;
	gchar* identation = NULL;
	gchar* _tmp6_;
	FILE* _tmp7_;
	FILE* _tmp25_;
	FILE* _tmp26_;
	GtkStack* _tmp27_;
	const gchar* _tmp28_;
	const gchar* _tmp29_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (fn != NULL);
	_tmp0_ = fn;
	_tmp1_ = g_fopen (_tmp0_, "w");
	save_file = _tmp1_;
	_tmp2_ = save_file;
	if (_tmp2_ == NULL) {
		const gchar* _tmp3_;
		gchar* _tmp4_;
		gchar* _tmp5_;
		_tmp3_ = fn;
		_tmp4_ = g_strconcat ("Error saving file: ", _tmp3_, NULL);
		_tmp5_ = _tmp4_;
		seaborg_seaborg_application_kernel_msg (self, _tmp5_);
		_g_free0 (_tmp5_);
		_fclose0 (save_file);
		return;
	}
	_tmp6_ = g_strdup ("	");
	identation = _tmp6_;
	_tmp7_ = save_file;
	fprintf (_tmp7_, "<?xml version=\"1.0\" encoding=\"utf-8\"?>\n" \
"\n" \
"<notebook version=\"1.0\">\n");
	{
		gint i = 0;
		i = 0;
		{
			gboolean _tmp8_ = FALSE;
			_tmp8_ = TRUE;
			while (TRUE) {
				gint _tmp10_;
				GtkStack* _tmp11_;
				GtkWidget* _tmp12_;
				GArray* _tmp13_;
				GArray* _tmp14_;
				gpointer* _tmp15_;
				gint _tmp15__length1;
				GtkStack* _tmp16_;
				GtkWidget* _tmp17_;
				GArray* _tmp18_;
				GArray* _tmp19_;
				gpointer* _tmp20_;
				gint _tmp20__length1;
				gint _tmp21_;
				SeaborgICell* _tmp22_;
				FILE* _tmp23_;
				const gchar* _tmp24_;
				if (!_tmp8_) {
					gint _tmp9_;
					_tmp9_ = i;
					i = _tmp9_ + 1;
				}
				_tmp8_ = FALSE;
				_tmp10_ = i;
				_tmp11_ = self->priv->notebook_stack;
				_tmp12_ = gtk_stack_get_visible_child (_tmp11_);
				_tmp13_ = seaborg_icell_container_get_Children ((SeaborgICellContainer*) G_TYPE_CHECK_INSTANCE_CAST (_tmp12_, SEABORG_TYPE_NOTEBOOK, SeaborgNotebook));
				_tmp14_ = _tmp13_;
				_tmp15_ = _tmp14_->data;
				_tmp15__length1 = (gint) _tmp14_->len;
				if (!(_tmp10_ < _tmp15__length1)) {
					break;
				}
				_tmp16_ = self->priv->notebook_stack;
				_tmp17_ = gtk_stack_get_visible_child (_tmp16_);
				_tmp18_ = seaborg_icell_container_get_Children ((SeaborgICellContainer*) G_TYPE_CHECK_INSTANCE_CAST (_tmp17_, SEABORG_TYPE_NOTEBOOK, SeaborgNotebook));
				_tmp19_ = _tmp18_;
				_tmp20_ = _tmp19_->data;
				_tmp20__length1 = (gint) _tmp19_->len;
				_tmp21_ = i;
				_tmp22_ = _tmp20_[_tmp21_];
				_tmp23_ = save_file;
				_tmp24_ = identation;
				seaborg_seaborg_application_write_recursively (self, _tmp22_, _tmp23_, _tmp24_);
			}
		}
	}
	_tmp25_ = save_file;
	fprintf (_tmp25_, "</notebook>");
	_tmp26_ = save_file;
	fflush (_tmp26_);
	_tmp27_ = self->priv->notebook_stack;
	_tmp28_ = gtk_stack_get_visible_child_name (_tmp27_);
	_tmp29_ = fn;
	if (g_strcmp0 (_tmp28_, _tmp29_) != 0) {
		GtkStack* _tmp30_;
		GtkStack* _tmp31_;
		GtkWidget* _tmp32_;
		const gchar* _tmp33_;
		GValue _tmp34_ = {0};
		GtkStack* _tmp35_;
		GtkStack* _tmp36_;
		GtkWidget* _tmp37_;
		const gchar* _tmp38_;
		gchar* _tmp39_;
		GValue _tmp40_ = {0};
		_tmp30_ = self->priv->notebook_stack;
		_tmp31_ = self->priv->notebook_stack;
		_tmp32_ = gtk_stack_get_visible_child (_tmp31_);
		_tmp33_ = fn;
		g_value_init (&_tmp34_, G_TYPE_STRING);
		g_value_set_string (&_tmp34_, _tmp33_);
		gtk_container_child_set_property ((GtkContainer*) _tmp30_, _tmp32_, "name", &_tmp34_);
		G_IS_VALUE (&_tmp34_) ? (g_value_unset (&_tmp34_), NULL) : NULL;
		_tmp35_ = self->priv->notebook_stack;
		_tmp36_ = self->priv->notebook_stack;
		_tmp37_ = gtk_stack_get_visible_child (_tmp36_);
		_tmp38_ = fn;
		_tmp39_ = seaborg_make_file_name (_tmp38_);
		g_value_init (&_tmp40_, G_TYPE_STRING);
		g_value_take_string (&_tmp40_, _tmp39_);
		gtk_container_child_set_property ((GtkContainer*) _tmp35_, _tmp37_, "title", &_tmp40_);
		G_IS_VALUE (&_tmp40_) ? (g_value_unset (&_tmp40_), NULL) : NULL;
	}
	seaborg_seaborg_application_kernel_msg (self, "File saved successfully");
	_g_free0 (identation);
	_fclose0 (save_file);
	return;
}


static gdouble double_parse (const gchar* str) {
	gdouble result = 0.0;
	const gchar* _tmp0_;
	gdouble _tmp1_;
	g_return_val_if_fail (str != NULL, 0.0);
	_tmp0_ = str;
	_tmp1_ = g_ascii_strtod (_tmp0_, NULL);
	result = _tmp1_;
	return result;
}


void seaborg_seaborg_application_load_notebook (SeaborgSeaborgApplication* self, const gchar* fn) {
	gchar* version = NULL;
	xmlDoc* doc = NULL;
	const gchar* _tmp0_;
	xmlDoc* _tmp1_;
	xmlDoc* _tmp2_;
	xmlNode* root = NULL;
	xmlDoc* _tmp6_;
	xmlNode* _tmp7_;
	xmlNode* _tmp8_;
	xmlNode* _tmp13_;
	const gchar* _tmp14_;
	xmlNode* _tmp19_;
	gchar* _tmp20_;
	const gchar* _tmp21_;
	const gchar* _tmp26_;
	gdouble _tmp27_;
	SeaborgNotebook* notebook = NULL;
	SeaborgNotebook* _tmp28_;
	xmlNode* _tmp29_;
	SeaborgNotebook* _tmp30_;
	GtkStack* _tmp31_;
	SeaborgNotebook* _tmp32_;
	const gchar* _tmp33_;
	const gchar* _tmp34_;
	gchar* _tmp35_;
	gchar* _tmp36_;
	GtkStack* _tmp37_;
	SeaborgNotebook* _tmp38_;
	GtkApplicationWindow* _tmp39_;
	xmlDoc* _tmp40_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (fn != NULL);
	_tmp0_ = fn;
	_tmp1_ = xmlParseFile (_tmp0_);
	doc = _tmp1_;
	_tmp2_ = doc;
	if (_tmp2_ == NULL) {
		const gchar* _tmp3_;
		gchar* _tmp4_;
		gchar* _tmp5_;
		_tmp3_ = fn;
		_tmp4_ = g_strconcat ("Error opening file: ", _tmp3_, NULL);
		_tmp5_ = _tmp4_;
		seaborg_seaborg_application_kernel_msg (self, _tmp5_);
		_g_free0 (_tmp5_);
		_g_free0 (version);
		return;
	}
	_tmp6_ = doc;
	_tmp7_ = xmlDocGetRootElement (_tmp6_);
	root = _tmp7_;
	_tmp8_ = root;
	if (_tmp8_ == NULL) {
		const gchar* _tmp9_;
		gchar* _tmp10_;
		gchar* _tmp11_;
		xmlDoc* _tmp12_;
		_tmp9_ = fn;
		_tmp10_ = g_strconcat ("Error parsing file: ", _tmp9_, NULL);
		_tmp11_ = _tmp10_;
		seaborg_seaborg_application_kernel_msg (self, _tmp11_);
		_g_free0 (_tmp11_);
		_tmp12_ = doc;
		xmlFreeDoc (_tmp12_);
		_g_free0 (version);
		return;
	}
	_tmp13_ = root;
	_tmp14_ = _tmp13_->name;
	if (g_strcmp0 (_tmp14_, "notebook") != 0) {
		const gchar* _tmp15_;
		gchar* _tmp16_;
		gchar* _tmp17_;
		xmlDoc* _tmp18_;
		_tmp15_ = fn;
		_tmp16_ = g_strconcat ("Error parsing file: ", _tmp15_, NULL);
		_tmp17_ = _tmp16_;
		seaborg_seaborg_application_kernel_msg (self, _tmp17_);
		_g_free0 (_tmp17_);
		_tmp18_ = doc;
		xmlFreeDoc (_tmp18_);
		_g_free0 (version);
		return;
	}
	_tmp19_ = root;
	_tmp20_ = (gchar*) xmlGetProp (_tmp19_, (xmlChar*) "version");
	_g_free0 (version);
	version = _tmp20_;
	_tmp21_ = version;
	if (_tmp21_ == NULL) {
		const gchar* _tmp22_;
		gchar* _tmp23_;
		gchar* _tmp24_;
		xmlDoc* _tmp25_;
		_tmp22_ = fn;
		_tmp23_ = g_strconcat ("Error parsing file: ", _tmp22_, NULL);
		_tmp24_ = _tmp23_;
		seaborg_seaborg_application_kernel_msg (self, _tmp24_);
		_g_free0 (_tmp24_);
		_tmp25_ = doc;
		xmlFreeDoc (_tmp25_);
		_g_free0 (version);
		return;
	}
	_tmp26_ = version;
	_tmp27_ = double_parse (_tmp26_);
	if (_tmp27_ > 1.0) {
		seaborg_seaborg_application_kernel_msg (self, "Warning: file was saved in newer version");
	}
	_tmp28_ = seaborg_notebook_new ();
	g_object_ref_sink (_tmp28_);
	notebook = _tmp28_;
	_tmp29_ = root;
	_tmp30_ = notebook;
	seaborg_seaborg_application_assemble_recursively (self, _tmp29_, (SeaborgICellContainer*) _tmp30_);
	_tmp31_ = self->priv->notebook_stack;
	_tmp32_ = notebook;
	_tmp33_ = fn;
	_tmp34_ = fn;
	_tmp35_ = seaborg_make_file_name (_tmp34_);
	_tmp36_ = _tmp35_;
	gtk_stack_add_titled (_tmp31_, (GtkWidget*) _tmp32_, _tmp33_, _tmp36_);
	_g_free0 (_tmp36_);
	_tmp37_ = self->priv->notebook_stack;
	_tmp38_ = notebook;
	gtk_stack_set_visible_child (_tmp37_, (GtkWidget*) _tmp38_);
	_tmp39_ = self->priv->main_window;
	gtk_widget_show_all ((GtkWidget*) _tmp39_);
	_tmp40_ = doc;
	xmlFreeDoc (_tmp40_);
	_g_free0 (version);
	return;
}


void seaborg_seaborg_application_import_notebook (SeaborgSeaborgApplication* self, const gchar* xml, const gchar* fn) {
	xmlDoc* doc = NULL;
	const gchar* _tmp0_;
	const gchar* _tmp1_;
	gint _tmp2_;
	gint _tmp3_;
	xmlDoc* _tmp4_;
	xmlDoc* _tmp5_;
	xmlNode* root = NULL;
	xmlDoc* _tmp9_;
	xmlNode* _tmp10_;
	xmlNode* _tmp11_;
	xmlNode* _tmp16_;
	const gchar* _tmp17_;
	SeaborgNotebook* notebook = NULL;
	SeaborgNotebook* _tmp22_;
	xmlNode* _tmp23_;
	SeaborgNotebook* _tmp24_;
	GtkStack* _tmp25_;
	SeaborgNotebook* _tmp26_;
	const gchar* _tmp27_;
	gchar* _tmp28_;
	gchar* _tmp29_;
	const gchar* _tmp30_;
	gchar* _tmp31_;
	gchar* _tmp32_;
	GtkStack* _tmp33_;
	SeaborgNotebook* _tmp34_;
	GtkApplicationWindow* _tmp35_;
	xmlDoc* _tmp36_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (xml != NULL);
	g_return_if_fail (fn != NULL);
	_tmp0_ = xml;
	_tmp1_ = xml;
	_tmp2_ = strlen (_tmp1_);
	_tmp3_ = _tmp2_;
	_tmp4_ = xmlParseMemory (_tmp0_, _tmp3_);
	doc = _tmp4_;
	_tmp5_ = doc;
	if (_tmp5_ == NULL) {
		const gchar* _tmp6_;
		gchar* _tmp7_;
		gchar* _tmp8_;
		_tmp6_ = fn;
		_tmp7_ = g_strconcat ("Error opening file: ", _tmp6_, NULL);
		_tmp8_ = _tmp7_;
		seaborg_seaborg_application_kernel_msg (self, _tmp8_);
		_g_free0 (_tmp8_);
		return;
	}
	_tmp9_ = doc;
	_tmp10_ = xmlDocGetRootElement (_tmp9_);
	root = _tmp10_;
	_tmp11_ = root;
	if (_tmp11_ == NULL) {
		const gchar* _tmp12_;
		gchar* _tmp13_;
		gchar* _tmp14_;
		xmlDoc* _tmp15_;
		_tmp12_ = fn;
		_tmp13_ = g_strconcat ("Error parsing file: ", _tmp12_, NULL);
		_tmp14_ = _tmp13_;
		seaborg_seaborg_application_kernel_msg (self, _tmp14_);
		_g_free0 (_tmp14_);
		_tmp15_ = doc;
		xmlFreeDoc (_tmp15_);
		return;
	}
	_tmp16_ = root;
	_tmp17_ = _tmp16_->name;
	if (g_strcmp0 (_tmp17_, "notebook") != 0) {
		const gchar* _tmp18_;
		gchar* _tmp19_;
		gchar* _tmp20_;
		xmlDoc* _tmp21_;
		_tmp18_ = fn;
		_tmp19_ = g_strconcat ("Error parsing file: ", _tmp18_, NULL);
		_tmp20_ = _tmp19_;
		seaborg_seaborg_application_kernel_msg (self, _tmp20_);
		_g_free0 (_tmp20_);
		_tmp21_ = doc;
		xmlFreeDoc (_tmp21_);
		return;
	}
	_tmp22_ = seaborg_notebook_new ();
	g_object_ref_sink (_tmp22_);
	notebook = _tmp22_;
	_tmp23_ = root;
	_tmp24_ = notebook;
	seaborg_seaborg_application_assemble_recursively (self, _tmp23_, (SeaborgICellContainer*) _tmp24_);
	_tmp25_ = self->priv->notebook_stack;
	_tmp26_ = notebook;
	_tmp27_ = fn;
	_tmp28_ = g_strconcat (_tmp27_, ".xml", NULL);
	_tmp29_ = _tmp28_;
	_tmp30_ = fn;
	_tmp31_ = seaborg_make_file_name (_tmp30_);
	_tmp32_ = _tmp31_;
	gtk_stack_add_titled (_tmp25_, (GtkWidget*) _tmp26_, _tmp29_, _tmp32_);
	_g_free0 (_tmp32_);
	_g_free0 (_tmp29_);
	_tmp33_ = self->priv->notebook_stack;
	_tmp34_ = notebook;
	gtk_stack_set_visible_child (_tmp33_, (GtkWidget*) _tmp34_);
	_tmp35_ = self->priv->main_window;
	gtk_widget_show_all ((GtkWidget*) _tmp35_);
	_tmp36_ = doc;
	xmlFreeDoc (_tmp36_);
	return;
}


static Block4Data* block4_data_ref (Block4Data* _data4_) {
	g_atomic_int_inc (&_data4_->_ref_count_);
	return _data4_;
}


static void block4_data_unref (void * _userdata_) {
	Block4Data* _data4_;
	_data4_ = (Block4Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data4_->_ref_count_)) {
		SeaborgSeaborgApplication* self;
		self = _data4_->self;
		_g_free0 (_data4_->fn);
		_g_object_unref0 (self);
		g_slice_free (Block4Data, _data4_);
	}
}


static void* __lambda26_ (Block4Data* _data4_) {
	SeaborgSeaborgApplication* self;
	void* result = NULL;
	void* _tmp2_;
	gint _tmp3_;
	gchar* export_string = NULL;
	const gchar* _tmp4_;
	gchar* _tmp5_;
	gchar* _tmp6_;
	gchar* _tmp7_;
	gchar* _tmp8_;
	GtkStack* _tmp9_;
	GtkWidget* _tmp10_;
	gchar* _tmp11_;
	gchar* _tmp12_;
	gchar* _tmp13_;
	gchar* _tmp14_;
	gchar* _tmp15_;
	gchar* _tmp16_;
	const gchar* _tmp17_;
	gchar* _tmp18_;
	SeaborgEvaluationData _tmp19_ = {0};
	SeaborgEvaluationData _tmp20_;
	void* _tmp21_;
	const gchar* _tmp22_;
	SeaborgSeaborgApplicationcallback_str _tmp23_;
	void* _tmp24_;
	gint _tmp25_;
	GError * _inner_error_ = NULL;
	self = _data4_->self;
	{
		gulong _tmp0_;
		_tmp0_ = seaborg_seaborg_application_global_stamp;
		g_rec_mutex_lock (&__lock_seaborg_seaborg_application_global_stamp);
		{
			seaborg_seaborg_application_global_stamp = (gulong) 1;
		}
		__finally9:
		{
			gulong _tmp1_;
			_tmp1_ = seaborg_seaborg_application_global_stamp;
			g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
		}
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
	}
	_tmp2_ = self->priv->kernel_connection;
	_tmp3_ = check_connection (_tmp2_);
	if (_tmp3_ != 1) {
		seaborg_seaborg_application_kernel_msg (self, "Kernel error importing notebook");
		seaborg_seaborg_application_abort_listener_thread (self);
		result = NULL;
		return result;
	}
	_tmp4_ = _data4_->fn;
	_tmp5_ = g_strconcat ("Export[\"", _tmp4_, NULL);
	_tmp6_ = _tmp5_;
	_tmp7_ = g_strconcat (_tmp6_, "\", Notebook[{", NULL);
	_tmp8_ = _tmp7_;
	_tmp9_ = self->priv->notebook_stack;
	_tmp10_ = gtk_stack_get_visible_child (_tmp9_);
	_tmp11_ = seaborg_seaborg_application_list_cells_recursively (self, G_TYPE_CHECK_INSTANCE_CAST (_tmp10_, SEABORG_TYPE_ICELL_CONTAINER, SeaborgICellContainer));
	_tmp12_ = _tmp11_;
	_tmp13_ = g_strconcat (_tmp8_, _tmp12_, NULL);
	_tmp14_ = _tmp13_;
	_tmp15_ = g_strconcat (_tmp14_, "}]]", NULL);
	_tmp16_ = _tmp15_;
	_g_free0 (_tmp14_);
	_g_free0 (_tmp12_);
	_g_free0 (_tmp8_);
	_g_free0 (_tmp6_);
	export_string = _tmp16_;
	_tmp17_ = _data4_->fn;
	_tmp18_ = g_strdup (_tmp17_);
	memset (&_tmp19_, 0, sizeof (SeaborgEvaluationData));
	_tmp19_.cell = (void*) self;
	_g_free0 (_tmp19_.input);
	_tmp19_.input = _tmp18_;
	seaborg_evaluation_data_destroy (&self->priv->current_cell);
	self->priv->current_cell = _tmp19_;
	_tmp20_ = self->priv->current_cell;
	_tmp21_ = self->priv->kernel_connection;
	_tmp22_ = export_string;
	_tmp23_ = seaborg_seaborg_application_export_notebook_callback;
	evaluate (_tmp21_, _tmp22_, _tmp23_, (void*) (&self->priv->current_cell));
	_tmp24_ = self->priv->kernel_connection;
	_tmp25_ = check_connection (_tmp24_);
	if (_tmp25_ != 1) {
		seaborg_seaborg_application_kernel_msg (self, "Kernel error importing notebook");
		seaborg_seaborg_application_abort_listener_thread (self);
		result = NULL;
		_g_free0 (export_string);
		return result;
	}
	while (TRUE) {
		g_usleep ((gulong) 200);
		{
			gulong _tmp26_;
			_tmp26_ = seaborg_seaborg_application_global_stamp;
			g_rec_mutex_lock (&__lock_seaborg_seaborg_application_global_stamp);
			{
				gulong _tmp27_;
				_tmp27_ = seaborg_seaborg_application_global_stamp;
				if (_tmp27_ == ((gulong) 0)) {
					{
						gulong _tmp28_;
						_tmp28_ = seaborg_seaborg_application_global_stamp;
						g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
					}
					break;
				}
			}
			__finally10:
			{
				gulong _tmp29_;
				_tmp29_ = seaborg_seaborg_application_global_stamp;
				g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
			}
			if (G_UNLIKELY (_inner_error_ != NULL)) {
				_g_free0 (export_string);
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return NULL;
			}
		}
	}
	self->priv->listener_thread_is_running = FALSE;
	result = NULL;
	_g_free0 (export_string);
	return result;
}


static gpointer ___lambda26__gthread_func (gpointer self) {
	gpointer result;
	result = __lambda26_ (self);
	block4_data_unref (self);
	return result;
}


void seaborg_seaborg_application_export_notebook (SeaborgSeaborgApplication* self, const gchar* fn) {
	Block4Data* _data4_;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	gboolean _tmp2_;
	GThread* _tmp3_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (fn != NULL);
	_data4_ = g_slice_new0 (Block4Data);
	_data4_->_ref_count_ = 1;
	_data4_->self = g_object_ref (self);
	_tmp0_ = fn;
	_tmp1_ = g_strdup (_tmp0_);
	_g_free0 (_data4_->fn);
	_data4_->fn = _tmp1_;
	_tmp2_ = self->priv->listener_thread_is_running;
	if (_tmp2_) {
		seaborg_seaborg_application_kernel_msg (self, "Cannot export notebook: kernel is busy");
		block4_data_unref (_data4_);
		_data4_ = NULL;
		return;
	}
	self->priv->listener_thread_is_running = TRUE;
	_tmp3_ = g_thread_new ("seaborg-import", ___lambda26__gthread_func, block4_data_ref (_data4_));
	_g_thread_unref0 (self->priv->listener_thread);
	self->priv->listener_thread = _tmp3_;
	block4_data_unref (_data4_);
	_data4_ = NULL;
}


static gchar* string_replace (const gchar* self, const gchar* old, const gchar* replacement) {
	gchar* result = NULL;
	gboolean _tmp0_ = FALSE;
	gboolean _tmp1_ = FALSE;
	GError * _inner_error_ = NULL;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (old != NULL, NULL);
	g_return_val_if_fail (replacement != NULL, NULL);
	if ((*((gchar*) self)) == '\0') {
		_tmp1_ = TRUE;
	} else {
		const gchar* _tmp2_;
		_tmp2_ = old;
		_tmp1_ = (*((gchar*) _tmp2_)) == '\0';
	}
	if (_tmp1_) {
		_tmp0_ = TRUE;
	} else {
		const gchar* _tmp3_;
		const gchar* _tmp4_;
		_tmp3_ = old;
		_tmp4_ = replacement;
		_tmp0_ = g_strcmp0 (_tmp3_, _tmp4_) == 0;
	}
	if (_tmp0_) {
		gchar* _tmp5_;
		_tmp5_ = g_strdup (self);
		result = _tmp5_;
		return result;
	}
	{
		GRegex* regex = NULL;
		const gchar* _tmp6_;
		gchar* _tmp7_;
		gchar* _tmp8_;
		GRegex* _tmp9_;
		GRegex* _tmp10_;
		gchar* _tmp11_ = NULL;
		GRegex* _tmp12_;
		const gchar* _tmp13_;
		gchar* _tmp14_;
		gchar* _tmp15_;
		_tmp6_ = old;
		_tmp7_ = g_regex_escape_string (_tmp6_, -1);
		_tmp8_ = _tmp7_;
		_tmp9_ = g_regex_new (_tmp8_, 0, 0, &_inner_error_);
		_tmp10_ = _tmp9_;
		_g_free0 (_tmp8_);
		regex = _tmp10_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			if (_inner_error_->domain == G_REGEX_ERROR) {
				goto __catch11_g_regex_error;
			}
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		_tmp12_ = regex;
		_tmp13_ = replacement;
		_tmp14_ = g_regex_replace_literal (_tmp12_, self, (gssize) -1, 0, _tmp13_, 0, &_inner_error_);
		_tmp11_ = _tmp14_;
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			_g_regex_unref0 (regex);
			if (_inner_error_->domain == G_REGEX_ERROR) {
				goto __catch11_g_regex_error;
			}
			_g_regex_unref0 (regex);
			g_critical ("file %s: line %d: unexpected error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
		_tmp15_ = _tmp11_;
		_tmp11_ = NULL;
		result = _tmp15_;
		_g_free0 (_tmp11_);
		_g_regex_unref0 (regex);
		return result;
	}
	goto __finally11;
	__catch11_g_regex_error:
	{
		GError* e = NULL;
		e = _inner_error_;
		_inner_error_ = NULL;
		g_assert_not_reached ();
		_g_error_free0 (e);
	}
	__finally11:
	if (G_UNLIKELY (_inner_error_ != NULL)) {
		g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
		g_clear_error (&_inner_error_);
		return NULL;
	}
}


static gchar* seaborg_seaborg_application_list_cells_recursively (SeaborgSeaborgApplication* self, SeaborgICellContainer* container) {
	gchar* result = NULL;
	gchar* str = NULL;
	gchar* _tmp0_;
	g_return_val_if_fail (self != NULL, NULL);
	g_return_val_if_fail (container != NULL, NULL);
	_tmp0_ = g_strdup ("");
	str = _tmp0_;
	{
		gint i = 0;
		i = 0;
		{
			gboolean _tmp1_ = FALSE;
			_tmp1_ = TRUE;
			while (TRUE) {
				gint _tmp3_;
				SeaborgICellContainer* _tmp4_;
				GArray* _tmp5_;
				GArray* _tmp6_;
				gpointer* _tmp7_;
				gint _tmp7__length1;
				SeaborgICellContainer* _tmp8_;
				GArray* _tmp9_;
				GArray* _tmp10_;
				gpointer* _tmp11_;
				gint _tmp11__length1;
				gint _tmp12_;
				SeaborgICell* _tmp13_;
				SeaborgICellContainer* _tmp33_;
				GArray* _tmp34_;
				GArray* _tmp35_;
				gpointer* _tmp36_;
				gint _tmp36__length1;
				gint _tmp37_;
				SeaborgICell* _tmp38_;
				SeaborgICellContainer* _tmp76_;
				GArray* _tmp77_;
				GArray* _tmp78_;
				gpointer* _tmp79_;
				gint _tmp79__length1;
				gint _tmp80_;
				SeaborgICell* _tmp81_;
				if (!_tmp1_) {
					gint _tmp2_;
					_tmp2_ = i;
					i = _tmp2_ + 1;
				}
				_tmp1_ = FALSE;
				_tmp3_ = i;
				_tmp4_ = container;
				_tmp5_ = seaborg_icell_container_get_Children (_tmp4_);
				_tmp6_ = _tmp5_;
				_tmp7_ = _tmp6_->data;
				_tmp7__length1 = (gint) _tmp6_->len;
				if (!(_tmp3_ < _tmp7__length1)) {
					break;
				}
				_tmp8_ = container;
				_tmp9_ = seaborg_icell_container_get_Children (_tmp8_);
				_tmp10_ = _tmp9_;
				_tmp11_ = _tmp10_->data;
				_tmp11__length1 = (gint) _tmp10_->len;
				_tmp12_ = i;
				_tmp13_ = _tmp11_[_tmp12_];
				if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp13_, SEABORG_TYPE_TEXT_CELL)) {
					const gchar* _tmp14_;
					const gchar* _tmp17_;
					SeaborgICellContainer* _tmp18_;
					GArray* _tmp19_;
					GArray* _tmp20_;
					gpointer* _tmp21_;
					gint _tmp21__length1;
					gint _tmp22_;
					SeaborgICell* _tmp23_;
					gchar* _tmp24_;
					gchar* _tmp25_;
					gchar* _tmp26_;
					gchar* _tmp27_;
					gchar* _tmp28_;
					gchar* _tmp29_;
					gchar* _tmp30_;
					gchar* _tmp31_;
					gchar* _tmp32_;
					_tmp14_ = str;
					if (g_strcmp0 (_tmp14_, "") != 0) {
						const gchar* _tmp15_;
						gchar* _tmp16_;
						_tmp15_ = str;
						_tmp16_ = g_strconcat (_tmp15_, ", ", NULL);
						_g_free0 (str);
						str = _tmp16_;
					}
					_tmp17_ = str;
					_tmp18_ = container;
					_tmp19_ = seaborg_icell_container_get_Children (_tmp18_);
					_tmp20_ = _tmp19_;
					_tmp21_ = _tmp20_->data;
					_tmp21__length1 = (gint) _tmp20_->len;
					_tmp22_ = i;
					_tmp23_ = _tmp21_[_tmp22_];
					_tmp24_ = seaborg_icell_get_text ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp23_, SEABORG_TYPE_TEXT_CELL, SeaborgTextCell));
					_tmp25_ = _tmp24_;
					_tmp26_ = string_replace (_tmp25_, "\"", "\\\"");
					_tmp27_ = _tmp26_;
					_tmp28_ = g_strconcat ("Cell[\"", _tmp27_, NULL);
					_tmp29_ = _tmp28_;
					_tmp30_ = g_strconcat (_tmp29_, "\", \"Text\"]", NULL);
					_tmp31_ = _tmp30_;
					_tmp32_ = g_strconcat (_tmp17_, _tmp31_, NULL);
					_g_free0 (str);
					str = _tmp32_;
					_g_free0 (_tmp31_);
					_g_free0 (_tmp29_);
					_g_free0 (_tmp27_);
					_g_free0 (_tmp25_);
					continue;
				}
				_tmp33_ = container;
				_tmp34_ = seaborg_icell_container_get_Children (_tmp33_);
				_tmp35_ = _tmp34_;
				_tmp36_ = _tmp35_->data;
				_tmp36__length1 = (gint) _tmp35_->len;
				_tmp37_ = i;
				_tmp38_ = _tmp36_[_tmp37_];
				if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp38_, SEABORG_TYPE_EVALUATION_CELL)) {
					const gchar* _tmp39_;
					const gchar* _tmp42_;
					SeaborgICellContainer* _tmp43_;
					GArray* _tmp44_;
					GArray* _tmp45_;
					gpointer* _tmp46_;
					gint _tmp46__length1;
					gint _tmp47_;
					SeaborgICell* _tmp48_;
					gchar* _tmp49_;
					gchar* _tmp50_;
					gchar* _tmp51_;
					gchar* _tmp52_;
					gchar* _tmp53_;
					gchar* _tmp54_;
					gchar* _tmp55_;
					gchar* _tmp56_;
					gchar* _tmp57_;
					gchar* _tmp58_;
					gchar* _tmp59_;
					const gchar* _tmp60_;
					SeaborgICellContainer* _tmp61_;
					GArray* _tmp62_;
					GArray* _tmp63_;
					gpointer* _tmp64_;
					gint _tmp64__length1;
					gint _tmp65_;
					SeaborgICell* _tmp66_;
					gchar* _tmp67_;
					gchar* _tmp68_;
					gchar* _tmp69_;
					gchar* _tmp70_;
					gchar* _tmp71_;
					gchar* _tmp72_;
					gchar* _tmp73_;
					gchar* _tmp74_;
					gchar* _tmp75_;
					_tmp39_ = str;
					if (g_strcmp0 (_tmp39_, "") != 0) {
						const gchar* _tmp40_;
						gchar* _tmp41_;
						_tmp40_ = str;
						_tmp41_ = g_strconcat (_tmp40_, ", ", NULL);
						_g_free0 (str);
						str = _tmp41_;
					}
					_tmp42_ = str;
					_tmp43_ = container;
					_tmp44_ = seaborg_icell_container_get_Children (_tmp43_);
					_tmp45_ = _tmp44_;
					_tmp46_ = _tmp45_->data;
					_tmp46__length1 = (gint) _tmp45_->len;
					_tmp47_ = i;
					_tmp48_ = _tmp46_[_tmp47_];
					_tmp49_ = seaborg_icell_get_text ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp48_, SEABORG_TYPE_EVALUATION_CELL, SeaborgEvaluationCell));
					_tmp50_ = _tmp49_;
					_tmp51_ = string_replace (_tmp50_, "\n", "");
					_tmp52_ = _tmp51_;
					_tmp53_ = string_replace (_tmp52_, "\"", "\\\"");
					_tmp54_ = _tmp53_;
					_tmp55_ = g_strconcat ("Cell[\"", _tmp54_, NULL);
					_tmp56_ = _tmp55_;
					_tmp57_ = g_strconcat (_tmp56_, "\", \"Input\"],", NULL);
					_tmp58_ = _tmp57_;
					_tmp59_ = g_strconcat (_tmp42_, _tmp58_, NULL);
					_g_free0 (str);
					str = _tmp59_;
					_g_free0 (_tmp58_);
					_g_free0 (_tmp56_);
					_g_free0 (_tmp54_);
					_g_free0 (_tmp52_);
					_g_free0 (_tmp50_);
					_tmp60_ = str;
					_tmp61_ = container;
					_tmp62_ = seaborg_icell_container_get_Children (_tmp61_);
					_tmp63_ = _tmp62_;
					_tmp64_ = _tmp63_->data;
					_tmp64__length1 = (gint) _tmp63_->len;
					_tmp65_ = i;
					_tmp66_ = _tmp64_[_tmp65_];
					_tmp67_ = seaborg_evaluation_cell_get_output_text (G_TYPE_CHECK_INSTANCE_CAST (_tmp66_, SEABORG_TYPE_EVALUATION_CELL, SeaborgEvaluationCell));
					_tmp68_ = _tmp67_;
					_tmp69_ = string_replace (_tmp68_, "\"", "\\\"");
					_tmp70_ = _tmp69_;
					_tmp71_ = g_strconcat ("Cell[\"", _tmp70_, NULL);
					_tmp72_ = _tmp71_;
					_tmp73_ = g_strconcat (_tmp72_, "\", \"Output\"]", NULL);
					_tmp74_ = _tmp73_;
					_tmp75_ = g_strconcat (_tmp60_, _tmp74_, NULL);
					_g_free0 (str);
					str = _tmp75_;
					_g_free0 (_tmp74_);
					_g_free0 (_tmp72_);
					_g_free0 (_tmp70_);
					_g_free0 (_tmp68_);
					continue;
				}
				_tmp76_ = container;
				_tmp77_ = seaborg_icell_container_get_Children (_tmp76_);
				_tmp78_ = _tmp77_;
				_tmp79_ = _tmp78_->data;
				_tmp79__length1 = (gint) _tmp78_->len;
				_tmp80_ = i;
				_tmp81_ = _tmp79_[_tmp80_];
				if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp81_, SEABORG_TYPE_CELL_CONTAINER)) {
					const gchar* _tmp82_;
					SeaborgICellContainer* _tmp85_;
					GArray* _tmp86_;
					GArray* _tmp87_;
					gpointer* _tmp88_;
					gint _tmp88__length1;
					gint _tmp89_;
					SeaborgICell* _tmp90_;
					guint _tmp91_;
					SeaborgICellContainer* _tmp218_;
					GArray* _tmp219_;
					GArray* _tmp220_;
					gpointer* _tmp221_;
					gint _tmp221__length1;
					gint _tmp222_;
					SeaborgICell* _tmp223_;
					GArray* _tmp224_;
					GArray* _tmp225_;
					gpointer* _tmp226_;
					gint _tmp226__length1;
					_tmp82_ = str;
					if (g_strcmp0 (_tmp82_, "") != 0) {
						const gchar* _tmp83_;
						gchar* _tmp84_;
						_tmp83_ = str;
						_tmp84_ = g_strconcat (_tmp83_, ", ", NULL);
						_g_free0 (str);
						str = _tmp84_;
					}
					_tmp85_ = container;
					_tmp86_ = seaborg_icell_container_get_Children (_tmp85_);
					_tmp87_ = _tmp86_;
					_tmp88_ = _tmp87_->data;
					_tmp88__length1 = (gint) _tmp87_->len;
					_tmp89_ = i;
					_tmp90_ = _tmp88_[_tmp89_];
					_tmp91_ = seaborg_icell_get_level ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp90_, SEABORG_TYPE_CELL_CONTAINER, SeaborgCellContainer));
					switch (_tmp91_) {
						case 1:
						{
							const gchar* _tmp92_;
							SeaborgICellContainer* _tmp93_;
							GArray* _tmp94_;
							GArray* _tmp95_;
							gpointer* _tmp96_;
							gint _tmp96__length1;
							gint _tmp97_;
							SeaborgICell* _tmp98_;
							gchar* _tmp99_;
							gchar* _tmp100_;
							gchar* _tmp101_;
							gchar* _tmp102_;
							gchar* _tmp103_;
							gchar* _tmp104_;
							gchar* _tmp105_;
							gchar* _tmp106_;
							gchar* _tmp107_;
							gchar* _tmp108_;
							gchar* _tmp109_;
							_tmp92_ = str;
							_tmp93_ = container;
							_tmp94_ = seaborg_icell_container_get_Children (_tmp93_);
							_tmp95_ = _tmp94_;
							_tmp96_ = _tmp95_->data;
							_tmp96__length1 = (gint) _tmp95_->len;
							_tmp97_ = i;
							_tmp98_ = _tmp96_[_tmp97_];
							_tmp99_ = seaborg_icell_get_text ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp98_, SEABORG_TYPE_CELL_CONTAINER, SeaborgCellContainer));
							_tmp100_ = _tmp99_;
							_tmp101_ = string_replace (_tmp100_, "\n", "");
							_tmp102_ = _tmp101_;
							_tmp103_ = string_replace (_tmp102_, "\"", "\\\"");
							_tmp104_ = _tmp103_;
							_tmp105_ = g_strconcat ("Cell[\"", _tmp104_, NULL);
							_tmp106_ = _tmp105_;
							_tmp107_ = g_strconcat (_tmp106_, "\", \"Subsubsection\"]", NULL);
							_tmp108_ = _tmp107_;
							_tmp109_ = g_strconcat (_tmp92_, _tmp108_, NULL);
							_g_free0 (str);
							str = _tmp109_;
							_g_free0 (_tmp108_);
							_g_free0 (_tmp106_);
							_g_free0 (_tmp104_);
							_g_free0 (_tmp102_);
							_g_free0 (_tmp100_);
							break;
						}
						case 2:
						{
							const gchar* _tmp110_;
							SeaborgICellContainer* _tmp111_;
							GArray* _tmp112_;
							GArray* _tmp113_;
							gpointer* _tmp114_;
							gint _tmp114__length1;
							gint _tmp115_;
							SeaborgICell* _tmp116_;
							gchar* _tmp117_;
							gchar* _tmp118_;
							gchar* _tmp119_;
							gchar* _tmp120_;
							gchar* _tmp121_;
							gchar* _tmp122_;
							gchar* _tmp123_;
							gchar* _tmp124_;
							gchar* _tmp125_;
							gchar* _tmp126_;
							gchar* _tmp127_;
							_tmp110_ = str;
							_tmp111_ = container;
							_tmp112_ = seaborg_icell_container_get_Children (_tmp111_);
							_tmp113_ = _tmp112_;
							_tmp114_ = _tmp113_->data;
							_tmp114__length1 = (gint) _tmp113_->len;
							_tmp115_ = i;
							_tmp116_ = _tmp114_[_tmp115_];
							_tmp117_ = seaborg_icell_get_text ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp116_, SEABORG_TYPE_CELL_CONTAINER, SeaborgCellContainer));
							_tmp118_ = _tmp117_;
							_tmp119_ = string_replace (_tmp118_, "\n", "");
							_tmp120_ = _tmp119_;
							_tmp121_ = string_replace (_tmp120_, "\"", "\\\"");
							_tmp122_ = _tmp121_;
							_tmp123_ = g_strconcat ("Cell[\"", _tmp122_, NULL);
							_tmp124_ = _tmp123_;
							_tmp125_ = g_strconcat (_tmp124_, "\", \"Subsection\"]", NULL);
							_tmp126_ = _tmp125_;
							_tmp127_ = g_strconcat (_tmp110_, _tmp126_, NULL);
							_g_free0 (str);
							str = _tmp127_;
							_g_free0 (_tmp126_);
							_g_free0 (_tmp124_);
							_g_free0 (_tmp122_);
							_g_free0 (_tmp120_);
							_g_free0 (_tmp118_);
							break;
						}
						case 3:
						{
							const gchar* _tmp128_;
							SeaborgICellContainer* _tmp129_;
							GArray* _tmp130_;
							GArray* _tmp131_;
							gpointer* _tmp132_;
							gint _tmp132__length1;
							gint _tmp133_;
							SeaborgICell* _tmp134_;
							gchar* _tmp135_;
							gchar* _tmp136_;
							gchar* _tmp137_;
							gchar* _tmp138_;
							gchar* _tmp139_;
							gchar* _tmp140_;
							gchar* _tmp141_;
							gchar* _tmp142_;
							gchar* _tmp143_;
							gchar* _tmp144_;
							gchar* _tmp145_;
							_tmp128_ = str;
							_tmp129_ = container;
							_tmp130_ = seaborg_icell_container_get_Children (_tmp129_);
							_tmp131_ = _tmp130_;
							_tmp132_ = _tmp131_->data;
							_tmp132__length1 = (gint) _tmp131_->len;
							_tmp133_ = i;
							_tmp134_ = _tmp132_[_tmp133_];
							_tmp135_ = seaborg_icell_get_text ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp134_, SEABORG_TYPE_CELL_CONTAINER, SeaborgCellContainer));
							_tmp136_ = _tmp135_;
							_tmp137_ = string_replace (_tmp136_, "\n", "");
							_tmp138_ = _tmp137_;
							_tmp139_ = string_replace (_tmp138_, "\"", "\\\"");
							_tmp140_ = _tmp139_;
							_tmp141_ = g_strconcat ("Cell[\"", _tmp140_, NULL);
							_tmp142_ = _tmp141_;
							_tmp143_ = g_strconcat (_tmp142_, "\", \"Section\"]", NULL);
							_tmp144_ = _tmp143_;
							_tmp145_ = g_strconcat (_tmp128_, _tmp144_, NULL);
							_g_free0 (str);
							str = _tmp145_;
							_g_free0 (_tmp144_);
							_g_free0 (_tmp142_);
							_g_free0 (_tmp140_);
							_g_free0 (_tmp138_);
							_g_free0 (_tmp136_);
							break;
						}
						case 4:
						{
							const gchar* _tmp146_;
							SeaborgICellContainer* _tmp147_;
							GArray* _tmp148_;
							GArray* _tmp149_;
							gpointer* _tmp150_;
							gint _tmp150__length1;
							gint _tmp151_;
							SeaborgICell* _tmp152_;
							gchar* _tmp153_;
							gchar* _tmp154_;
							gchar* _tmp155_;
							gchar* _tmp156_;
							gchar* _tmp157_;
							gchar* _tmp158_;
							gchar* _tmp159_;
							gchar* _tmp160_;
							gchar* _tmp161_;
							gchar* _tmp162_;
							gchar* _tmp163_;
							_tmp146_ = str;
							_tmp147_ = container;
							_tmp148_ = seaborg_icell_container_get_Children (_tmp147_);
							_tmp149_ = _tmp148_;
							_tmp150_ = _tmp149_->data;
							_tmp150__length1 = (gint) _tmp149_->len;
							_tmp151_ = i;
							_tmp152_ = _tmp150_[_tmp151_];
							_tmp153_ = seaborg_icell_get_text ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp152_, SEABORG_TYPE_CELL_CONTAINER, SeaborgCellContainer));
							_tmp154_ = _tmp153_;
							_tmp155_ = string_replace (_tmp154_, "\n", "");
							_tmp156_ = _tmp155_;
							_tmp157_ = string_replace (_tmp156_, "\"", "\\\"");
							_tmp158_ = _tmp157_;
							_tmp159_ = g_strconcat ("Cell[\"", _tmp158_, NULL);
							_tmp160_ = _tmp159_;
							_tmp161_ = g_strconcat (_tmp160_, "\", \"Subchapter\"]", NULL);
							_tmp162_ = _tmp161_;
							_tmp163_ = g_strconcat (_tmp146_, _tmp162_, NULL);
							_g_free0 (str);
							str = _tmp163_;
							_g_free0 (_tmp162_);
							_g_free0 (_tmp160_);
							_g_free0 (_tmp158_);
							_g_free0 (_tmp156_);
							_g_free0 (_tmp154_);
							break;
						}
						case 5:
						{
							const gchar* _tmp164_;
							SeaborgICellContainer* _tmp165_;
							GArray* _tmp166_;
							GArray* _tmp167_;
							gpointer* _tmp168_;
							gint _tmp168__length1;
							gint _tmp169_;
							SeaborgICell* _tmp170_;
							gchar* _tmp171_;
							gchar* _tmp172_;
							gchar* _tmp173_;
							gchar* _tmp174_;
							gchar* _tmp175_;
							gchar* _tmp176_;
							gchar* _tmp177_;
							gchar* _tmp178_;
							gchar* _tmp179_;
							gchar* _tmp180_;
							gchar* _tmp181_;
							_tmp164_ = str;
							_tmp165_ = container;
							_tmp166_ = seaborg_icell_container_get_Children (_tmp165_);
							_tmp167_ = _tmp166_;
							_tmp168_ = _tmp167_->data;
							_tmp168__length1 = (gint) _tmp167_->len;
							_tmp169_ = i;
							_tmp170_ = _tmp168_[_tmp169_];
							_tmp171_ = seaborg_icell_get_text ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp170_, SEABORG_TYPE_CELL_CONTAINER, SeaborgCellContainer));
							_tmp172_ = _tmp171_;
							_tmp173_ = string_replace (_tmp172_, "\n", "");
							_tmp174_ = _tmp173_;
							_tmp175_ = string_replace (_tmp174_, "\"", "\\\"");
							_tmp176_ = _tmp175_;
							_tmp177_ = g_strconcat ("Cell[\"", _tmp176_, NULL);
							_tmp178_ = _tmp177_;
							_tmp179_ = g_strconcat (_tmp178_, "\", \"Chapter\"]", NULL);
							_tmp180_ = _tmp179_;
							_tmp181_ = g_strconcat (_tmp164_, _tmp180_, NULL);
							_g_free0 (str);
							str = _tmp181_;
							_g_free0 (_tmp180_);
							_g_free0 (_tmp178_);
							_g_free0 (_tmp176_);
							_g_free0 (_tmp174_);
							_g_free0 (_tmp172_);
							break;
						}
						case 6:
						{
							const gchar* _tmp182_;
							SeaborgICellContainer* _tmp183_;
							GArray* _tmp184_;
							GArray* _tmp185_;
							gpointer* _tmp186_;
							gint _tmp186__length1;
							gint _tmp187_;
							SeaborgICell* _tmp188_;
							gchar* _tmp189_;
							gchar* _tmp190_;
							gchar* _tmp191_;
							gchar* _tmp192_;
							gchar* _tmp193_;
							gchar* _tmp194_;
							gchar* _tmp195_;
							gchar* _tmp196_;
							gchar* _tmp197_;
							gchar* _tmp198_;
							gchar* _tmp199_;
							_tmp182_ = str;
							_tmp183_ = container;
							_tmp184_ = seaborg_icell_container_get_Children (_tmp183_);
							_tmp185_ = _tmp184_;
							_tmp186_ = _tmp185_->data;
							_tmp186__length1 = (gint) _tmp185_->len;
							_tmp187_ = i;
							_tmp188_ = _tmp186_[_tmp187_];
							_tmp189_ = seaborg_icell_get_text ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp188_, SEABORG_TYPE_CELL_CONTAINER, SeaborgCellContainer));
							_tmp190_ = _tmp189_;
							_tmp191_ = string_replace (_tmp190_, "\n", "");
							_tmp192_ = _tmp191_;
							_tmp193_ = string_replace (_tmp192_, "\"", "\\\"");
							_tmp194_ = _tmp193_;
							_tmp195_ = g_strconcat ("Cell[\"", _tmp194_, NULL);
							_tmp196_ = _tmp195_;
							_tmp197_ = g_strconcat (_tmp196_, "\", \"Title\"]", NULL);
							_tmp198_ = _tmp197_;
							_tmp199_ = g_strconcat (_tmp182_, _tmp198_, NULL);
							_g_free0 (str);
							str = _tmp199_;
							_g_free0 (_tmp198_);
							_g_free0 (_tmp196_);
							_g_free0 (_tmp194_);
							_g_free0 (_tmp192_);
							_g_free0 (_tmp190_);
							break;
						}
						default:
						{
							const gchar* _tmp200_;
							SeaborgICellContainer* _tmp201_;
							GArray* _tmp202_;
							GArray* _tmp203_;
							gpointer* _tmp204_;
							gint _tmp204__length1;
							gint _tmp205_;
							SeaborgICell* _tmp206_;
							gchar* _tmp207_;
							gchar* _tmp208_;
							gchar* _tmp209_;
							gchar* _tmp210_;
							gchar* _tmp211_;
							gchar* _tmp212_;
							gchar* _tmp213_;
							gchar* _tmp214_;
							gchar* _tmp215_;
							gchar* _tmp216_;
							gchar* _tmp217_;
							_tmp200_ = str;
							_tmp201_ = container;
							_tmp202_ = seaborg_icell_container_get_Children (_tmp201_);
							_tmp203_ = _tmp202_;
							_tmp204_ = _tmp203_->data;
							_tmp204__length1 = (gint) _tmp203_->len;
							_tmp205_ = i;
							_tmp206_ = _tmp204_[_tmp205_];
							_tmp207_ = seaborg_icell_get_text ((SeaborgICell*) G_TYPE_CHECK_INSTANCE_CAST (_tmp206_, SEABORG_TYPE_CELL_CONTAINER, SeaborgCellContainer));
							_tmp208_ = _tmp207_;
							_tmp209_ = string_replace (_tmp208_, "\n", "");
							_tmp210_ = _tmp209_;
							_tmp211_ = string_replace (_tmp210_, "\"", "\\\"");
							_tmp212_ = _tmp211_;
							_tmp213_ = g_strconcat ("Cell[\"", _tmp212_, NULL);
							_tmp214_ = _tmp213_;
							_tmp215_ = g_strconcat (_tmp214_, "\", \"Text\"]", NULL);
							_tmp216_ = _tmp215_;
							_tmp217_ = g_strconcat (_tmp200_, _tmp216_, NULL);
							_g_free0 (str);
							str = _tmp217_;
							_g_free0 (_tmp216_);
							_g_free0 (_tmp214_);
							_g_free0 (_tmp212_);
							_g_free0 (_tmp210_);
							_g_free0 (_tmp208_);
							break;
						}
					}
					_tmp218_ = container;
					_tmp219_ = seaborg_icell_container_get_Children (_tmp218_);
					_tmp220_ = _tmp219_;
					_tmp221_ = _tmp220_->data;
					_tmp221__length1 = (gint) _tmp220_->len;
					_tmp222_ = i;
					_tmp223_ = _tmp221_[_tmp222_];
					_tmp224_ = seaborg_icell_container_get_Children ((SeaborgICellContainer*) G_TYPE_CHECK_INSTANCE_CAST (_tmp223_, SEABORG_TYPE_CELL_CONTAINER, SeaborgCellContainer));
					_tmp225_ = _tmp224_;
					_tmp226_ = _tmp225_->data;
					_tmp226__length1 = (gint) _tmp225_->len;
					if (_tmp226__length1 > 0) {
						const gchar* _tmp227_;
						SeaborgICellContainer* _tmp228_;
						GArray* _tmp229_;
						GArray* _tmp230_;
						gpointer* _tmp231_;
						gint _tmp231__length1;
						gint _tmp232_;
						SeaborgICell* _tmp233_;
						gchar* _tmp234_;
						gchar* _tmp235_;
						gchar* _tmp236_;
						gchar* _tmp237_;
						gchar* _tmp238_;
						_tmp227_ = str;
						_tmp228_ = container;
						_tmp229_ = seaborg_icell_container_get_Children (_tmp228_);
						_tmp230_ = _tmp229_;
						_tmp231_ = _tmp230_->data;
						_tmp231__length1 = (gint) _tmp230_->len;
						_tmp232_ = i;
						_tmp233_ = _tmp231_[_tmp232_];
						_tmp234_ = seaborg_seaborg_application_list_cells_recursively (self, (SeaborgICellContainer*) _tmp233_);
						_tmp235_ = _tmp234_;
						_tmp236_ = g_strconcat (", ", _tmp235_, NULL);
						_tmp237_ = _tmp236_;
						_tmp238_ = g_strconcat (_tmp227_, _tmp237_, NULL);
						_g_free0 (str);
						str = _tmp238_;
						_g_free0 (_tmp237_);
						_g_free0 (_tmp235_);
					}
					continue;
				}
			}
		}
	}
	result = str;
	return result;
}


static void seaborg_seaborg_application_assemble_recursively (SeaborgSeaborgApplication* self, xmlNode* root, SeaborgICellContainer* container) {
	gchar* type = NULL;
	SeaborgTextCell* tcell = NULL;
	SeaborgEvaluationCell* ecell = NULL;
	SeaborgCellContainer* ccell = NULL;
	g_return_if_fail (self != NULL);
	{
		xmlNode* iter = NULL;
		xmlNode* _tmp0_;
		xmlNode* _tmp1_;
		_tmp0_ = root;
		_tmp1_ = _tmp0_->children;
		iter = _tmp1_;
		{
			gboolean _tmp2_ = FALSE;
			_tmp2_ = TRUE;
			while (TRUE) {
				xmlNode* _tmp5_;
				xmlNode* _tmp6_;
				xmlElementType _tmp7_;
				if (!_tmp2_) {
					xmlNode* _tmp3_;
					xmlNode* _tmp4_;
					_tmp3_ = iter;
					_tmp4_ = _tmp3_->next;
					iter = _tmp4_;
				}
				_tmp2_ = FALSE;
				_tmp5_ = iter;
				if (!(_tmp5_ != NULL)) {
					break;
				}
				_tmp6_ = iter;
				_tmp7_ = _tmp6_->type;
				if (_tmp7_ == XML_ELEMENT_NODE) {
					xmlNode* _tmp8_;
					const gchar* _tmp9_;
					_tmp8_ = iter;
					_tmp9_ = _tmp8_->name;
					if (g_strcmp0 (_tmp9_, "cell") == 0) {
						xmlNode* _tmp10_;
						gchar* _tmp11_;
						const gchar* _tmp12_;
						const gchar* _tmp13_;
						const gchar* _tmp14_;
						GQuark _tmp16_ = 0U;
						static GQuark _tmp15_label0 = 0;
						static GQuark _tmp15_label1 = 0;
						static GQuark _tmp15_label2 = 0;
						_tmp10_ = iter;
						_tmp11_ = (gchar*) xmlGetProp (_tmp10_, (xmlChar*) "type");
						_g_free0 (type);
						type = _tmp11_;
						_tmp12_ = type;
						if (_tmp12_ == NULL) {
							continue;
						}
						_tmp13_ = type;
						_tmp14_ = _tmp13_;
						_tmp16_ = (NULL == _tmp14_) ? 0 : g_quark_from_string (_tmp14_);
						if (_tmp16_ == ((0 != _tmp15_label0) ? _tmp15_label0 : (_tmp15_label0 = g_quark_from_static_string ("evaluation")))) {
							switch (0) {
								default:
								{
									SeaborgICellContainer* _tmp17_;
									SeaborgEvaluationCell* _tmp18_;
									SeaborgICellContainer* _tmp57_;
									SeaborgEvaluationCell* _tmp58_;
									SeaborgICell* _tmp59_;
									SeaborgICell** _tmp60_;
									SeaborgICell** _tmp61_;
									gint _tmp61__length1;
									_tmp17_ = container;
									_tmp18_ = seaborg_evaluation_cell_new (_tmp17_);
									g_object_ref_sink (_tmp18_);
									ecell = _tmp18_;
									{
										xmlNode* iter2 = NULL;
										xmlNode* _tmp19_;
										xmlNode* _tmp20_;
										_tmp19_ = iter;
										_tmp20_ = _tmp19_->children;
										iter2 = _tmp20_;
										{
											gboolean _tmp21_ = FALSE;
											_tmp21_ = TRUE;
											while (TRUE) {
												xmlNode* _tmp24_;
												xmlNode* _tmp25_;
												const gchar* _tmp26_;
												if (!_tmp21_) {
													xmlNode* _tmp22_;
													xmlNode* _tmp23_;
													_tmp22_ = iter2;
													_tmp23_ = _tmp22_->next;
													iter2 = _tmp23_;
												}
												_tmp21_ = FALSE;
												_tmp24_ = iter2;
												if (!(_tmp24_ != NULL)) {
													break;
												}
												_tmp25_ = iter2;
												_tmp26_ = _tmp25_->name;
												if (g_strcmp0 (_tmp26_, "content") == 0) {
													SeaborgEvaluationCell* _tmp27_;
													xmlNode* _tmp28_;
													gchar* _tmp29_;
													gchar* _tmp30_;
													gchar* _tmp31_;
													gchar* _tmp32_;
													_tmp27_ = ecell;
													_tmp28_ = iter2;
													_tmp29_ = (gchar*) xmlNodeGetContent (_tmp28_);
													_tmp30_ = _tmp29_;
													_tmp31_ = seaborg_load_replacement (_tmp30_);
													_tmp32_ = _tmp31_;
													seaborg_icell_set_text ((SeaborgICell*) _tmp27_, _tmp32_);
													_g_free0 (_tmp32_);
													_g_free0 (_tmp30_);
												} else {
													xmlNode* _tmp33_;
													const gchar* _tmp34_;
													_tmp33_ = iter2;
													_tmp34_ = _tmp33_->name;
													if (g_strcmp0 (_tmp34_, "results") == 0) {
														{
															xmlNode* iter3 = NULL;
															xmlNode* _tmp35_;
															xmlNode* _tmp36_;
															_tmp35_ = iter2;
															_tmp36_ = _tmp35_->children;
															iter3 = _tmp36_;
															{
																gboolean _tmp37_ = FALSE;
																_tmp37_ = TRUE;
																while (TRUE) {
																	xmlNode* _tmp40_;
																	xmlNode* _tmp41_;
																	const gchar* _tmp42_;
																	if (!_tmp37_) {
																		xmlNode* _tmp38_;
																		xmlNode* _tmp39_;
																		_tmp38_ = iter3;
																		_tmp39_ = _tmp38_->next;
																		iter3 = _tmp39_;
																	}
																	_tmp37_ = FALSE;
																	_tmp40_ = iter3;
																	if (!(_tmp40_ != NULL)) {
																		break;
																	}
																	_tmp41_ = iter3;
																	_tmp42_ = _tmp41_->name;
																	if (g_strcmp0 (_tmp42_, "result") == 0) {
																		xmlNode* _tmp43_;
																		gchar* _tmp44_;
																		gchar* _tmp45_;
																		GQuark _tmp47_ = 0U;
																		static GQuark _tmp46_label0 = 0;
																		static GQuark _tmp46_label1 = 0;
																		_tmp43_ = iter3;
																		_tmp44_ = (gchar*) xmlGetProp (_tmp43_, (xmlChar*) "type");
																		_tmp45_ = _tmp44_;
																		_tmp47_ = (NULL == _tmp45_) ? 0 : g_quark_from_string (_tmp45_);
																		g_free (_tmp45_);
																		if (_tmp47_ == ((0 != _tmp46_label0) ? _tmp46_label0 : (_tmp46_label0 = g_quark_from_static_string (NULL)))) {
																			switch (0) {
																				default:
																				{
																					break;
																				}
																			}
																		} else if (_tmp47_ == ((0 != _tmp46_label1) ? _tmp46_label1 : (_tmp46_label1 = g_quark_from_static_string ("text")))) {
																			switch (0) {
																				default:
																				{
																					SeaborgEvaluationCell* _tmp48_;
																					xmlNode* _tmp49_;
																					gchar* _tmp50_;
																					gchar* _tmp51_;
																					gchar* _tmp52_;
																					gchar* _tmp53_;
																					gchar* _tmp54_;
																					gchar* _tmp55_;
																					SeaborgEvaluationCell* _tmp56_;
																					_tmp48_ = ecell;
																					_tmp49_ = iter3;
																					_tmp50_ = (gchar*) xmlNodeGetContent (_tmp49_);
																					_tmp51_ = _tmp50_;
																					_tmp52_ = seaborg_load_replacement (_tmp51_);
																					_tmp53_ = _tmp52_;
																					_tmp54_ = g_strconcat ("\n", _tmp53_, NULL);
																					_tmp55_ = _tmp54_;
																					seaborg_evaluation_cell_add_text (_tmp48_, _tmp55_);
																					_g_free0 (_tmp55_);
																					_g_free0 (_tmp53_);
																					_g_free0 (_tmp51_);
																					_tmp56_ = ecell;
																					seaborg_icell_expand_all ((SeaborgICell*) _tmp56_);
																					break;
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
									_tmp57_ = container;
									_tmp58_ = ecell;
									_tmp59_ = _g_object_ref0 ((SeaborgICell*) _tmp58_);
									_tmp60_ = g_new0 (SeaborgICell*, 1 + 1);
									_tmp60_[0] = _tmp59_;
									_tmp61_ = _tmp60_;
									_tmp61__length1 = 1;
									seaborg_icell_add_before ((SeaborgICell*) _tmp57_, -1, _tmp61_, 1);
									_tmp61_ = (_vala_array_free (_tmp61_, _tmp61__length1, (GDestroyNotify) g_object_unref), NULL);
									break;
								}
							}
						} else if (_tmp16_ == ((0 != _tmp15_label1) ? _tmp15_label1 : (_tmp15_label1 = g_quark_from_static_string ("text")))) {
							switch (0) {
								default:
								{
									{
										xmlNode* iter2 = NULL;
										xmlNode* _tmp62_;
										xmlNode* _tmp63_;
										_tmp62_ = iter;
										_tmp63_ = _tmp62_->children;
										iter2 = _tmp63_;
										{
											gboolean _tmp64_ = FALSE;
											_tmp64_ = TRUE;
											while (TRUE) {
												xmlNode* _tmp67_;
												xmlNode* _tmp68_;
												const gchar* _tmp69_;
												if (!_tmp64_) {
													xmlNode* _tmp65_;
													xmlNode* _tmp66_;
													_tmp65_ = iter2;
													_tmp66_ = _tmp65_->next;
													iter2 = _tmp66_;
												}
												_tmp64_ = FALSE;
												_tmp67_ = iter2;
												if (!(_tmp67_ != NULL)) {
													break;
												}
												_tmp68_ = iter2;
												_tmp69_ = _tmp68_->name;
												if (g_strcmp0 (_tmp69_, "content") == 0) {
													SeaborgICellContainer* _tmp70_;
													SeaborgTextCell* _tmp71_;
													SeaborgTextCell* _tmp72_;
													xmlNode* _tmp73_;
													gchar* _tmp74_;
													gchar* _tmp75_;
													gchar* _tmp76_;
													gchar* _tmp77_;
													SeaborgICellContainer* _tmp78_;
													SeaborgTextCell* _tmp79_;
													SeaborgICell* _tmp80_;
													SeaborgICell** _tmp81_;
													SeaborgICell** _tmp82_;
													gint _tmp82__length1;
													_tmp70_ = container;
													_tmp71_ = seaborg_text_cell_new (_tmp70_);
													g_object_ref_sink (_tmp71_);
													tcell = _tmp71_;
													_tmp72_ = tcell;
													_tmp73_ = iter2;
													_tmp74_ = (gchar*) xmlNodeGetContent (_tmp73_);
													_tmp75_ = _tmp74_;
													_tmp76_ = seaborg_load_replacement (_tmp75_);
													_tmp77_ = _tmp76_;
													seaborg_icell_set_text ((SeaborgICell*) _tmp72_, _tmp77_);
													_g_free0 (_tmp77_);
													_g_free0 (_tmp75_);
													_tmp78_ = container;
													_tmp79_ = tcell;
													_tmp80_ = _g_object_ref0 ((SeaborgICell*) _tmp79_);
													_tmp81_ = g_new0 (SeaborgICell*, 1 + 1);
													_tmp81_[0] = _tmp80_;
													_tmp82_ = _tmp81_;
													_tmp82__length1 = 1;
													seaborg_icell_add_before ((SeaborgICell*) _tmp78_, -1, _tmp82_, 1);
													_tmp82_ = (_vala_array_free (_tmp82_, _tmp82__length1, (GDestroyNotify) g_object_unref), NULL);
												}
											}
										}
									}
									break;
								}
							}
						} else if (_tmp16_ == ((0 != _tmp15_label2) ? _tmp15_label2 : (_tmp15_label2 = g_quark_from_static_string ("container")))) {
							switch (0) {
								default:
								{
									SeaborgICellContainer* _tmp83_;
									SeaborgCellContainer* _tmp84_;
									SeaborgICellContainer* _tmp111_;
									SeaborgCellContainer* _tmp112_;
									SeaborgICell* _tmp113_;
									SeaborgICell** _tmp114_;
									SeaborgICell** _tmp115_;
									gint _tmp115__length1;
									_tmp83_ = container;
									_tmp84_ = seaborg_cell_container_new (_tmp83_, (guint) 1);
									g_object_ref_sink (_tmp84_);
									ccell = _tmp84_;
									{
										xmlNode* iter2 = NULL;
										xmlNode* _tmp85_;
										xmlNode* _tmp86_;
										_tmp85_ = iter;
										_tmp86_ = _tmp85_->children;
										iter2 = _tmp86_;
										{
											gboolean _tmp87_ = FALSE;
											_tmp87_ = TRUE;
											while (TRUE) {
												xmlNode* _tmp90_;
												xmlNode* _tmp91_;
												const gchar* _tmp92_;
												if (!_tmp87_) {
													xmlNode* _tmp88_;
													xmlNode* _tmp89_;
													_tmp88_ = iter2;
													_tmp89_ = _tmp88_->next;
													iter2 = _tmp89_;
												}
												_tmp87_ = FALSE;
												_tmp90_ = iter2;
												if (!(_tmp90_ != NULL)) {
													break;
												}
												_tmp91_ = iter2;
												_tmp92_ = _tmp91_->name;
												if (g_strcmp0 (_tmp92_, "content") == 0) {
													SeaborgCellContainer* _tmp93_;
													xmlNode* _tmp94_;
													gchar* _tmp95_;
													gchar* _tmp96_;
													gchar* _tmp97_;
													gchar* _tmp98_;
													_tmp93_ = ccell;
													_tmp94_ = iter2;
													_tmp95_ = (gchar*) xmlNodeGetContent (_tmp94_);
													_tmp96_ = _tmp95_;
													_tmp97_ = seaborg_load_replacement (_tmp96_);
													_tmp98_ = _tmp97_;
													seaborg_icell_set_text ((SeaborgICell*) _tmp93_, _tmp98_);
													_g_free0 (_tmp98_);
													_g_free0 (_tmp96_);
												} else {
													xmlNode* _tmp99_;
													const gchar* _tmp100_;
													_tmp99_ = iter2;
													_tmp100_ = _tmp99_->name;
													if (g_strcmp0 (_tmp100_, "level") == 0) {
														SeaborgCellContainer* _tmp101_;
														xmlNode* _tmp102_;
														gchar* _tmp103_;
														gchar* _tmp104_;
														gint _tmp105_;
														_tmp101_ = ccell;
														_tmp102_ = iter2;
														_tmp103_ = (gchar*) xmlNodeGetContent (_tmp102_);
														_tmp104_ = _tmp103_;
														_tmp105_ = atoi (_tmp104_);
														seaborg_cell_container_set_level (_tmp101_, (guint) _tmp105_);
														_g_free0 (_tmp104_);
													} else {
														xmlNode* _tmp106_;
														const gchar* _tmp107_;
														_tmp106_ = iter2;
														_tmp107_ = _tmp106_->name;
														if (g_strcmp0 (_tmp107_, "children") == 0) {
															xmlNode* _tmp108_;
															SeaborgCellContainer* _tmp109_;
															SeaborgCellContainer* _tmp110_;
															_tmp108_ = iter2;
															_tmp109_ = ccell;
															seaborg_seaborg_application_assemble_recursively (self, _tmp108_, (SeaborgICellContainer*) _tmp109_);
															_tmp110_ = ccell;
															seaborg_icell_expand_all ((SeaborgICell*) _tmp110_);
														}
													}
												}
											}
										}
									}
									_tmp111_ = container;
									_tmp112_ = ccell;
									_tmp113_ = _g_object_ref0 ((SeaborgICell*) _tmp112_);
									_tmp114_ = g_new0 (SeaborgICell*, 1 + 1);
									_tmp114_[0] = _tmp113_;
									_tmp115_ = _tmp114_;
									_tmp115__length1 = 1;
									seaborg_icell_add_before ((SeaborgICell*) _tmp111_, -1, _tmp115_, 1);
									_tmp115_ = (_vala_array_free (_tmp115_, _tmp115__length1, (GDestroyNotify) g_object_unref), NULL);
									break;
								}
							}
						}
					}
				}
			}
		}
	}
	_g_free0 (type);
}


static void seaborg_seaborg_application_write_recursively (SeaborgSeaborgApplication* self, SeaborgICell* cell, FILE* file, const gchar* identation) {
	SeaborgICell* _tmp0_;
	SeaborgICell* _tmp32_;
	SeaborgICell* _tmp79_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (cell != NULL);
	g_return_if_fail (file != NULL);
	g_return_if_fail (identation != NULL);
	_tmp0_ = cell;
	if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp0_, SEABORG_TYPE_TEXT_CELL)) {
		SeaborgTextCell* textcell = NULL;
		SeaborgICell* _tmp1_;
		SeaborgTextCell* _tmp2_;
		FILE* _tmp3_;
		const gchar* _tmp4_;
		gchar* _tmp5_;
		gchar* _tmp6_;
		FILE* _tmp7_;
		const gchar* _tmp8_;
		gchar* _tmp9_;
		gchar* _tmp10_;
		FILE* _tmp11_;
		const gchar* _tmp12_;
		gchar* _tmp13_;
		gchar* _tmp14_;
		SeaborgTextCell* _tmp15_;
		gchar* _tmp16_;
		gchar* _tmp17_;
		gchar* _tmp18_;
		gchar* _tmp19_;
		FILE* _tmp20_;
		const gchar* _tmp21_;
		gchar* _tmp22_;
		gchar* _tmp23_;
		FILE* _tmp24_;
		const gchar* _tmp25_;
		gchar* _tmp26_;
		gchar* _tmp27_;
		FILE* _tmp28_;
		const gchar* _tmp29_;
		gchar* _tmp30_;
		gchar* _tmp31_;
		_tmp1_ = cell;
		_tmp2_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp1_, SEABORG_TYPE_TEXT_CELL, SeaborgTextCell));
		textcell = _tmp2_;
		_tmp3_ = file;
		_tmp4_ = identation;
		_tmp5_ = g_strconcat (_tmp4_, "<cell type=\"text\">\n", NULL);
		_tmp6_ = _tmp5_;
		fprintf (_tmp3_, "%s", _tmp6_);
		_g_free0 (_tmp6_);
		_tmp7_ = file;
		_tmp8_ = identation;
		_tmp9_ = g_strconcat (_tmp8_, "	<level>0</level>\n", NULL);
		_tmp10_ = _tmp9_;
		fprintf (_tmp7_, "%s", _tmp10_);
		_g_free0 (_tmp10_);
		_tmp11_ = file;
		_tmp12_ = identation;
		_tmp13_ = g_strconcat (_tmp12_, "	<content>%s</content>\n", NULL);
		_tmp14_ = _tmp13_;
		_tmp15_ = textcell;
		_tmp16_ = seaborg_icell_get_text ((SeaborgICell*) _tmp15_);
		_tmp17_ = _tmp16_;
		_tmp18_ = seaborg_save_replacement (_tmp17_);
		_tmp19_ = _tmp18_;
		fprintf (_tmp11_, _tmp14_, _tmp19_);
		_g_free0 (_tmp19_);
		_g_free0 (_tmp17_);
		_g_free0 (_tmp14_);
		_tmp20_ = file;
		_tmp21_ = identation;
		_tmp22_ = g_strconcat (_tmp21_, "	<results></results>\n", NULL);
		_tmp23_ = _tmp22_;
		fprintf (_tmp20_, "%s", _tmp23_);
		_g_free0 (_tmp23_);
		_tmp24_ = file;
		_tmp25_ = identation;
		_tmp26_ = g_strconcat (_tmp25_, "	<children></children>\n", NULL);
		_tmp27_ = _tmp26_;
		fprintf (_tmp24_, "%s", _tmp27_);
		_g_free0 (_tmp27_);
		_tmp28_ = file;
		_tmp29_ = identation;
		_tmp30_ = g_strconcat (_tmp29_, "</cell>\n", NULL);
		_tmp31_ = _tmp30_;
		fprintf (_tmp28_, "%s", _tmp31_);
		_g_free0 (_tmp31_);
		_g_object_unref0 (textcell);
	}
	_tmp32_ = cell;
	if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp32_, SEABORG_TYPE_EVALUATION_CELL)) {
		SeaborgEvaluationCell* evalcell = NULL;
		SeaborgICell* _tmp33_;
		SeaborgEvaluationCell* _tmp34_;
		FILE* _tmp35_;
		const gchar* _tmp36_;
		gchar* _tmp37_;
		gchar* _tmp38_;
		FILE* _tmp39_;
		const gchar* _tmp40_;
		gchar* _tmp41_;
		gchar* _tmp42_;
		FILE* _tmp43_;
		const gchar* _tmp44_;
		gchar* _tmp45_;
		gchar* _tmp46_;
		SeaborgEvaluationCell* _tmp47_;
		gchar* _tmp48_;
		gchar* _tmp49_;
		gchar* _tmp50_;
		gchar* _tmp51_;
		FILE* _tmp52_;
		const gchar* _tmp53_;
		gchar* _tmp54_;
		gchar* _tmp55_;
		const gchar* _tmp56_;
		gchar* _tmp57_;
		gchar* _tmp58_;
		gchar* _tmp59_;
		gchar* _tmp60_;
		const gchar* _tmp61_;
		gchar* _tmp62_;
		gchar* _tmp63_;
		gchar* _tmp64_;
		gchar* _tmp65_;
		SeaborgEvaluationCell* _tmp66_;
		gchar* _tmp67_;
		gchar* _tmp68_;
		gchar* _tmp69_;
		gchar* _tmp70_;
		FILE* _tmp71_;
		const gchar* _tmp72_;
		gchar* _tmp73_;
		gchar* _tmp74_;
		FILE* _tmp75_;
		const gchar* _tmp76_;
		gchar* _tmp77_;
		gchar* _tmp78_;
		_tmp33_ = cell;
		_tmp34_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp33_, SEABORG_TYPE_EVALUATION_CELL, SeaborgEvaluationCell));
		evalcell = _tmp34_;
		_tmp35_ = file;
		_tmp36_ = identation;
		_tmp37_ = g_strconcat (_tmp36_, "<cell type=\"evaluation\">\n", NULL);
		_tmp38_ = _tmp37_;
		fprintf (_tmp35_, "%s", _tmp38_);
		_g_free0 (_tmp38_);
		_tmp39_ = file;
		_tmp40_ = identation;
		_tmp41_ = g_strconcat (_tmp40_, "	<level>0</level>\n", NULL);
		_tmp42_ = _tmp41_;
		fprintf (_tmp39_, "%s", _tmp42_);
		_g_free0 (_tmp42_);
		_tmp43_ = file;
		_tmp44_ = identation;
		_tmp45_ = g_strconcat (_tmp44_, "	<content>%s</content>\n", NULL);
		_tmp46_ = _tmp45_;
		_tmp47_ = evalcell;
		_tmp48_ = seaborg_icell_get_text ((SeaborgICell*) _tmp47_);
		_tmp49_ = _tmp48_;
		_tmp50_ = seaborg_save_replacement (_tmp49_);
		_tmp51_ = _tmp50_;
		fprintf (_tmp43_, _tmp46_, _tmp51_);
		_g_free0 (_tmp51_);
		_g_free0 (_tmp49_);
		_g_free0 (_tmp46_);
		_tmp52_ = file;
		_tmp53_ = identation;
		_tmp54_ = g_strconcat (_tmp53_, "	<results>\n", NULL);
		_tmp55_ = _tmp54_;
		_tmp56_ = identation;
		_tmp57_ = g_strconcat (_tmp55_, _tmp56_, NULL);
		_tmp58_ = _tmp57_;
		_tmp59_ = g_strconcat (_tmp58_, "		<result type=\"text\">%s</result>\n", NULL);
		_tmp60_ = _tmp59_;
		_tmp61_ = identation;
		_tmp62_ = g_strconcat (_tmp60_, _tmp61_, NULL);
		_tmp63_ = _tmp62_;
		_tmp64_ = g_strconcat (_tmp63_, "	</results>\n", NULL);
		_tmp65_ = _tmp64_;
		_tmp66_ = evalcell;
		_tmp67_ = seaborg_evaluation_cell_get_output_text (_tmp66_);
		_tmp68_ = _tmp67_;
		_tmp69_ = seaborg_save_replacement (_tmp68_);
		_tmp70_ = _tmp69_;
		fprintf (_tmp52_, _tmp65_, _tmp70_);
		_g_free0 (_tmp70_);
		_g_free0 (_tmp68_);
		_g_free0 (_tmp65_);
		_g_free0 (_tmp63_);
		_g_free0 (_tmp60_);
		_g_free0 (_tmp58_);
		_g_free0 (_tmp55_);
		_tmp71_ = file;
		_tmp72_ = identation;
		_tmp73_ = g_strconcat (_tmp72_, "	<children></children>\n", NULL);
		_tmp74_ = _tmp73_;
		fprintf (_tmp71_, "%s", _tmp74_);
		_g_free0 (_tmp74_);
		_tmp75_ = file;
		_tmp76_ = identation;
		_tmp77_ = g_strconcat (_tmp76_, "</cell>\n", NULL);
		_tmp78_ = _tmp77_;
		fprintf (_tmp75_, "%s", _tmp78_);
		_g_free0 (_tmp78_);
		_g_object_unref0 (evalcell);
	}
	_tmp79_ = cell;
	if (G_TYPE_CHECK_INSTANCE_TYPE (_tmp79_, SEABORG_TYPE_CELL_CONTAINER)) {
		SeaborgCellContainer* cellcontainer = NULL;
		SeaborgICell* _tmp80_;
		SeaborgCellContainer* _tmp81_;
		FILE* _tmp82_;
		const gchar* _tmp83_;
		gchar* _tmp84_;
		gchar* _tmp85_;
		FILE* _tmp86_;
		const gchar* _tmp87_;
		gchar* _tmp88_;
		gchar* _tmp89_;
		SeaborgCellContainer* _tmp90_;
		guint _tmp91_;
		FILE* _tmp92_;
		const gchar* _tmp93_;
		gchar* _tmp94_;
		gchar* _tmp95_;
		SeaborgCellContainer* _tmp96_;
		gchar* _tmp97_;
		gchar* _tmp98_;
		gchar* _tmp99_;
		gchar* _tmp100_;
		FILE* _tmp101_;
		const gchar* _tmp102_;
		gchar* _tmp103_;
		gchar* _tmp104_;
		FILE* _tmp105_;
		const gchar* _tmp106_;
		gchar* _tmp107_;
		gchar* _tmp108_;
		FILE* _tmp126_;
		const gchar* _tmp127_;
		gchar* _tmp128_;
		gchar* _tmp129_;
		FILE* _tmp130_;
		const gchar* _tmp131_;
		gchar* _tmp132_;
		gchar* _tmp133_;
		_tmp80_ = cell;
		_tmp81_ = _g_object_ref0 (G_TYPE_CHECK_INSTANCE_CAST (_tmp80_, SEABORG_TYPE_CELL_CONTAINER, SeaborgCellContainer));
		cellcontainer = _tmp81_;
		_tmp82_ = file;
		_tmp83_ = identation;
		_tmp84_ = g_strconcat (_tmp83_, "<cell type=\"container\">\n", NULL);
		_tmp85_ = _tmp84_;
		fprintf (_tmp82_, "%s", _tmp85_);
		_g_free0 (_tmp85_);
		_tmp86_ = file;
		_tmp87_ = identation;
		_tmp88_ = g_strconcat (_tmp87_, "	<level>%i</level>\n", NULL);
		_tmp89_ = _tmp88_;
		_tmp90_ = cellcontainer;
		_tmp91_ = seaborg_icell_get_level ((SeaborgICell*) _tmp90_);
		fprintf (_tmp86_, _tmp89_, _tmp91_);
		_g_free0 (_tmp89_);
		_tmp92_ = file;
		_tmp93_ = identation;
		_tmp94_ = g_strconcat (_tmp93_, "	<content>%s</content>\n", NULL);
		_tmp95_ = _tmp94_;
		_tmp96_ = cellcontainer;
		_tmp97_ = seaborg_icell_get_text ((SeaborgICell*) _tmp96_);
		_tmp98_ = _tmp97_;
		_tmp99_ = seaborg_save_replacement (_tmp98_);
		_tmp100_ = _tmp99_;
		fprintf (_tmp92_, _tmp95_, _tmp100_);
		_g_free0 (_tmp100_);
		_g_free0 (_tmp98_);
		_g_free0 (_tmp95_);
		_tmp101_ = file;
		_tmp102_ = identation;
		_tmp103_ = g_strconcat (_tmp102_, "	<results></results>\n", NULL);
		_tmp104_ = _tmp103_;
		fprintf (_tmp101_, "%s", _tmp104_);
		_g_free0 (_tmp104_);
		_tmp105_ = file;
		_tmp106_ = identation;
		_tmp107_ = g_strconcat (_tmp106_, "	<children>\n", NULL);
		_tmp108_ = _tmp107_;
		fprintf (_tmp105_, "%s", _tmp108_);
		_g_free0 (_tmp108_);
		{
			gint i = 0;
			i = 0;
			{
				gboolean _tmp109_ = FALSE;
				_tmp109_ = TRUE;
				while (TRUE) {
					gint _tmp111_;
					SeaborgCellContainer* _tmp112_;
					GArray* _tmp113_;
					GArray* _tmp114_;
					gpointer* _tmp115_;
					gint _tmp115__length1;
					SeaborgCellContainer* _tmp116_;
					GArray* _tmp117_;
					GArray* _tmp118_;
					gpointer* _tmp119_;
					gint _tmp119__length1;
					gint _tmp120_;
					SeaborgICell* _tmp121_;
					FILE* _tmp122_;
					const gchar* _tmp123_;
					gchar* _tmp124_;
					gchar* _tmp125_;
					if (!_tmp109_) {
						gint _tmp110_;
						_tmp110_ = i;
						i = _tmp110_ + 1;
					}
					_tmp109_ = FALSE;
					_tmp111_ = i;
					_tmp112_ = cellcontainer;
					_tmp113_ = seaborg_icell_container_get_Children ((SeaborgICellContainer*) _tmp112_);
					_tmp114_ = _tmp113_;
					_tmp115_ = _tmp114_->data;
					_tmp115__length1 = (gint) _tmp114_->len;
					if (!(_tmp111_ < _tmp115__length1)) {
						break;
					}
					_tmp116_ = cellcontainer;
					_tmp117_ = seaborg_icell_container_get_Children ((SeaborgICellContainer*) _tmp116_);
					_tmp118_ = _tmp117_;
					_tmp119_ = _tmp118_->data;
					_tmp119__length1 = (gint) _tmp118_->len;
					_tmp120_ = i;
					_tmp121_ = _tmp119_[_tmp120_];
					_tmp122_ = file;
					_tmp123_ = identation;
					_tmp124_ = g_strconcat (_tmp123_, "		", NULL);
					_tmp125_ = _tmp124_;
					seaborg_seaborg_application_write_recursively (self, _tmp121_, _tmp122_, _tmp125_);
					_g_free0 (_tmp125_);
				}
			}
		}
		_tmp126_ = file;
		_tmp127_ = identation;
		_tmp128_ = g_strconcat (_tmp127_, "	</children>\n", NULL);
		_tmp129_ = _tmp128_;
		fprintf (_tmp126_, "%s", _tmp129_);
		_g_free0 (_tmp129_);
		_tmp130_ = file;
		_tmp131_ = identation;
		_tmp132_ = g_strconcat (_tmp131_, "</cell>\n", NULL);
		_tmp133_ = _tmp132_;
		fprintf (_tmp130_, "%s", _tmp133_);
		_g_free0 (_tmp133_);
		_g_object_unref0 (cellcontainer);
	}
}


static Block5Data* block5_data_ref (Block5Data* _data5_) {
	g_atomic_int_inc (&_data5_->_ref_count_);
	return _data5_;
}


static void block5_data_unref (void * _userdata_) {
	Block5Data* _data5_;
	_data5_ = (Block5Data*) _userdata_;
	if (g_atomic_int_dec_and_test (&_data5_->_ref_count_)) {
		SeaborgSeaborgApplication* self;
		self = _data5_->self;
		_g_free0 (_data5_->fn);
		_g_object_unref0 (self);
		g_slice_free (Block5Data, _data5_);
	}
}


static gchar* g_file_stream_read_line (FILE* self) {
	gchar* result = NULL;
	gint c = 0;
	GString* ret = NULL;
	GString* _tmp7_;
	g_return_val_if_fail (self != NULL, NULL);
	ret = NULL;
	while (TRUE) {
		gint _tmp0_;
		gint _tmp1_;
		GString* _tmp2_;
		gint _tmp4_;
		GString* _tmp5_;
		gint _tmp6_;
		_tmp0_ = fgetc (self);
		c = _tmp0_;
		_tmp1_ = c;
		if (!(_tmp1_ != EOF)) {
			break;
		}
		_tmp2_ = ret;
		if (_tmp2_ == NULL) {
			GString* _tmp3_;
			_tmp3_ = g_string_new ("");
			_g_string_free0 (ret);
			ret = _tmp3_;
		}
		_tmp4_ = c;
		if (_tmp4_ == ((gint) '\n')) {
			break;
		}
		_tmp5_ = ret;
		_tmp6_ = c;
		g_string_append_c ((GString*) _tmp5_, (gchar) _tmp6_);
	}
	_tmp7_ = ret;
	if (_tmp7_ == NULL) {
		result = NULL;
		_g_string_free0 (ret);
		return result;
	} else {
		GString* _tmp8_;
		const gchar* _tmp9_;
		gchar* _tmp10_;
		_tmp8_ = ret;
		_tmp9_ = ((GString*) _tmp8_)->str;
		_tmp10_ = g_strdup (_tmp9_);
		result = _tmp10_;
		_g_string_free0 (ret);
		return result;
	}
	_g_string_free0 (ret);
}


static void* __lambda24_ (Block5Data* _data5_) {
	SeaborgSeaborgApplication* self;
	void* result = NULL;
	void* _tmp2_;
	gint _tmp3_;
	FILE* import_script = NULL;
	FILE* _tmp4_;
	FILE* _tmp5_;
	gchar* import_string = NULL;
	gchar* _tmp6_;
	const gchar* _tmp14_;
	gchar* _tmp15_;
	SeaborgEvaluationData _tmp16_ = {0};
	SeaborgEvaluationData _tmp17_;
	void* _tmp18_;
	const gchar* _tmp19_;
	gchar* _tmp20_;
	gchar* _tmp21_;
	const gchar* _tmp22_;
	gchar* _tmp23_;
	gchar* _tmp24_;
	gchar* _tmp25_;
	SeaborgSeaborgApplicationcallback_str _tmp26_;
	void* _tmp27_;
	gint _tmp28_;
	GError * _inner_error_ = NULL;
	self = _data5_->self;
	{
		gulong _tmp0_;
		_tmp0_ = seaborg_seaborg_application_global_stamp;
		g_rec_mutex_lock (&__lock_seaborg_seaborg_application_global_stamp);
		{
			seaborg_seaborg_application_global_stamp = (gulong) 1;
		}
		__finally12:
		{
			gulong _tmp1_;
			_tmp1_ = seaborg_seaborg_application_global_stamp;
			g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
		}
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return NULL;
		}
	}
	_tmp2_ = self->priv->kernel_connection;
	_tmp3_ = check_connection (_tmp2_);
	if (_tmp3_ != 1) {
		seaborg_seaborg_application_kernel_msg (self, "Kernel error importing notebook");
		seaborg_seaborg_application_abort_listener_thread (self);
		result = NULL;
		return result;
	}
	_tmp4_ = g_fopen ("res/wolfram_scripts/import.m", "r");
	import_script = _tmp4_;
	_tmp5_ = import_script;
	if (_tmp5_ == NULL) {
		seaborg_seaborg_application_kernel_msg (self, "Importing notebook failed");
		seaborg_seaborg_application_abort_listener_thread (self);
		result = NULL;
		_fclose0 (import_script);
		return result;
	}
	_tmp6_ = g_strdup ("");
	import_string = _tmp6_;
	while (TRUE) {
		FILE* _tmp7_;
		gboolean _tmp8_;
		const gchar* _tmp9_;
		FILE* _tmp10_;
		gchar* _tmp11_;
		gchar* _tmp12_;
		gchar* _tmp13_;
		_tmp7_ = import_script;
		_tmp8_ = feof (_tmp7_);
		if (!(!_tmp8_)) {
			break;
		}
		_tmp9_ = import_string;
		_tmp10_ = import_script;
		_tmp11_ = g_file_stream_read_line (_tmp10_);
		_tmp12_ = _tmp11_;
		_tmp13_ = g_strconcat (_tmp9_, _tmp12_, NULL);
		_g_free0 (import_string);
		import_string = _tmp13_;
		_g_free0 (_tmp12_);
	}
	_tmp14_ = _data5_->fn;
	_tmp15_ = g_strdup (_tmp14_);
	memset (&_tmp16_, 0, sizeof (SeaborgEvaluationData));
	_tmp16_.cell = (void*) self;
	_g_free0 (_tmp16_.input);
	_tmp16_.input = _tmp15_;
	seaborg_evaluation_data_destroy (&self->priv->current_cell);
	self->priv->current_cell = _tmp16_;
	_tmp17_ = self->priv->current_cell;
	_tmp18_ = self->priv->kernel_connection;
	_tmp19_ = import_string;
	_tmp20_ = g_strconcat (_tmp19_, "\nSeaborgNotebookImport[\"", NULL);
	_tmp21_ = _tmp20_;
	_tmp22_ = _data5_->fn;
	_tmp23_ = g_strconcat (_tmp21_, _tmp22_, NULL);
	_tmp24_ = _tmp23_;
	_tmp25_ = g_strconcat (_tmp24_, "\"]", NULL);
	_tmp26_ = seaborg_seaborg_application_receive_notebook_xml;
	evaluate (_tmp18_, _tmp25_, _tmp26_, (void*) (&self->priv->current_cell));
	_g_free0 (_tmp24_);
	_g_free0 (_tmp21_);
	_tmp27_ = self->priv->kernel_connection;
	_tmp28_ = check_connection (_tmp27_);
	if (_tmp28_ != 1) {
		seaborg_seaborg_application_kernel_msg (self, "Kernel error importing notebook");
		seaborg_seaborg_application_abort_listener_thread (self);
		result = NULL;
		_g_free0 (import_string);
		_fclose0 (import_script);
		return result;
	}
	while (TRUE) {
		g_usleep ((gulong) 200);
		{
			gulong _tmp29_;
			_tmp29_ = seaborg_seaborg_application_global_stamp;
			g_rec_mutex_lock (&__lock_seaborg_seaborg_application_global_stamp);
			{
				gulong _tmp30_;
				_tmp30_ = seaborg_seaborg_application_global_stamp;
				if (_tmp30_ == ((gulong) 0)) {
					{
						gulong _tmp31_;
						_tmp31_ = seaborg_seaborg_application_global_stamp;
						g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
					}
					break;
				}
			}
			__finally13:
			{
				gulong _tmp32_;
				_tmp32_ = seaborg_seaborg_application_global_stamp;
				g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
			}
			if (G_UNLIKELY (_inner_error_ != NULL)) {
				_g_free0 (import_string);
				_fclose0 (import_script);
				g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
				g_clear_error (&_inner_error_);
				return NULL;
			}
		}
	}
	self->priv->listener_thread_is_running = FALSE;
	result = NULL;
	_g_free0 (import_string);
	_fclose0 (import_script);
	return result;
}


static gpointer ___lambda24__gthread_func (gpointer self) {
	gpointer result;
	result = __lambda24_ (self);
	block5_data_unref (self);
	return result;
}


static void seaborg_seaborg_application_process_for_import (SeaborgSeaborgApplication* self, const gchar* fn) {
	Block5Data* _data5_;
	const gchar* _tmp0_;
	gchar* _tmp1_;
	gboolean _tmp2_;
	GThread* _tmp3_;
	g_return_if_fail (self != NULL);
	g_return_if_fail (fn != NULL);
	_data5_ = g_slice_new0 (Block5Data);
	_data5_->_ref_count_ = 1;
	_data5_->self = g_object_ref (self);
	_tmp0_ = fn;
	_tmp1_ = g_strdup (_tmp0_);
	_g_free0 (_data5_->fn);
	_data5_->fn = _tmp1_;
	_tmp2_ = self->priv->listener_thread_is_running;
	if (_tmp2_) {
		seaborg_seaborg_application_kernel_msg (self, "Cannot import notebook: kernel is busy");
		block5_data_unref (_data5_);
		_data5_ = NULL;
		return;
	}
	self->priv->listener_thread_is_running = TRUE;
	_tmp3_ = g_thread_new ("seaborg-import", ___lambda24__gthread_func, block5_data_ref (_data5_));
	_g_thread_unref0 (self->priv->listener_thread);
	self->priv->listener_thread = _tmp3_;
	block5_data_unref (_data5_);
	_data5_ = NULL;
}


static void seaborg_seaborg_application_abort_listener_thread (SeaborgSeaborgApplication* self) {
	gint res = 0;
	void* _tmp2_;
	gint _tmp3_;
	gint _tmp4_;
	GError * _inner_error_ = NULL;
	g_return_if_fail (self != NULL);
	{
		gulong _tmp0_;
		_tmp0_ = seaborg_seaborg_application_global_stamp;
		g_rec_mutex_lock (&__lock_seaborg_seaborg_application_global_stamp);
		{
			seaborg_seaborg_application_global_stamp = (gulong) 0;
		}
		__finally14:
		{
			gulong _tmp1_;
			_tmp1_ = seaborg_seaborg_application_global_stamp;
			g_rec_mutex_unlock (&__lock_seaborg_seaborg_application_global_stamp);
		}
		if (G_UNLIKELY (_inner_error_ != NULL)) {
			g_critical ("file %s: line %d: uncaught error: %s (%s, %d)", __FILE__, __LINE__, _inner_error_->message, g_quark_to_string (_inner_error_->domain), _inner_error_->code);
			g_clear_error (&_inner_error_);
			return;
		}
	}
	_tmp2_ = self->priv->kernel_connection;
	_tmp3_ = check_connection (_tmp2_);
	res = _tmp3_;
	_tmp4_ = res;
	if (_tmp4_ != 1) {
		gint _tmp5_;
		_tmp5_ = res;
		if (_tmp5_ == 2) {
			void* _tmp6_;
			void* _tmp7_;
			gint _tmp8_;
			_tmp6_ = self->priv->kernel_connection;
			try_reset_after_abort (_tmp6_);
			_tmp7_ = self->priv->kernel_connection;
			_tmp8_ = check_connection (_tmp7_);
			if (_tmp8_ != 1) {
				seaborg_seaborg_application_kernel_msg (self, "Kernel connection lost");
			}
		} else {
			seaborg_seaborg_application_kernel_msg (self, "Kernel connection lost");
		}
	}
	self->priv->listener_thread_is_running = FALSE;
}


SeaborgSeaborgApplication* seaborg_seaborg_application_construct (GType object_type) {
	SeaborgSeaborgApplication * self = NULL;
	self = (SeaborgSeaborgApplication*) g_object_new (object_type, NULL);
	return self;
}


SeaborgSeaborgApplication* seaborg_seaborg_application_new (void) {
	return seaborg_seaborg_application_construct (SEABORG_TYPE_SEABORG_APPLICATION);
}


static void seaborg_seaborg_application_class_init (SeaborgSeaborgApplicationClass * klass) {
	seaborg_seaborg_application_parent_class = g_type_class_peek_parent (klass);
	g_type_class_add_private (klass, sizeof (SeaborgSeaborgApplicationPrivate));
	((GApplicationClass *) klass)->activate = (void (*) (GApplication *)) seaborg_seaborg_application_real_activate;
	((GApplicationClass *) klass)->startup = (void (*) (GApplication *)) seaborg_seaborg_application_real_startup;
	G_OBJECT_CLASS (klass)->finalize = seaborg_seaborg_application_finalize;
	g_rec_mutex_init (&__lock_seaborg_seaborg_application_global_stamp);
	seaborg_seaborg_application_write_to_evaluation_cell = __seaborg_seaborg_application_write_to_evaluation_cell_lambda4__seaborgseaborgapplicationcallback_str;
	seaborg_seaborg_application_receive_notebook_xml = __seaborg_seaborg_application_receive_notebook_xml_lambda14__seaborgseaborgapplicationcallback_str;
	seaborg_seaborg_application_export_notebook_callback = __seaborg_seaborg_application_export_notebook_callback_lambda17__seaborgseaborgapplicationcallback_str;
}


static void seaborg_seaborg_application_instance_init (SeaborgSeaborgApplication * self) {
	self->priv = SEABORG_SEABORG_APPLICATION_GET_PRIVATE (self);
	g_rec_mutex_init (&self->priv->__lock_eval_queue);
	self->priv->listener_thread_is_running = FALSE;
}


static void seaborg_seaborg_application_finalize (GObject * obj) {
	SeaborgSeaborgApplication * self;
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SEABORG_TYPE_SEABORG_APPLICATION, SeaborgSeaborgApplication);
	seaborg_evaluation_data_destroy (&self->priv->current_cell);
	_g_object_unref0 (self->priv->main_window);
	_g_object_unref0 (self->priv->main_headerbar);
	_g_object_unref0 (self->priv->tab_switcher);
	_g_object_unref0 (self->priv->notebook_stack);
	_g_object_unref0 (self->priv->main_menu);
	_g_object_unref0 (self->priv->notebook_scroll);
	_g_object_unref0 (self->priv->shortcuts);
	g_rec_mutex_clear (&self->priv->__lock_eval_queue);
	__g_queue_free__seaborg_evaluation_data_free0_0 (self->priv->eval_queue);
	_g_thread_unref0 (self->priv->listener_thread);
	G_OBJECT_CLASS (seaborg_seaborg_application_parent_class)->finalize (obj);
}


GType seaborg_seaborg_application_get_type (void) {
	static volatile gsize seaborg_seaborg_application_type_id__volatile = 0;
	if (g_once_init_enter (&seaborg_seaborg_application_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (SeaborgSeaborgApplicationClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) seaborg_seaborg_application_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (SeaborgSeaborgApplication), 0, (GInstanceInitFunc) seaborg_seaborg_application_instance_init, NULL };
		GType seaborg_seaborg_application_type_id;
		seaborg_seaborg_application_type_id = g_type_register_static (gtk_application_get_type (), "SeaborgSeaborgApplication", &g_define_type_info, 0);
		g_once_init_leave (&seaborg_seaborg_application_type_id__volatile, seaborg_seaborg_application_type_id);
	}
	return seaborg_seaborg_application_type_id__volatile;
}


gint seaborg_main (gchar** args, int args_length1) {
	gint result = 0;
	SeaborgSeaborgApplication* _tmp0_;
	SeaborgSeaborgApplication* _tmp1_;
	gchar** _tmp2_;
	gint _tmp2__length1;
	gint _tmp3_;
	gint _tmp4_;
	_tmp0_ = seaborg_seaborg_application_new ();
	_tmp1_ = _tmp0_;
	_tmp2_ = args;
	_tmp2__length1 = args_length1;
	_tmp3_ = g_application_run ((GApplication*) _tmp1_, _tmp2__length1, _tmp2_);
	_tmp4_ = _tmp3_;
	_g_object_unref0 (_tmp1_);
	result = _tmp4_;
	return result;
}


int main (int argc, char ** argv) {
#if !GLIB_CHECK_VERSION (2,35,0)
	g_type_init ();
#endif
	return seaborg_main (argv, argc);
}


static void _vala_array_destroy (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	if ((array != NULL) && (destroy_func != NULL)) {
		int i;
		for (i = 0; i < array_length; i = i + 1) {
			if (((gpointer*) array)[i] != NULL) {
				destroy_func (((gpointer*) array)[i]);
			}
		}
	}
}


static void _vala_array_free (gpointer array, gint array_length, GDestroyNotify destroy_func) {
	_vala_array_destroy (array, array_length, destroy_func);
	g_free (array);
}



